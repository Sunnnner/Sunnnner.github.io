[{"content":"2-1 å¥—æ¥å­—ã€‚é¢å‘è¿æ¥çš„å¥—æ¥å­—å’Œæ— è¿æ¥å¥—æ¥å­—ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n   é¢å‘è¿æ¥çš„å¥—æ¥å­— æ— è¿æ¥çš„å¥—æ¥å­—     åœ¨é€šä¿¡ä¹‹å‰å¿…é¡»å»ºç«‹è¿æ¥ åœ¨é€šä¿¡ä¹‹å‰ä¸éœ€è¦å»ºç«‹è¿æ¥   åºåˆ—åŒ–çš„ï¼Œå¯é çš„ä¸é‡å¤çš„æ•°æ®äº¤ä»˜ æ— æ³•ä¿è¯é¡ºåºæ€§ï¼Œå¯é æ€§æˆ–é‡å¤æ€§ï¼Œå‡å°‘ä»¥ä¸€å®šçš„å¼€é”€   æ²¡æœ‰è®°å½•è¾¹ç•Œ ä¿å­˜äº†è®°å½•è¾¹ç•Œ   æ¯æ¡ä¿¡æ¯å¯ä»¥æ‹†åˆ†æˆå¤šä¸ªç‰‡æ®µï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªæ¶ˆæ¯ç‰‡æ®µéƒ½èƒ½ç¡®ä¿åˆ°è¾¾ç›®çš„åœ°ï¼Œç„¶åå°†ä»–ä¹ˆæŒ‰é¡ºåºç»„åˆåœ¨ä¸€èµ·ã€‚ æ¶ˆæ¯æ˜¯ä»¥æ•´ä½“å‘é€çš„ã€‚   ä¼ è¾“æ§åˆ¶åè®®(TCP) ç”¨æˆ·æ•°æ®åè®®(UDP)    2-2 å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¶æ„ã€‚ç”¨è‡ªå·±çš„è¯æè¿°è¿™ä¸ªæœ¯è¯­çš„æ„æ€ï¼Œå¹¶ç»™å‡ºå‡ ä¸ªä¾‹å­ã€‚ 1ã€æœåŠ¡å™¨å°±æ˜¯ä¸€ç³»åˆ—ç¡¬ä»¶æˆ–è½¯ä»¶ï¼Œä¸ºä¸€ä¸ªæˆ–å¤šä¸ªå®¢æˆ·ç«¯ï¼ˆæœåŠ¡çš„ç”¨æˆ·ï¼‰æä¾›æ‰€éœ€çš„â€œæœåŠ¡â€ã€‚å…¶å­˜åœ¨çš„ç›®çš„å°±æ˜¯ç­‰å¾…å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶å“åº”ä»–ä»¬ï¼ˆæä¾›æœåŠ¡ï¼‰ï¼Œç„¶åç­‰å¾…æ›´å¤šçš„è¯·æ±‚ã€‚\n2-3 å¥—æ¥å­—ã€‚ TCP å’Œ UDP ä¹‹ä¸­ï¼Œå“ªç§ç±»å‹çš„æœåŠ¡å™¨æ¥å—è¿æ¥ï¼Œå¹¶å°†å®ƒä»¬è½¬æ¢åˆ°ç‹¬ç«‹çš„ å¥—æ¥å­—è¿›è¡Œå®¢æˆ·ç«¯é€šä¿¡ï¼Ÿ tcp\n2-4 å®¢æˆ·ç«¯ã€‚æ›´æ–° TCPï¼ˆtsTclnt.pyï¼‰å’Œ UDPï¼ˆtsUclnt.pyï¼‰å®¢æˆ·ç«¯ï¼Œä»¥ä½¿å¾—æœåŠ¡å™¨åç§° æ— é¡»ç¡¬ç¼–ç åˆ°åº”ç”¨ç¨‹åºä¸­ã€‚æ­¤å¤–ï¼Œåº”è¯¥å…è®¸ç”¨æˆ·æŒ‡å®šä¸»æœºåå’Œç«¯å£å·ï¼Œä¸”å¦‚æœäºŒè€… ä¸­ä»»ä½•ä¸€ä¸ªæˆ–è€…å…¨éƒ¨å‚æ•°ä¸¢å¤±ï¼Œé‚£ä¹ˆåº”è¯¥ä½¿ç”¨é»˜è®¤å€¼ã€‚\n1 2 3 4 5 6 7 8 9  import sys, argparse if __name__ == \u0026#34;__main__\u0026#34;: parser = argparse.ArgumentParser(description=\u0026#34;pls write host port\u0026#34;) parser.add_argument(\u0026#34;--host\u0026#34;, type=str, default=\u0026#39;localhost\u0026#39;) parser.add_argument(\u0026#34;--port\u0026#34;, type=int, default=8000) args = parser.parse_args() host = args.host port = args.port print(args.host, args.port)   2-6 Daytime æœåŠ¡ã€‚ä½¿ç”¨ socket.getservbyname()æ¥ç¡®å®šä½¿ç”¨ UDP åè®®çš„â€œdaytimeâ€æœ åŠ¡çš„ç«¯å£å·ã€‚æ£€æŸ¥ getservbyname()çš„æ–‡æ¡£ä»¥è·å¾—å…¶å‡†ç¡®çš„ä½¿ç”¨è¯­æ³•ï¼ˆå³ socket. getservbyname._ doc_ï¼‰ã€‚é‚£ä¹ˆï¼Œç°åœ¨ç¼–å†™ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œä½¿è¯¥åº”ç”¨ç¨‹åºèƒ½å¤Ÿé€šè¿‡ç½‘ ç»œå‘é€ä¸€æ¡è™šæ‹Ÿæ¶ˆæ¯ï¼Œç„¶åç­‰å¾…æœåŠ¡å™¨å›å¤ã€‚ä¸€æ—¦ä½ æ”¶åˆ°æœåŠ¡å™¨çš„å›å¤ï¼Œå°±å°†å…¶æ˜¾ ç¤ºåˆ°å±å¹•ä¸Šã€‚\n2-7 åŠåŒå·¥èŠå¤©ã€‚åˆ›å»ºä¸€ä¸ªç®€å•çš„åŠåŒå·¥èŠå¤©ç¨‹åºã€‚æŒ‡å®šåŠåŒå·¥ï¼Œæˆ‘ä»¬çš„æ„æ€å°±æ˜¯ï¼Œå½“å»º ç«‹ä¸€ä¸ªè¿æ¥ä¸”æœåŠ¡å¼€å§‹åï¼Œåªæœ‰ä¸€ä¸ªäººèƒ½æ‰“å­—ï¼Œè€Œå¦ä¸€ä¸ªå‚ä¸è€…åœ¨å¾—åˆ°è¾“å…¥æ¶ˆæ¯æç¤º ä¹‹å‰å¿…é¡»ç­‰å¾…æ¶ˆæ¯ã€‚å¹¶ä¸”ï¼Œä¸€æ—¦å‘é€è€…å‘é€äº†ä¸€æ¡æ¶ˆæ¯ï¼Œåœ¨ä»–èƒ½å¤Ÿå†æ¬¡å‘é€æ¶ˆæ¯ä¹‹å‰ï¼Œ å¿…é¡»ç­‰å¾…å¯¹æ–¹å›å¤ã€‚å…¶ä¸­ï¼Œä¸€ä½å‚ä¸è€…å°†åœ¨æœåŠ¡å™¨ä¸€ä¾§ï¼Œè€Œå¦ä¸€ä½åœ¨å®¢æˆ·ç«¯ä¸€ä¾§ã€‚\n2-8 å…¨åŒå·¥èŠå¤©ã€‚æ›´æ–°ä¸Šä¸€ä¸ªç»ƒä¹ çš„è§£å†³æ–¹æ¡ˆï¼Œä¿®æ”¹å®ƒä»¥ä½¿ä½ çš„èŠå¤©æœåŠ¡ç°åœ¨æˆä¸ºå…¨åŒ å·¥æ¨¡å¼ï¼Œæ„å‘³ç€é€šä¿¡ä¸¤ç«¯éƒ½å¯ä»¥å‘é€å¹¶æ¥æ”¶æ¶ˆæ¯ï¼Œå¹¶ä¸”äºŒè€…ç›¸äº’ç‹¬ç«‹ã€‚\n2-9 å¤šç”¨æˆ·å…¨åŒå·¥èŠå¤©ã€‚è¿›ä¸€æ­¥ä¿®æ”¹ä½ çš„è§£å†³æ–¹æ¡ˆï¼Œä»¥ä½¿ä½ çš„èŠå¤©æœåŠ¡æ”¯æŒå¤šç”¨æˆ·ã€‚\n2-10 å¤šç”¨æˆ·ã€å¤šæˆ¿é—´ã€å…¨åŒå·¥èŠå¤©ã€‚ç°åœ¨è®©ä½ çš„èŠå¤©æœåŠ¡æ”¯æŒå¤šç”¨æˆ·å’Œå¤šæˆ¿é—´åŠŸèƒ½ã€‚\n2-11 Web å®¢æˆ·ç«¯ã€‚ç¼–å†™ä¸€ä¸ª TCP å®¢æˆ·ç«¯ï¼Œä½¿å…¶è¿æ¥åˆ°ä½ æœ€å–œæ¬¢çš„ç½‘ç«™ï¼ˆåˆ é™¤â€œhttp://â€å’Œ ä»»ä½•åç»­ä¿¡æ¯ï¼›åªä½¿ç”¨ä¸»æœºåï¼‰çš„ 80 ç«¯å£ã€‚ä¸€æ—¦å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œå°±å‘é€ HTTP å‘½ä»¤ å­—ç¬¦ä¸² GET / \\nï¼Œå¹¶å°†æœåŠ¡å™¨è¿”å›çš„æ‰€æœ‰æ•°æ®å†™å…¥ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼ˆGET å‘½ä»¤ä¼šæ£€ç´¢ä¸€ä¸ª æœ¬æ–‡æ¡£ç”±Linuxå…¬ç¤¾ www.linuxidc.com æ”¶é›†æ•´ç† 72 ç¬¬ 1 éƒ¨åˆ† é€šç”¨åº”ç”¨ä¸»é¢˜ Web é¡µé¢ï¼Œ /file è¡¨æ˜è¦è·å–çš„æ–‡ä»¶ï¼Œ \\n å°†å‘½ä»¤å‘é€åˆ°æœåŠ¡å™¨ï¼‰ã€‚æ£€æŸ¥æ£€ç´¢åˆ°çš„æ–‡ä»¶çš„å†… å®¹ã€‚å†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿä½ å¦‚ä½•æ£€æŸ¥èƒ½ç¡®ä¿æ‰€æ¥æ”¶åˆ°çš„æ•°æ®æ˜¯æ­£ç¡®çš„ï¼Ÿï¼ˆæ³¨æ„ï¼šä½ å¯èƒ½å¿…é¡» åœ¨å‘½ä»¤å­—ç¬¦ä¸²åé¢æ’å…¥ä¸€ä¸ªæˆ–ä¸¤ä¸ªæ¢è¡Œç¬¦ï¼Œé€šå¸¸ä¸€ä¸ªå°±èƒ½æ­£å¸¸å·¥ä½œï¼‰\n2-12 ç¡çœ æœåŠ¡å™¨ã€‚åˆ›å»ºä¸€ä¸ªç¡çœ æœåŠ¡å™¨ã€‚å®¢æˆ·ç«¯å°†è¯·æ±‚ä¸€æ®µæ—¶é—´ä¹‹åè¿›å…¥ç¡çœ çŠ¶æ€ã€‚ æœåŠ¡å™¨å°†ä»£è¡¨å®¢æˆ·ç«¯å‘é€å‘½ä»¤ï¼Œç„¶åå‘å®¢æˆ·ç«¯è¿”å›ä¸€æ¡è¡¨æ˜æˆåŠŸçš„æ¶ˆæ¯ã€‚å®¢æˆ·ç«¯åº” è¯¥ç¡çœ æˆ–ç©ºé—²æ‰€è¯·æ±‚çš„æ—¶é—´é•¿åº¦ã€‚è¿™æ˜¯ä¸€ä¸ªè¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„ç®€å•å®ç°ï¼Œæ­¤è¿‡ç¨‹ä¸­ä¸€ ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚ä¼šé€šè¿‡ç½‘ç»œè°ƒç”¨å¦ä¸€å°è®¡ç®—æœºä¸Šçš„å‘½ä»¤ã€‚\n2-13 åç§°æœåŠ¡å™¨ã€‚è®¾è®¡å¹¶å®ç°ä¸€ä¸ªåç§°æœåŠ¡å™¨ã€‚è¯¥æœåŠ¡å™¨è´Ÿè´£ç»´æŠ¤ä¸€ä¸ªåŒ…å«ä¸»æœºå-ç«¯ å£å·å¯¹çš„æ•°æ®åº“ï¼Œä¹Ÿè®¸è¿˜æœ‰å¯¹åº”æœåŠ¡å™¨æ‰€æä¾›çš„æœåŠ¡çš„å­—ç¬¦ä¸²æè¿°ã€‚é’ˆå¯¹ä¸€ä¸ªæˆ–å¤š ä¸ªç°æœ‰çš„æœåŠ¡å™¨ï¼Œæ³¨å†Œå®ƒä»¬çš„æœåŠ¡åˆ°ä½ çš„åç§°æœåŠ¡å™¨ä¸­ï¼ˆæ³¨æ„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ äº›æœåŠ¡å™¨æ˜¯åç§°æœåŠ¡å™¨çš„å®¢æˆ·ç«¯ï¼‰ã€‚ æ¯ä¸ªå¯åŠ¨çš„å®¢æˆ·ç«¯éƒ½ä¸çŸ¥é“å®ƒä»¬æ‰€å¯»æ‰¾çš„æœåŠ¡å™¨åœ°å€ã€‚åŒæ ·åœ°ï¼Œå¯¹äºåç§°æœåŠ¡å™¨çš„ å®¢æˆ·ç«¯æ¥è¯´ï¼Œè¿™äº›å®¢æˆ·ç«¯åº”è¯¥å‘é€ä¸€ä¸ªè¯·æ±‚åˆ°åç§°æœåŠ¡å™¨ï¼Œä»¥æŒ‡ç¤ºå®ƒä»¬æ­£åœ¨å¯»æ‰¾ä»€ ä¹ˆç±»å‹çš„æœåŠ¡ã€‚ä½œä¸ºå›å¤ï¼Œåç§°æœåŠ¡å™¨ä¼šå‘è¯¥å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªä¸»æœºå-ç«¯å£å·å¯¹ï¼Œ ç„¶åè¯¥å®¢æˆ·ç«¯å°±å¯ä»¥è¿æ¥åˆ°é€‚å½“çš„æœåŠ¡å™¨æ¥å¤„ç†å®ƒçš„è¯·æ±‚ã€‚ é€‰åšé¢˜ï¼š 1ï¼‰ä¸ºåç§°æœåŠ¡å™¨æ·»åŠ ç¼“å­˜æµè¡Œè¯·æ±‚çš„åŠŸèƒ½ã€‚ 2ï¼‰ä¸ºä½ çš„åç§°æœåŠ¡å™¨æ·»åŠ æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œè·Ÿè¸ªå“ªäº›æœåŠ¡å™¨æ³¨å†Œäº†åç§°æœåŠ¡å™¨ï¼Œä»¥ åŠå®¢æˆ·ç«¯æ­£åœ¨è¯·æ±‚å“ªäº›æœåŠ¡ã€‚ 3ï¼‰ ä½ çš„åç§°æœåŠ¡å™¨åº”è¯¥å®šæœŸé€šè¿‡ç›¸åº”çš„ç«¯å£å· ping å·²ç»æ³¨å†Œçš„ä¸»æœºï¼Œä»¥ç¡®ä¿å®ƒä»¬ çš„æœåŠ¡ç¡®å®å¤„äºå¼€å¯çŠ¶æ€ã€‚åå¤çš„å¤±è´¥å°†ä¼šå¯¼è‡´åç§°æœåŠ¡å™¨å°†å…¶ä»æœåŠ¡åˆ—è¡¨ä¸­åˆ’å»ã€‚ ä½ å¯ä»¥ä¸ºé‚£äº›æ³¨å†Œäº†åç§°æœåŠ¡å™¨çš„æœåŠ¡å™¨å®ç°çœŸæ­£çš„æœåŠ¡ï¼Œæˆ–è€…ä»…ä»…ä½¿ç”¨è™šæ‹ŸæœåŠ¡ å™¨ï¼ˆä»…ä»…åº”ç­”ä¸€ä¸ªè¯·æ±‚ï¼‰ã€‚\n2-14 é”™è¯¯æ£€æŸ¥å’Œä¼˜é›…çš„å…³é—­ã€‚æœ¬ç« æ‰€æœ‰çš„å®¢æˆ·ç«¯/æœåŠ¡å™¨ç¤ºä¾‹ä»£ç éƒ½ç¼ºä¹é”™è¯¯æ£€æŸ¥åŠŸ èƒ½ã€‚æˆ‘ä»¬å¹¶æ²¡æœ‰å¤„ç†ä»¥ä¸‹å‡ ç§åœºæ™¯ï¼Œä¾‹å¦‚ï¼Œç”¨æˆ·æŒ‰Ctrl+Cå¿«æ·é”®é€€å‡ºæœåŠ¡å™¨æˆ–Ctrl+D å¿«æ·é”®ç»ˆæ­¢å®¢æˆ·ç«¯è¾“å…¥ï¼Œä¹Ÿæ²¡æœ‰æ£€æŸ¥å…¶ä»–å¯¹ raw_input()çš„ä¸é€‚å½“è¾“å…¥æˆ–å¤„ç†ç½‘ç»œé”™ è¯¯ã€‚å› ä¸ºè¿™ä¸ªç¼ºé™·ï¼Œç»å¸¸æˆ‘ä»¬ç»ˆæ­¢ä¸€ä¸ªåº”ç”¨ç¨‹åºæ—¶å¹¶æ²¡æœ‰å…³é—­å¥—æ¥å­—ï¼Œå¾ˆå¯èƒ½ä¼šå¯¼ è‡´ä¸¢å¤±æ•°æ®ã€‚æœ¬ç»ƒä¹ ä¸­ï¼Œåœ¨ç¤ºä¾‹ä¸­é€‰æ‹©ä¸€å¯¹å®¢æˆ·ç«¯/æœåŠ¡å™¨ç¨‹åºï¼Œå¹¶æ·»åŠ è¶³å¤Ÿçš„é”™ è¯¯æ£€æŸ¥ï¼Œè¿™æ ·æ¯ä¸ªåº”ç”¨ç¨‹åºå°±èƒ½æ­£ç¡®åœ°å…³é—­ï¼Œå³å…³é—­ç½‘ç»œè¿æ¥ã€‚\n2-15 å¼‚æ­¥æ€§å’Œ SocketServer/socketserverã€‚ä½¿ç”¨ TCP æœåŠ¡å™¨çš„ç¤ºä¾‹ï¼Œå¹¶ä½¿ç”¨å…¶ä¸­ä¸€ä¸ª mix-in ç±»æ¥æ”¯æŒä¸€ä¸ªå¼‚æ­¥æœåŠ¡å™¨ã€‚ä¸ºäº†æµ‹è¯•ä½ çš„æœåŠ¡å™¨ï¼ŒåŒæ—¶åˆ›å»ºå¹¶è¿è¡Œå¤šä¸ªå®¢æˆ· ç«¯ï¼Œå¹¶äº¤å‰æ˜¾ç¤ºä½ çš„æœåŠ¡å™¨æ»¡è¶³äºŒè€…ä¸­è¯·æ±‚çš„è¾“å‡ºã€‚\n2-16 *æ‰©å±• SocketServer ç±»ã€‚åœ¨ SocketServer TCP æœåŠ¡å™¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸å¾—ä¸ä»åŸå§‹ çš„åŸºç¡€ TCP å®¢æˆ·ç«¯ä¸­ä¿®æ”¹å®¢æˆ·ç«¯ï¼Œå› ä¸º SocketServer ç±»æ²¡æœ‰ç»´æŠ¤å¤šä¸ªè¯·æ±‚ä¹‹é—´ çš„è¿æ¥ã€‚ aï¼‰ç»§æ‰¿ TCPServer å’Œ StreamRequestHandler ç±»å¹¶é‡æ–°è®¾è®¡æœåŠ¡å™¨ï¼Œä½¿å…¶èƒ½å¤Ÿä¸ºæ¯ä¸ªå®¢æˆ· ç«¯ç»´æŒå¹¶ä½¿ç”¨å•ä¸ªè¿æ¥ï¼ˆè€Œä¸æ˜¯æ¯ä¸ªè¯·æ±‚ä¸€ä¸ªè¿æ¥ï¼‰ã€‚ bï¼‰å°†å‰é¢ç»ƒä¹ çš„è§£å†³æ–¹æ¡ˆé›†æˆåˆ°ï¼ˆ aï¼‰éƒ¨åˆ†ä¸­çš„æ–¹æ¡ˆä¸­ï¼Œè¿™æ ·å°±å¯ä»¥å¹¶è¡Œä¸ºå¤šä¸ªå®¢æˆ·ç«¯ æä¾›æœåŠ¡ã€‚\n2-17 *å¼‚æ­¥ç³»ç»Ÿã€‚ç ”ç©¶è‡³å°‘ 5 ä¸ªåŸºäº Python çš„ä¸åŒå¼‚æ­¥ç³»ç»Ÿï¼Œå¯ä»¥ä» Twistedã€ Greenletsã€ Tornadoã€ Dieselã€ Concurrenceã€ Eventletã€ Gevent ç­‰ä¸­é€‰æ‹©ã€‚æè¿°å®ƒä»¬æ˜¯ä»€ä¹ˆï¼Œå¯¹ å®ƒä»¬è¿›è¡Œåˆ†ç±»ï¼Œå¹¶æ‰¾åˆ°å®ƒä»¬ä¹‹é—´çš„ç›¸ä¼¼ç‚¹å’Œå·®å¼‚æ€§ï¼Œç„¶ååˆ›å»ºä¸€äº›æ¼”ç¤ºä»£ç ç¤ºä¾‹\n","date":"2022-03-10T15:46:40+08:00","permalink":"https://sunnnner.github.io/p/pysocket/","title":"Pysocket"},{"content":" python3 ä¸­è¿­ä»£å™¨æ–¹æ³•next()å·²ç»æ”¹å˜ä¸º__next__()  ","date":"2022-03-08T11:06:40+08:00","permalink":"https://sunnnner.github.io/p/djangoupgrade/","title":"Djangoupgrade"},{"content":"  å°è®°åœ¨macä¸Šä½¿ç”¨vscodeå¯¼å…¥redisåŒ…å¤±æ•ˆé—®é¢˜\n  è§£å†³åŠæ³•\n  1 2 3 4 5 6 7 8 9 10 11 12 13  vim .bash_profile # ç¯å¢ƒå˜é‡å¯¼å…¥å½“å‰å·¥ä½œç›®å½• export GOPATH=/Users/xxx/Desktop/go-project cd /Users/xxx/Desktop/go-project go mod init example.com/m/v2 # è‡ªåŠ¨ä¸‹è½½æ‰€éœ€çš„åŒ… go mod tidy # é¡¹ç›®æºä»£ç æ”¾ç½®å¤„ mkdir src cd src # å¯ä»¥å¼€å§‹ç¼–å†™äº†   ","date":"2021-08-26T10:48:36+08:00","permalink":"https://sunnnner.github.io/p/go%E5%AF%BC%E5%85%A5%E5%A4%96%E9%83%A8%E5%8C%85%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98/","title":"Goå¯¼å…¥å¤–éƒ¨åŒ…å¤±æ•ˆé—®é¢˜"},{"content":" is_staff bool æŒ‡å®šæ­¤ç”¨æˆ·æ˜¯å¦å¯ä»¥è®¿é—®ç®¡ç†ç«™ç‚¹ æ§åˆ¶ç”¨æˆ·æ“ä½œadminçš„æƒé™ç”± django.contrib.auth.backends.ModelBackend è¿›è¡Œæ§åˆ¶ï¼Œå®ƒä¹Ÿè¿›è¡Œæ§åˆ¶ç”¨æˆ·çš„ç™»å½•è®¤è¯è¡Œä¸º ModelBackendæºç è§£æ  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107  class ModelBackend: \u0026#34;\u0026#34;\u0026#34; Authenticates against settings.AUTH_USER_MODEL. \u0026#34;\u0026#34;\u0026#34; # æ§åˆ¶ç”¨æˆ·ç™»å½•è®¤è¯ é€šè¿‡é‡å†™æ­¤æ–¹æ³•è¿›è¡Œè‡ªå®šä¹‰ç™»å½•è®¤è¯ def authenticate(self, request, username=None, password=None, **kwargs): if username is None: username = kwargs.get(UserModel.USERNAME_FIELD) try: user = UserModel._default_manager.get_by_natural_key(username) except UserModel.DoesNotExist: # Run the default password hasher once to reduce the timing # difference between an existing and a nonexistent user (#20760). UserModel().set_password(password) else: if user.check_password(password) and self.user_can_authenticate(user): return user # æŸ¥çœ‹ç”¨æˆ·æ˜¯å¦ä¸ºå¯ç”¨çŠ¶æ€ def user_can_authenticate(self, user): \u0026#34;\u0026#34;\u0026#34; Reject users with is_active=False. Custom user models that don\u0026#39;t have that attribute are allowed. \u0026#34;\u0026#34;\u0026#34; is_active = getattr(user, \u0026#39;is_active\u0026#39;, None) return is_active or is_active is None # è·å–ç”¨æˆ·çš„permissionåˆ—è¡¨ def _get_user_permissions(self, user_obj): return user_obj.user_permissions.all() # è·å–ç”¨æˆ·çš„ç»„æƒé™åˆ—è¡¨ def _get_group_permissions(self, user_obj): user_groups_field = get_user_model()._meta.get_field(\u0026#39;groups\u0026#39;) user_groups_query = \u0026#39;group__%s\u0026#39; % user_groups_field.related_query_name() return Permission.objects.filter(**{user_groups_query: user_obj}) # è·å–æƒé™åˆ—è¡¨ def _get_permissions(self, user_obj, obj, from_name): \u0026#34;\u0026#34;\u0026#34; Return the permissions of `user_obj` from `from_name`. `from_name` can be either \u0026#34;group\u0026#34; or \u0026#34;user\u0026#34; to return permissions from `_get_group_permissions` or `_get_user_permissions` respectively. \u0026#34;\u0026#34;\u0026#34; if not user_obj.is_active or user_obj.is_anonymous or obj is not None: return set() perm_cache_name = \u0026#39;_%s_perm_cache\u0026#39; % from_name if not hasattr(user_obj, perm_cache_name): if user_obj.is_superuser: perms = Permission.objects.all() else: perms = getattr(self, \u0026#39;_get_%s_permissions\u0026#39; % from_name)(user_obj) perms = perms.values_list(\u0026#39;content_type__app_label\u0026#39;, \u0026#39;codename\u0026#39;).order_by() setattr(user_obj, perm_cache_name, {\u0026#34;%s.%s\u0026#34; % (ct, name) for ct, name in perms}) return getattr(user_obj, perm_cache_name) # è·å–ç”¨æˆ·æƒé™åˆ—è¡¨ def get_user_permissions(self, user_obj, obj=None): \u0026#34;\u0026#34;\u0026#34; Return a set of permission strings the user `user_obj` has from their `user_permissions`. \u0026#34;\u0026#34;\u0026#34; return self._get_permissions(user_obj, obj, \u0026#39;user\u0026#39;) # è·å–ç»„åˆ—è¡¨ def get_group_permissions(self, user_obj, obj=None): \u0026#34;\u0026#34;\u0026#34; Return a set of permission strings the user `user_obj` has from the groups they belong. \u0026#34;\u0026#34;\u0026#34; return self._get_permissions(user_obj, obj, \u0026#39;group\u0026#39;) # è·å–ç”¨æˆ·æ‰€æœ‰çš„æƒé™åˆ—è¡¨ def get_all_permissions(self, user_obj, obj=None): if not user_obj.is_active or user_obj.is_anonymous or obj is not None: return set() if not hasattr(user_obj, \u0026#39;_perm_cache\u0026#39;): user_obj._perm_cache = { *self.get_user_permissions(user_obj), *self.get_group_permissions(user_obj), } return user_obj._perm_cache # åˆ¤æ–­æ˜¯å¦å…·æœ‰æƒé™ def has_perm(self, user_obj, perm, obj=None): return user_obj.is_active and perm in self.get_all_permissions(user_obj, obj) # è¿”å›æŸä¸ªmodelè®¿é—®æƒé™(True or False) def has_module_perms(self, user_obj, app_label): \u0026#34;\u0026#34;\u0026#34; Return True if user_obj has any permissions in the given app_label. \u0026#34;\u0026#34;\u0026#34; return user_obj.is_active and any( perm[:perm.index(\u0026#39;.\u0026#39;)] == app_label for perm in self.get_all_permissions(user_obj) ) # å¾—åˆ°ç”¨æˆ·å®ä¾‹ (é€šè¿‡é‡å†™æ­¤æ–¹æ³•æˆ–å¾—è‡ªå®šä¹‰ç”¨æˆ·å®ä¾‹) def get_user(self, user_id): try: user = UserModel._default_manager.get(pk=user_id) except UserModel.DoesNotExist: return None return user if self.user_can_authenticate(user) else None    é‡å†™ç¤ºä¾‹  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  class xxxBackend(ModelBackend): def authenticate(self, request, username=None, password=None, **kwargs): try: user = UserModel.objects.get(Q(username=username) | Q(phone=username)) if user.check_password(password): return user return None except UserModel.DoesNotExist: return None except MultipleObjectsReturned: return None def get_user(self, user_id): try: return UserModel.objects.get(pk=user_id) except UserModel.DoesNotExist: return None   ","date":"2021-08-24T09:26:52+08:00","permalink":"https://sunnnner.github.io/p/django-admin-permissions%E6%8E%A7%E5%88%B6/","title":"Django Admin Permissionsæ§åˆ¶"},{"content":"é«˜çº§è¯­è¨€æºç¨‹åºå†…éƒ¨çš„å‡ ä¸ªæ¦‚å¿µ  tokenã€å…³é”®å­—ã€æ ‡è¯†ç¬¦ã€æ“ä½œç¬¦ã€åˆ†éš”ç¬¦å’Œå­—é¢é‡  token   token æ˜¯æ„æˆæºç¨‹åºçš„åŸºæœ¬ä¸å¯å†åˆ†å‰²çš„å•å…ƒï¼Œç¼–è¯‘å™¨ç¼–è¯‘ç¨‹åºçš„ç¬¬ä¸€æ­¥å°±æ˜¯å°†æºç¨‹åºåˆ†å‰²ä¸ºä¸€ä¸ªä¸ªç‹¬ç«‹çš„tokenï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯è¯æ³•åˆ†æ\n  goè¯­è¨€çš„tokenå¯ä»¥åˆ†ä¸ºå…³é”®å­—ã€æ ‡è¯†ç¬¦ã€æ“ä½œç¬¦ã€åˆ†éš”ç¬¦å’Œå­—é¢å¸¸é‡ç­‰\n  ","date":"2021-08-17T10:10:49+08:00","permalink":"https://sunnnner.github.io/p/go%E8%AF%8D%E6%B3%95%E5%8D%95%E5%85%83/","title":"Goè¯æ³•å•å…ƒ"},{"content":" annotate èšåˆæ“ä½œ æœ‰ Max Sum Countä¸€äº›å‚æ•°ä½¿ç”¨ =ç›¸å½“äºsqlä¸­çš„as å¦‚æœæƒ³è¦æŸ¥è¯¢çš„æ—¶å€™æ›´æ¢å˜é‡åç§°ä½¿ç”¨extra(select={\u0026quot;change_file\u0026quot;: \u0026quot;model_file\u0026quot;}) ç›¸å½“äº sql ä¸­çš„as sqlä¸­order byåˆ†ç»„åœ¨ormä½¿ç”¨valuesè¿›è¡Œè¡¨è¾¾ ç¤ºä¾‹  1 2 3  # æŒ‰ç…§å„ä¸ªçœäº‹è¿›è¡Œèšåˆæ•°é‡ DemoModel.objects.filter(test=xxx).extra(select={\u0026#39;position\u0026#39;: city}).\\ values(\u0026#34;position\u0026#34;, \u0026#34;location\u0026#34;).annotate(count=Count(city))   ","date":"2021-08-12T16:19:36+08:00","permalink":"https://sunnnner.github.io/p/django-orm%E8%81%9A%E5%90%88%E5%88%86%E7%BB%84%E7%9F%A5%E8%AF%86/","title":"Django Ormèšåˆåˆ†ç»„çŸ¥è¯†"},{"content":"ubuntu20.04 LTSç¼–è¯‘ python3.7.1 å®‰è£…ç¼–è¯‘å‰ä¾èµ–åŒ…  sudo apt-get install -y build-essential libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libreadline-dev libffi-dev zlib1g-dev gcc make   ç¼–è¯‘å‰é…ç½®   sudo ./configure --enable-optimizations --prefix=/usr/local/bin/python3.7\n  \u0026ndash;prefixæŒ‡å®šå®‰è£…ä½ç½®\n  ç¼–è¯‘å®‰è£…   make\n  sudo make install\n  å®‰è£…virtualenvè™šæ‹Ÿç¯å¢ƒæ¥ç®¡ç†pythonç‰ˆæœ¬  sudo apt install python3-pip pip install virtualenv pip install virtualenvwrapper mkdir .virtualenvs  vim .zhsrc 1 2 3 4  export WORKON_HOME=$HOME/.virtualenvs export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3 export VIRTUALENVWRAPPER_VIRTUALENV=~/.local/bin/virtualenv source ~/.local/bin/virtualenvwrapper.sh    source .zshrc  åˆ›å»ºpython3.7è™šæ‹Ÿç¯å¢ƒ  mkvirtualenv -p mkvirtualenv -p /usr/local/bin/python3.7/bin/python3.7 py3.7  ","date":"2021-08-06T19:29:05+08:00","permalink":"https://sunnnner.github.io/p/ubuntu20.04-lts%E7%BC%96%E8%AF%91python3.7/","title":"Ubuntu20.04 LTSç¼–è¯‘python3.7"},{"content":"æ´¾ç”Ÿ åŒ…æ‹¬ï¼š æŒ‡é’ˆç±»å‹(Pointer) æ•°ç»„ç±»å‹  ç»“æ„åŒ–ç±»å‹(struct) Channelç±»å‹ å‡½æ•°ç±»å‹ åˆ‡ç‰‡ç±»å‹ æ¥å£ç±»å‹(interface) Mapç±»å‹  æµ®ç‚¹å‹ float32ä¸float64 complex64ä¸complex128 64ä½çš„å®æ•°ä¸è™šæ•°  å…¶ä»–æ•°å­—ç±»å‹ byte ç±»ä¼¼uint8 rune ç±»ä¼¼int32 uint 32æˆ–è€…64ä½ int ä¸uintä¸€æ ·å¤§ uintptr æ— ç¬¦å·æ•´å‹ï¼Œç”¨äºå­˜æ”¾ä¸€ä¸ªæŒ‡é’ˆ ","date":"2020-02-02T15:52:00+08:00","permalink":"https://sunnnner.github.io/p/go%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/","title":"Goè¯­è¨€æ•°æ®ç±»å‹"},{"content":"Goå…³é”®å­—    å…³é”®å­— æ„ä¹‰     break é€€å‡º   default é»˜è®¤å‡½æ•°   func å®šä¹‰å‡½æ•°å’Œæ–¹æ³•   interface ç”¨äºå®šä¹‰æ¥å£   select ç”¨äºé€‰æ‹©ä¸åŒç±»å‹çš„é€šè®¯   case ç”¨æˆ·æ¡ä»¶é€‰æ‹©   defer å»¶è¿Ÿæ‰§è¡Œå†…å®¹ï¼ˆæ”¶å°¾å·¥ä½œï¼‰æœ‰ç‚¹ç±»ä¼¼C++çš„ææ„ï¼Œä½†æ˜¯å®ƒæ˜¯å†å‡½æ•°ç»“å°¾çš„æ—¶å€™å»æ‰§è¡Œï¼ˆä¹Ÿå°±æ˜¯æ ˆå³å°†è¢«é‡Šæ”¾çš„æ—¶å€™ï¼‰   go ç”¨äºå¹¶å‘   map ç”¨äºå£°æ˜mapç±»å‹æ•°æ®   struct ç”¨äºå®šä¹‰æŠ½è±¡æ•°æ®ç±»å‹   range ç”¨äºè¯»å–sliceã€mapã€channelæ•°æ®   chan ç”¨äºchannelé€šè®¯   if é€‰æ‹©ç»“æ„-å¦‚æœ   else é€‰æ‹©ç»“æ„-å¦åˆ™   type ç”¨äºå£°æ˜è‡ªå®šä¹‰ç±»å‹   return ç”¨äºä»å‡½æ•°è¿”å›   var Goè¯­è¨€åŸºç¡€é‡Œé¢çš„å˜é‡å’Œå¸¸é‡ç”³æ˜ (var age int)   const å˜é‡å’Œå¸¸é‡çš„å£°æ˜   package åŒ…ç®¡ç†   import å¯¼å…¥   switch é€‰æ‹©ç»“æ„   fallthrough æµç¨‹æ§åˆ¶1.åŠ äº†fallthroughåï¼Œä¼šç›´æ¥è¿è¡Œã€ç´§è·Ÿçš„åä¸€ä¸ªã€‘caseæˆ–defaultè¯­å¥ï¼Œä¸è®ºæ¡ä»¶æ˜¯å¦æ»¡è¶³éƒ½ä¼šæ‰§è¡Œ)2.åŠ äº†fallthroughè¯­å¥åï¼Œã€ç´§è·Ÿçš„åä¸€ä¸ªã€‘caseæ¡ä»¶ä¸èƒ½å®šä¹‰å¸¸é‡å’Œå˜é‡3.æ‰§è¡Œå®Œfallthroughåç›´æ¥è·³åˆ°ä¸‹ä¸€ä¸ªæ¡ä»¶è¯­å¥ï¼Œæœ¬æ¡ä»¶æ‰§è¡Œè¯­å¥åé¢çš„è¯­å¥ä¸æ‰§è¡Œ   continue è·³è¿‡æœ¬æ¬¡å¾ªç¯   for å¾ªç¯   goto è·³è½¬è¯­å¥    36ä¸ªé¢„å®šä¹‰æ ‡è¯†ç¬¦    å†…å»ºå¸¸é‡ å†…å»ºç±»å‹ å†…å»ºå‡½æ•°     true int make   false int8 len   iota int16 cap   nil int32 new   - int64 append   - uint copy   - uint8 close   - uint16 delete   - uint32 complex   - uint64 real   - uintprt imag   - float32 panic   - float64 recover   - complex64 -   - complex128 -   - bool -   - byte -   - rune -   - string -   - error -    ","date":"2020-02-01T15:45:32+08:00","permalink":"https://sunnnner.github.io/p/go%E5%AD%A6%E4%B9%A0/","title":"Goå­¦ä¹ "},{"content":"1 2 3 4 5 6 7 8 9 10 11 12  if cat xxx.yml | grep \u0026#34;content\u0026#34;\u0026gt;/dev/null then return 1 else return 0 fi   ","date":"2020-01-01T15:45:01+08:00","permalink":"https://sunnnner.github.io/p/shell-%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E4%B8%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E5%AD%97%E7%AC%A6%E4%B8%B2/","title":"Shell åˆ¤æ–­æ–‡ä»¶ä¸­æ˜¯å¦å­˜åœ¨å­—ç¬¦ä¸²"},{"content":" ç§’æ•°æ˜¯ç›¸å¯¹äº1970.1.1å·çš„ç§’æ•° æ—¥æœŸçš„æ¨¡å—æœ‰timeã€datetime  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  import datetime t = datetime.datetime(2009, 10, 21, 0, 0, 10, 10) # åˆ†åˆ«æ˜¯å¹´ä»½ã€æœˆä»½ã€æ—¥ã€å°æ—¶ã€åˆ†é’Ÿã€ç§’ã€å¾®å¦™(10-6ç§’) print (t-datetime.datetime(1970,1,1)).total_seconds() # æ€»å…±å¤šå°‘ç§’ import datetime, time t = datetime.datetime(2011, 10, 21, 0, 0) time.mktime(t.timetuple()) 1319148000.0 stringè½¬datetime str = \u0026#39;2012-11-19\u0026#39; date_time = datetime.datetime.strptime(str,\u0026#39;%Y-%m-%d\u0026#39;) datetime.datetime(2012,11,19,0,0) datetimeè½¬string date_time.strftime(\u0026#39;%Y-%m-%d\u0026#39;) \u0026#39;2012-11-19\u0026#39;   datetimeè½¬æ—¶é—´æˆ³ time_time = time.mktime(date_time.timetuple())\næ—¶é—´æˆ³è½¬string  time.strftime('%Y-%m-%d',time.localtime(time_time)) \u0026lsquo;2012-11-19\u0026rsquo;  dateè½¬datetime 1 2 3 4 5 6 7 8 9  date = datetime.date.today() date datetime.date(2012,11,19) datetime.datetime.strptime(str(date),\u0026#39;%Y-%m-%d\u0026#39;) #å°†dateè½¬æ¢ä¸ºstrï¼Œåœ¨ç”±strè½¬æ¢ä¸ºdatetime datetime.datetime(2012,11,19,0,0)   ","date":"2019-12-10T15:43:08+08:00","permalink":"https://sunnnner.github.io/p/python%E6%97%A5%E6%9C%9F%E8%BD%AC%E6%8D%A2/","title":"Pythonæ—¥æœŸè½¬æ¢"},{"content":"logging.basicConfigå‡½æ•°  loggingæ¨¡å—æ˜¯Pythonå†…ç½®æ ‡å‡†æ¨¡å—ï¼Œä¸»è¦ç”¨äºè¾“å‡ºè¿è¡Œæ—¥å¿—ï¼Œå¯ä»¥è®¾ç½®è¾“å‡ºæ—¥å¿—çš„ç­‰çº§ã€æ—¥å¿—ä¿å­˜è·¯å¾„ï¼Œæ—¥å¿—æ–‡ä»¶å›æ»šç­‰  ##ç›¸æ¯”Printä¼˜ç‚¹ï¼š\n å¯ä»¥é€šè¿‡è®¾ç½®ä¸åŒçš„æ—¥å¿—ç­‰çº§ï¼Œåœ¨releaseç‰ˆæœ¬ä¸­åªè¾“å‡ºé‡è¦ä¿¡æ¯ï¼Œè€Œä¸å¿…æ˜¾ç¤ºå¤§é‡çš„è°ƒè¯•ä¿¡æ¯ï¼› printå°†æ‰€æœ‰ä¿¡æ¯éƒ½è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºä¸­ï¼Œä¸¥é‡å½±å“å¼€å‘è€…ä»æ ‡å‡†è¾“å‡ºä¸­æŸ¥çœ‹å…¶å®ƒæ•°æ®ï¼›loggingåˆ™å¯ä»¥ç”±å¼€å‘è€…å†³å®šå°†ä¿¡æ¯è¾“å‡ºåˆ°ä»€ä¹ˆåœ°æ–¹ï¼Œä»¥åŠæ€ä¹ˆè¾“å‡ºï¼› åœ¨pythonä¸­ï¼Œloggingç”±loggerï¼Œhandlerï¼Œfilterï¼Œformaterå››ä¸ªéƒ¨åˆ†ç»„æˆï¼š loggeræ˜¯æä¾›æˆ‘ä»¬è®°å½•æ—¥å¿—çš„æ–¹æ³•ï¼›handleræ˜¯è®©æˆ‘ä»¬é€‰æ‹©æ—¥å¿—çš„è¾“å‡ºåœ°æ–¹ï¼Œå¦‚ï¼šæ§åˆ¶å°ï¼Œæ–‡ä»¶ï¼Œé‚®ä»¶å‘é€ç­‰ï¼Œä¸€ä¸ªloggeræ·»åŠ å¤šä¸ªhandlerï¼›filteræ˜¯ç»™ç”¨æˆ·æä¾›æ›´åŠ ç»†ç²’åº¦çš„æ§åˆ¶æ—¥å¿—çš„è¾“å‡ºå†…å®¹ï¼›formaterç”¨æˆ·æ ¼å¼åŒ–è¾“å‡ºæ—¥å¿—çš„ä¿¡æ¯ã€‚  pythonä¸­é…ç½®loggingæœ‰ä¸‰ç§æ–¹å¼ ç¬¬ä¸€ç§ï¼šåŸºç¡€é…ç½®ï¼Œ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  logging.basicConfig( filename=\u0026#34;config.log\u0026#34;, filemode=\u0026#34;w\u0026#34;, format=\u0026#34;%(asctime)s-%(name)s-%(levelname)s-%(message)s\u0026#34;, level=logging.INFO) ç¬¬äºŒç§ï¼šä½¿ç”¨é…ç½®æ–‡ä»¶çš„æ–¹å¼é…ç½®logging,ä½¿ç”¨`fileConfigå‡½æ•°æ¥è¯»å–é…ç½®æ–‡ä»¶ fileConfig( filename, defaults=None, disable_existing_loggers=Ture )` ç¬¬ä¸‰ç§ï¼šä½¿ç”¨ä¸€ä¸ªå­—å…¸æ–¹å¼æ¥å†™é…ç½®ä¿¡æ¯ï¼Œç„¶åä½¿ç”¨dictConfig dictConfig( dict, defaults=None, disable_existing_loggers=Ture )   æ—¥å¿—Levelç­‰çº§  æ—¥å¿—ä¸€å…±åˆ†æˆ5ä¸ªç­‰çº§ï¼Œä»ä½åˆ°é«˜åˆ†åˆ«æ˜¯ï¼šDEBUG ,INFO ,WARNING ,ERROR, CRITICALã€‚ DEBUGï¼šè¯¦ç»†çš„ä¿¡æ¯,é€šå¸¸åªå‡ºç°åœ¨è¯Šæ–­é—®é¢˜ä¸Š INFOï¼šç¡®è®¤ä¸€åˆ‡æŒ‰é¢„æœŸè¿è¡Œ WARNINGï¼šä¸€ä¸ªè¿¹è±¡è¡¨æ˜,ä¸€äº›æ„æƒ³ä¸åˆ°çš„äº‹æƒ…å‘ç”Ÿäº†,æˆ–è¡¨æ˜ä¸€äº›é—®é¢˜åœ¨ä¸ä¹…çš„å°†æ¥(ä¾‹å¦‚ã€‚ç£ç›˜ç©ºé—´ä½â€)ã€‚è¿™ä¸ªè½¯ä»¶è¿˜èƒ½æŒ‰é¢„æœŸå·¥ä½œã€‚ ERRORï¼šæ›´ä¸¥é‡çš„é—®é¢˜,è½¯ä»¶æ²¡èƒ½æ‰§è¡Œä¸€äº›åŠŸèƒ½ CRITICALï¼šä¸€ä¸ªä¸¥é‡çš„é”™è¯¯,è¿™è¡¨æ˜ç¨‹åºæœ¬èº«å¯èƒ½æ— æ³•ç»§ç»­è¿è¡Œ è¿™5ä¸ªç­‰çº§ï¼Œä¹Ÿåˆ†åˆ«å¯¹åº”5ç§æ‰“æ—¥å¿—çš„æ–¹æ³•ï¼š debug ã€info ã€warning ã€errorã€criticalã€‚é»˜è®¤çš„æ˜¯WARNINGï¼Œå½“åœ¨WARNINGæˆ–ä¹‹ä¸Šæ—¶æ‰è¢«è·Ÿè¸ªã€‚  äºŒã€æ—¥å¿—è¾“å‡ºï¼šå¯ä»¥è¾“å‡ºåœ¨æ§åˆ¶å°å’Œæ–‡ä»¶ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯è¾“å‡ºåœ¨æ–‡ä»¶ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  StreamHandlerï¼šlogging.StreamHandlerï¼›æ—¥å¿—è¾“å‡ºåˆ°æµï¼Œå¯ä»¥æ˜¯sys.stderrï¼Œsys.stdoutæˆ–è€…æ–‡ä»¶ FileHandlerï¼šlogging.FileHandlerï¼›æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶ BaseRotatingHandlerï¼šlogging.handlers.BaseRotatingHandlerï¼›åŸºæœ¬çš„æ—¥å¿—å›æ»šæ–¹å¼ RotatingHandlerï¼šlogging.handlers.RotatingHandlerï¼›æ—¥å¿—å›æ»šæ–¹å¼ï¼Œæ”¯æŒæ—¥å¿—æ–‡ä»¶æœ€å¤§æ•°é‡å’Œæ—¥å¿—æ–‡ä»¶å›æ»š æ—¥å¿—å›æ»šçš„æ„æ€ä¸ºï¼šæ¯”å¦‚æ—¥å¿—æ–‡ä»¶æ˜¯chat.logï¼Œå½“chat.logè¾¾åˆ°æŒ‡å®šçš„å¤§å°ä¹‹åï¼ŒRotatingFileHandlerè‡ªåŠ¨æŠŠæ–‡ä»¶æ”¹åä¸ºchat.log.1ã€‚ä¸è¿‡ï¼Œå¦‚æœchat.log.1å·²ç»å­˜åœ¨ï¼Œä¼šå…ˆæŠŠchat.log.1é‡å‘½åä¸ºchat.log.2ã€‚æœ€åé‡æ–°åˆ›å»º chat.logï¼Œç»§ç»­è¾“å‡ºæ—¥å¿—ä¿¡æ¯ã€‚ã€è¿™æ ·ä¿è¯äº†chat.logé‡Œé¢æ˜¯æœ€æ–°çš„æ—¥å¿—ã€‘ TimeRotatingHandlerï¼šlogging.handlers.TimeRotatingHandlerï¼›æ—¥å¿—å›æ»šæ–¹å¼ï¼Œåœ¨ä¸€å®šæ—¶é—´åŒºåŸŸå†…å›æ»šæ—¥å¿—æ–‡ä»¶ SocketHandlerï¼šlogging.handlers.SocketHandlerï¼›è¿œç¨‹è¾“å‡ºæ—¥å¿—åˆ°TCP/IP sockets DatagramHandlerï¼šlogging.handlers.DatagramHandlerï¼›è¿œç¨‹è¾“å‡ºæ—¥å¿—åˆ°UDP sockets SMTPHandlerï¼šlogging.handlers.SMTPHandlerï¼›è¿œç¨‹è¾“å‡ºæ—¥å¿—åˆ°é‚®ä»¶åœ°å€ SysLogHandlerï¼šlogging.handlers.SysLogHandlerï¼›æ—¥å¿—è¾“å‡ºåˆ°syslog NTEventLogHandlerï¼šlogging.handlers.NTEventLogHandlerï¼›è¿œç¨‹è¾“å‡ºæ—¥å¿—åˆ°Windows NT/2000/XPçš„äº‹ä»¶æ—¥å¿— MemoryHandlerï¼šlogging.handlers.MemoryHandlerï¼›æ—¥å¿—è¾“å‡ºåˆ°å†…å­˜ä¸­çš„æŒ‡å®šbuffer HTTPHandlerï¼šlogging.handlers.HTTPHandlerï¼›é€šè¿‡â€GETâ€æˆ–è€…â€POSTâ€è¿œç¨‹è¾“å‡ºåˆ°HTTPæœåŠ¡å™¨   ä¸‰ã€æ—¥å¿—æ ¼å¼è¯´æ˜ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  logging.basicConfigå‡½æ•°ä¸­ï¼Œå¯ä»¥æŒ‡å®šæ—¥å¿—çš„è¾“å‡ºæ ¼å¼formatï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥è¾“å‡ºå¾ˆå¤šæœ‰ç”¨çš„ä¿¡æ¯ logging.basicConfigå‡½æ•°å„å‚æ•°: filename: æŒ‡å®šæ—¥å¿—æ–‡ä»¶å filemode: å’Œfileå‡½æ•°æ„ä¹‰ç›¸åŒï¼ŒæŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„æ‰“å¼€æ¨¡å¼ï¼Œ\u0026#39;w\u0026#39;æˆ–\u0026#39;a\u0026#39; format: æŒ‡å®šè¾“å‡ºçš„æ ¼å¼å’Œå†…å®¹ï¼Œformatå¯ä»¥è¾“å‡ºå¾ˆå¤šæœ‰ç”¨ä¿¡æ¯ï¼Œå¦‚ä¸Šä¾‹æ‰€ç¤º: %(levelno)s: æ‰“å°æ—¥å¿—çº§åˆ«çš„æ•°å€¼ %(levelname)s: æ‰“å°æ—¥å¿—çº§åˆ«åç§° %(pathname)s: æ‰“å°å½“å‰æ‰§è¡Œç¨‹åºçš„è·¯å¾„ï¼Œå…¶å®å°±æ˜¯sys.argv[0] %(filename)s: æ‰“å°å½“å‰æ‰§è¡Œç¨‹åºå %(funcName)s: æ‰“å°æ—¥å¿—çš„å½“å‰å‡½æ•° %(lineno)d: æ‰“å°æ—¥å¿—çš„å½“å‰è¡Œå· %(asctime)s: æ‰“å°æ—¥å¿—çš„æ—¶é—´ %(thread)d: æ‰“å°çº¿ç¨‹ID %(threadName)s: æ‰“å°çº¿ç¨‹åç§° %(process)d: æ‰“å°è¿›ç¨‹ID %(message)s: æ‰“å°æ—¥å¿—ä¿¡æ¯ datefmt: æŒ‡å®šæ—¶é—´æ ¼å¼ï¼ŒåŒtime.strftime() level: è®¾ç½®æ—¥å¿—çº§åˆ«ï¼Œé»˜è®¤ä¸ºlogging.WARNING stream: æŒ‡å®šå°†æ—¥å¿—çš„è¾“å‡ºæµï¼Œå¯ä»¥æŒ‡å®šè¾“å‡ºåˆ°sys.stderr,sys.stdoutæˆ–è€…æ–‡ä»¶ï¼Œé»˜è®¤è¾“å‡ºåˆ°sys.stderrï¼Œå½“streamå’ŒfilenameåŒæ—¶æŒ‡å®šæ—¶ï¼Œstreamè¢«å¿½ç•¥ loggingæ‰“å°ä¿¡æ¯å‡½æ•°ï¼š logging.debug(\u0026#39;This is debug message\u0026#39;) logging.info(\u0026#39;This is info message\u0026#39;) logging.warning(\u0026#39;This is warning message\u0026#39;)   åˆå§‹åŒ–æ—¥å¿—å¯¹è±¡ 1 2 3 4 5 6 7 8 9 10 11 12 13  logging.basicConfig( # æ—¥å¿—çº§åˆ« level = logging.INFO, # æ—¥å¿—æ ¼å¼ # æ—¶é—´ã€ä»£ç æ‰€åœ¨æ–‡ä»¶åã€ä»£ç è¡Œå·ã€æ—¥å¿—çº§åˆ«åå­—ã€æ—¥å¿—ä¿¡æ¯ format = \u0026#39;%(asctime)s%(filename)s[line:%(lineno)d] %(levelname)s%(message)s\u0026#39;, # æ‰“å°æ—¥å¿—çš„æ—¶é—´ datefmt = \u0026#39;%a, %d%b %Y %H:%M:%S\u0026#39;, # æ—¥å¿—æ–‡ä»¶å­˜æ”¾çš„ç›®å½•ï¼ˆç›®å½•å¿…é¡»å­˜åœ¨ï¼‰åŠæ—¥å¿—æ–‡ä»¶å filename = \u0026#39;d:/report.log\u0026#39;, # æ‰“å¼€æ—¥å¿—æ–‡ä»¶çš„æ–¹å¼ filemode = \u0026#39;w\u0026#39; )   ","date":"2019-12-05T15:40:17+08:00","permalink":"https://sunnnner.github.io/p/log-basicconfig%E5%87%BD%E6%95%B0/","title":"Log BasicConfigå‡½æ•°"},{"content":" python divmod()æŠŠé™¤æ•°å’Œä½™æ•°è¿ç®—ç»“æœç»“åˆèµ·æ¥ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å•†å’Œä½™æ•°çš„å…ƒç»„(a // b, a % b)ã€‚  1 2 3 4  \u0026gt;\u0026gt;\u0026gt; divmod(3600, 60) (60, 0) \u0026gt;\u0026gt;\u0026gt; divmod(3500, 60) (58, 20)   ","date":"2019-12-01T15:39:29+08:00","permalink":"https://sunnnner.github.io/p/divmod%E5%87%BD%E6%95%B0/","title":"Divmodå‡½æ•°"},{"content":"curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube_1.5.2.deb \\ \u0026amp;\u0026amp; sudo dpkg -i minikube_1.5.2.deb\nç³»ç»Ÿç®¡ç†ç¨‹åºè®¾ç½®éªŒè¯ç³»ç»Ÿæ˜¯å¦å¯ç”¨è™šæ‹ŸåŒ– egrep -q \u0026lsquo;vmx|svm\u0026rsquo; /proc/cpuinfo \u0026amp;\u0026amp; echo yes || echo no å¦‚æœå¯ç”¨åˆ™éœ€è¦å…³é—­è™šæ‹ŸåŒ–\nminikube servionæŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯\nminikube startå¯åŠ¨\næŸ¥çœ‹é›†ç¾¤ä¿¡æ¯kubectl cluster-info\n","date":"2019-11-11T15:38:29+08:00","permalink":"https://sunnnner.github.io/p/%E4%BD%BF%E7%94%A8minikube%E5%88%9B%E5%BB%BA%E9%9B%86%E7%BE%A4/","title":"ä½¿ç”¨minikubeåˆ›å»ºé›†ç¾¤"},{"content":"å®‰è£…postgres sudo apt install postgresql postgresql-contrib\nå®‰è£…å®Œæˆåï¼ŒPostgreSQLæœåŠ¡å°†è‡ªåŠ¨å¯åŠ¨ã€‚ è¦éªŒè¯å®‰è£…ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨psqlå®ç”¨ç¨‹åºè¿æ¥åˆ°PostgreSQLæ•°æ®åº“æœåŠ¡å™¨å¹¶æ‰“å°æœåŠ¡å™¨ç‰ˆæœ¬ï¼šsudo -u postgres psql -c \u0026ldquo;SELECT version();\u0026rdquo;\nå®‰è£…å®Œæ¯•åï¼Œç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¶…çº§ç”¨æˆ· postgresï¼Œå¯†ç ä¸ºç©ºã€‚\nåˆ‡æ¢åˆ°postgresç”¨æˆ·sudo -i -u postgres\næ‰§è¡Œpsqlè¿›å…¥postgres shell æ‰§è¡Œ\\password postgresä¿®æ”¹é»˜è®¤å¯†ç \nä¿®æ”¹/etc/postgresql/9.6/mainä¸‹ postgresql.confé‡Œé¢listen addressä¸º*\nä¿®æ”¹pg_hba.conf all åœ°å€ä¸º0.0.0.0/0\né‡å¯sudo /etc/init.d/postgresql restart\n","date":"2019-11-04T15:37:26+08:00","permalink":"https://sunnnner.github.io/p/install-postgresql/","title":"Install Postgresql"},{"content":"åšä¸»ä½¿ç”¨çš„cloudflareçš„cdnä¹‹å‰æŸ¥äº†å¾ˆä¹…ä¸æ¸…æ¥šæ€ä¹ˆä½¿ç”¨github-pageçš„httpsï¼Œ å› githubä¸Letâ€™s Encrypt åˆä½œæä¾›è‡ªå¸¦cdnæ‰€ä»¥æˆ‘ä»¬æ¥é…ç½®ä¸€ä¸‹ï¼Œ é¦–å…ˆå…³é—­è‡ªå®šä¹‰åŸŸåçš„cdnæœåŠ¡å…¶å®å°±æ˜¯å…³äº†ä»–çš„åŸŸåè§£æ\né¦–å…ˆæˆ‘ä»¬çœ‹åŸŸåè¿˜æ˜¯activeçŠ¶æ€\nå…¶æ¬¡æˆ‘ä»¬å…³é—­cloudflareç«™ç‚¹cdn\næŸ¥çœ‹ç«™ç‚¹çŠ¶æ€\næ·»åŠ å¯¹github-Pageçš„è§£æè®°å½•\nå¦‚æœgithub-Pageä½ çš„Custom domainä¸Šå·²ç»å¡«å†™äº†è‡ªå®šä¹‰åŸŸåï¼Œåˆ é™¤æ‰åŸŸåä¿å­˜ä¸€ä¸‹ï¼Œéšåå†æ¬¡è¾“å…¥ä¸€æ¬¡ä¿å­˜ä½ ä¼šçœ‹åˆ°ä½ çš„httpså·²ç»å¼€å¯äº†\n","date":"2019-11-03T15:36:46+08:00","permalink":"https://sunnnner.github.io/p/github-page%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D%E5%BC%80%E5%90%AFhttps/","title":"Github Pageè‡ªå®šä¹‰åŸŸåå¼€å¯https"},{"content":"k8sè·å–æ‰€æœ‰è¿è¡Œçš„podskubectl get pods \u0026ndash;all-namespaces -o wide\nè·å–å½“å‰é›†ç¾¤åç§°kubectl get pods -o wide\nå½“å‰etcdä¸­çš„æ³¨å†Œçš„å®¿ä¸»æœºçš„podåœ°å€ç½‘æ®µä¿¡æ¯etcdctl ls /kube-centos/network/subnets\nè€Œæ¯ä¸ªnodeä¸Šçš„Podå­ç½‘æ˜¯æ ¹æ®æˆ‘ä»¬åœ¨å®‰è£…flannelæ—¶é…ç½®æ¥åˆ’åˆ†çš„ï¼Œåœ¨etcdä¸­æŸ¥çœ‹è¯¥é…ç½®etcdctl get /kube-centos/network/config\n","date":"2019-11-02T15:36:16+08:00","permalink":"https://sunnnner.github.io/p/k8s%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/","title":"K8såŸºç¡€æ“ä½œ"},{"content":" é¦–å…ˆä½¿ç”¨rootæƒé™è´¦æˆ·ç™»å½•ç³»ç»Ÿ é¦–å…ˆæŸ¥çœ‹ç”¨æˆ·ç»„ä¸­æœ‰æ²¡æœ‰dockerç»„sudo cat /etc/group | grep docker  åˆ›å»ºdockeråˆ†ç»„ï¼Œå¹¶å°†ç›¸åº”çš„ç”¨æˆ·æ·»åŠ åˆ°è¿™ä¸ªåˆ†ç»„é‡Œé¢\nsudo groupadd -g 999 docker\n-g 999ä¸ºç»„ID ä¹Ÿå¯ä»¥ä¸æŒ‡å®š\nsudo usermod -aG dockerroot username\nsudo usermod -aG docker username\næ£€æŸ¥ä¸€ä¸‹æ˜¯å¦æœ‰æ•ˆ cat /etc/group\nç”¨æˆ·é€€å‡ºç™»å½•æˆ–è€…é‡å¯docker-daemonä½¿æƒé™ç”Ÿæ•ˆ\nsudo systemctl restart docker\nè¿è¡Œdocker infoæŸ¥çœ‹æ˜¯å¦ç”Ÿæ•ˆ\nå¦‚æœæç¤ºgetæƒé™ä¸è¶³ï¼Œä¿®æ”¹/var/run/docker.sockæƒé™å³å¯\nsudo chmod a+rw /var/run/docker.sock\n","date":"2019-11-01T15:35:30+08:00","permalink":"https://sunnnner.github.io/p/docker%E6%B7%BB%E5%8A%A0root%E6%9D%83%E9%99%90%E7%9C%81%E5%8E%BBsudo/","title":"Dockeræ·»åŠ rootæƒé™çœå»sudo"},{"content":" duqueå‡½æ•°æœ‰ä¸€ä¸ªmaxlenå‚æ•°ï¼Œå½“appendçš„æ—¶å€™ï¼Œå¦‚æœè¶…è¿‡ï¼Œé‚£ä¹ˆæœ€å‰é¢çš„å°±ä¼šè¢«æŒ¤å‡ºé˜Ÿåˆ—  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  from collections import duque def search(lines, pattern, lens=5): previous_lines = deque(maxlen=lens) for li in lines: if pattern in li: yield li, previous_lines previous_lines.append(li) if name == â€˜mainâ€˜: with open(râ€™./xx.txtâ€™) as f: for line, prevlines in search(f, â€˜pythonâ€™, 5): for pline in prevlines: print(pline, end=â€™â€™) print(line, end=â€™â€™) print(â€˜**â€™ * 20)   ","date":"2019-10-15T15:33:37+08:00","permalink":"https://sunnnner.github.io/p/python-collections-duque%E5%87%BD%E6%95%B0%E6%BC%94%E7%A4%BA/","title":"Python Collections Duqueå‡½æ•°æ¼”ç¤º"},{"content":"##æè¿°\ngetattr() å‡½æ•°ç”¨äºè¿”å›ä¸€ä¸ªå¯¹è±¡å±æ€§å€¼ã€‚\nè¯­æ³• getattr è¯­æ³•ï¼š\ngetattr(object, name, [default])\nå‚æ•° object â€“ å¯¹è±¡ã€‚ name â€“ å­—ç¬¦ä¸²ï¼Œå¯¹è±¡å±æ€§ã€‚ default â€“ é»˜è®¤è¿”å›å€¼ï¼Œå¦‚æœä¸æä¾›è¯¥å‚æ•°ï¼Œåœ¨æ²¡æœ‰å¯¹åº”å±æ€§æ—¶ï¼Œå°†è§¦å‘ AttributeErrorã€‚\nè¿”å›å€¼ è¿”å›å¯¹è±¡å±æ€§å€¼ã€‚  ","date":"2019-10-14T15:31:31+08:00","permalink":"https://sunnnner.github.io/p/getattr%E5%87%BD%E6%95%B0/","title":"Getattrå‡½æ•°"},{"content":"æè¿° hasattr() å‡½æ•°ç”¨äºåˆ¤æ–­å¯¹è±¡æ˜¯å¦åŒ…å«å¯¹åº”çš„å±æ€§ã€‚\nè¯­æ³• hasattr è¯­æ³•ï¼š\nhasattr(object, name)\nå‚æ•° object â€“ å¯¹è±¡ã€‚\nname â€“ å­—ç¬¦ä¸²ï¼Œå±æ€§åã€‚\nè¿”å›å€¼ å¦‚æœå¯¹è±¡æœ‰è¯¥å±æ€§è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚  ","date":"2019-10-13T15:30:12+08:00","permalink":"https://sunnnner.github.io/p/hasattr%E5%87%BD%E6%95%B0/","title":"Hasattrå‡½æ•°"},{"content":"å…¨å±€ä»£ç†ï¼Œå†™å…¥é…ç½® git config --global http.proxy 'socks5://127.0.0.1:1080' git config --global https.proxy 'socks5://127.0.0.1:1080'  æ¸…é™¤é…ç½® git config --global --unset http.proxy git config --global --unset https.proxy  ä¸´æ—¶ä»£ç† ALL_PROXY=socks5://127.0.0.1:1080 git clone xxx ","date":"2019-10-12T15:29:07+08:00","permalink":"https://sunnnner.github.io/p/git%E5%8A%A0%E9%80%9F/","title":"GitåŠ é€Ÿ"},{"content":"ç±»å‹å’Œæ–¹æ³•æ•°æ®å‹ç¼©åˆ†ä¸ºä¸¤ç§ç±»å‹ã€‚\næœ‰æŸï¼šåœ¨è¿™ç§ç±»å‹çš„å‹ç¼©ä¸­ï¼Œå‹ç¼©æ—¶ä¼šé™ä½æ•°æ®è´¨é‡ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ä¸ºå›¾åƒå’Œè§†é¢‘ï¼‰ã€‚è¿™è¢«å¹¿æ³›ç”¨äºå‹ç¼©å¤šåª’ä½“ã€‚\næ— æŸï¼šåœ¨è¿™ç§ç±»å‹çš„å‹ç¼©ä¸­ï¼Œæ•°æ®è´¨é‡ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ä¸ºå›¾åƒï¼‰ä¸ä¼šä¸¢å¤±ã€‚å®ƒå¹¿æ³›ç”¨äºå‹ç¼©æ— æ³•æ‰¿å—æ•°æ®ä¸¢å¤±çš„æ•æ„Ÿæ•°æ®ã€‚\nå®‰è£…ä¸é…ç½®\nå®‰è£…pythonå›¾åƒå¤„ç†åº“ Pillow\n`pip install Pillow``\næˆ‘ä»¬å°†å»ºç«‹ä¸€ä¸ªç®€å•çš„é¡¹ç›®æ¥æ¼”ç¤ºå›¾åƒä¸Šä¼ ä»¥åŠä¸Šä¼ ä¹‹å‰å’Œä¹‹åçš„æ–‡ä»¶å¤§å°ã€‚æ‚¨ä¹Ÿå¯ä»¥å‚è€ƒDjango-docsæˆ–åœ¨æ­¤å¤„ä¸‹è½½å®Œæ•´çš„æºä»£ç ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  models.py from pil import Image from io import BytesIO from django.core.files.uploadedfile import InMemoryUploadedFile class File(models.Model): user = models.ForeignKey(KwsUser, verbose_name=\u0026#39;æ‰€å±ç”¨æˆ·\u0026#39;, help_text=\u0026#39;æ‰€å±ç”¨æˆ·\u0026#39;) file = models.FileField(upload_to=get_file_path, help_text=\u0026#39;ä¸Šä¼ çš„æ–‡ä»¶\u0026#39;) big_file = models.FileField(upload_to=get_pro_file_path, help_text=\u0026#39;ä¸Šä¼ çš„åŸå›¾\u0026#39;, null=True, blank=True) upload_time = models.DateTimeField(auto_now_add=True, verbose_name=\u0026#39;ä¸Šä¼ æ—¶é—´\u0026#39;, null=True, blank=True) name = models.CharField(max_length=100, verbose_name=\u0026#39;æ–‡ä»¶å\u0026#39;, help_text=\u0026#39;æ–‡ä»¶å\u0026#39;) type = models.CharField(max_length=20, choices=FILETYPE, verbose_name=\u0026#39;æ–‡ä»¶ç±»å‹\u0026#39;) uid = models.AutoField(primary_key=True) # å‰ç«¯æ•°æ®ã€‚ã€‚ã€‚ã€‚ minio_url = models.TextField(verbose_name=\u0026#39;æ–‡ä»¶é“¾æ¥\u0026#39;, blank=True) big_file_minio_url = models.TextField(verbose_name=\u0026#39;å¤§å›¾æ–‡ä»¶é“¾æ¥\u0026#39;, blank=True) def saveï¼ˆselfï¼Œ* argsï¼Œ** kwargsï¼‰ï¼š if not self.uid self.file = self.compressImageï¼ˆ self.file superï¼ˆFileï¼Œselfï¼‰.saveï¼ˆ* argsï¼Œ** kwargsï¼‰ def compressImageï¼ˆselfï¼Œfileï¼‰ï¼š imageTemproary = Image.openï¼ˆfileï¼‰ outputIoStream = BytesIOï¼ˆï¼‰ imageTemproaryResized = imageTemproary.resizeï¼ˆï¼ˆ1020,573ï¼‰ï¼‰ imageTemproary.saveï¼ˆoutputIoStreamï¼Œformat =\u0026#39;JPEG\u0026#39;ï¼Œquality = 60ï¼‰ outputIoStream.seekï¼ˆ0ï¼‰ UploadedImage = InMemoryUploadedFileï¼ˆoutputIoStreamï¼Œ\u0026#39;ImageField\u0026#39;ï¼Œâ€œï¼…s.jpgâ€ ï¼…file.name.splitï¼ˆ\u0026#39;.\u0026#39;ï¼‰[0]ï¼Œ\u0026#39;image / jpeg\u0026#39;ï¼Œsys.getsizeofï¼ˆoutputIoStreamï¼‰ï¼ŒNoneï¼‰ return uploadImage   åœ¨ä¸Šé¢çš„models.pyæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å£°æ˜åç§°çš„å®ç”¨ç¨‹åºæ–¹æ³•compressImageå¹¶å°†å…¶uploadedImageä½œä¸ºå‚æ•°ä¼ é€’ã€‚saveåˆ›å»ºUploadå¯¹è±¡æ—¶åœ¨æ¨¡å—ä¸­è°ƒç”¨æ­¤æ–¹æ³•ã€‚\næˆ‘ä»¬ä½¿ç”¨pythonå›¾åƒå¤„ç†åº“Pillowï¼ˆPILï¼‰æ¥å¤„ç†å›¾åƒå¤„ç†ã€‚æˆ‘ä»¬æ‰“å¼€ä¸Šè½½çš„å›¾åƒå¹¶å°†å…¶å­˜å‚¨åœ¨ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ä¸­ï¼ŒimageTemproaryå¹¶åˆå§‹åŒ–BytesIOæµä»¥å¤„ç†å°†æ›´æ”¹å†™å…¥å›¾åƒçš„è¿‡ç¨‹ã€‚æˆ‘ä»¬ä½¿ç”¨æ­¤resize()æ–¹æ³•å°†ä¸Šä¼ çš„å›¾åƒè°ƒæ•´ä¸ºç‰¹å®šå¤§å°ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹å°äºåŸå§‹å¤§å°ï¼‰ï¼Œå¹¶ä½¿ç”¨seek() methodå°†è¾“å‡ºæµæŒ‡é’ˆæµé‡ç½®ä¸ºåˆå§‹ä½ç½®ã€‚æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ä½¿ç”¨Djangoçš„InMemoryUploadedFileï¼Œä»¥è¦†ç›–ç°æœ‰çš„æœªå‹ç¼©çš„å›¾åƒã€‚ æ‚¨å¯ä»¥ç»§ç»­è‡ªå®šä¹‰æ–¹æ³•ï¼Œä»¥æ ¹æ®éœ€è¦æ›´æ”¹å›¾åƒç±»å‹ï¼Œå°ºå¯¸å’Œè´¨é‡çº§åˆ«ã€‚\n","date":"2019-10-11T15:28:02+08:00","permalink":"https://sunnnner.github.io/p/django%E6%96%87%E4%BB%B6%E5%8E%8B%E7%BC%A9/","title":"Djangoæ–‡ä»¶å‹ç¼©"},{"content":"Django staticfile çš„é…ç½® èµ·åˆä»¥ä¸ºæ˜¯æˆ‘dockerfileå†™é”™äº†çš„é—®é¢˜ï¼Œçš„ç¡®ä¸æ˜¯dockerfileçš„é—®é¢˜æ˜¯æˆ‘æ²¡æœ‰ç†è§£static_urlä¸static_rootçš„å«ä¹‰\nğŸ‘ å¦‚æœä¸æ˜¯å‰åç«¯åˆ†ç¦»é¡¹ç›®åœ¨æ¯ä¸ªAPPä¸‹éƒ½åº”è¯¥æœ‰staticä¸templatesæ–‡ä»¶å¤¹å­˜åœ¨ä¸ç„¶djangoæ”¶é›†é™æ€æ–‡ä»¶æ”¶é›†ä¸åˆ°\nSTATIC_URLä¸ºDjangoè¿”å›ç»™å‰ç«¯çš„è·¯å¾„å³é¡¹ç›®å†…éƒ¨çš„staticæ–‡ä»¶å¤¹\nSTATIC_ROOTä¸ºé™æ€æ–‡ä»¶æ”¶é›†çš„è·¯å¾„å³ python3 manage.py collectstatic çš„æ–‡ä»¶å¤¹\nSTATIC_ROOT = os.path.join(BASE_DIR, \u0026lsquo;static\u0026rsquo;) æ„æ€æ˜¯æŠŠæ–‡ä»¶æ”¶é›†åˆ°é¡¹ç›®ä¸‹staticæ–‡ä»¶å¤¹ä¸‹çš„staticæ–‡ä»¶å¤¹ä¸­\næ‰€ä»¥æ–¹ä¾¿èµ·è§æˆ‘æŠŠ STATIC_ROOT = os.path.join(BASE_DIR, \u0026lsquo;\u0026rsquo;)è®¾ç½®ä¸ºäº†æ”¶é›†åœ¨é¡¹ç›®ä¸‹staticæ–‡ä»¶å¤¹ä¸‹\nå¤§å‘ä¸å°‘å°å‘ä¸æ–­ï¼Œå­¦æ— æ­¢å¢ƒå•Š\n","date":"2019-10-10T15:27:14+08:00","permalink":"https://sunnnner.github.io/p/%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E7%9A%84%E5%90%AB%E4%B9%89%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE/","title":"é™æ€æ–‡ä»¶çš„å«ä¹‰ä»¥åŠé…ç½®"},{"content":"os .path.dirname(path) è·å–è·¯å¾„å\nos.path.basename(path) è·å–æ–‡ä»¶å\nos.path.join(path1[,path2[,â€¦.]]) å°†è·¯å¾„ä¸æ–‡ä»¶åæ‹¼æ¥æˆä¸€ä¸ªå®Œæ•´çš„è·¯å¾„\nos.path.split(path) åˆ†å‰²è·¯å¾„ä¸æ–‡ä»¶åï¼Œè¿”å›å…ƒç»„(f_path, f_name), å¦‚æœå®Œå…¨ä½¿ç”¨ç›®å½•ï¼Œå®ƒä¹Ÿä¼šå°†æœ€åä¸€ä¸ªç›®å½•ä½œä¸ºæ–‡ä»¶ååˆ†ç¦»ï¼Œä¸”ä¸ä¼šåˆ¤æ–­æ–‡ä»¶æˆ–è€…ç›®å½•æ˜¯å¦å­˜åœ¨\nos.path.splitext(path) åˆ†å‰²æ–‡ä»¶åä¸æ‰©å±•å\nos.path.getsize(file) æˆ–å¾—æ–‡ä»¶å¤§å°ï¼Œå•ä½æ˜¯å­—èŠ‚\nos.path.gettatime(file) æˆ–å¾—æ–‡ä»¶æœ€è¿‘çš„è®¿é—®æ—¶é—´ï¼Œè¿”å›çš„æ˜¯æµ®ç‚¹å‹ç§’æ•°\nos.path.getctime(file) æˆ–å¾—æ–‡ä»¶çš„åˆ›å»ºæ—¶é—´ï¼Œè¿”å›çš„æ˜¯æµ®ç‚¹å‹ç§’æ•°\nos.path.getmtime(file) æˆ–å¾—æ–‡ä»¶çš„ä¿®è´¹æ—¶é—´ï¼Œè¿”å›çš„æ˜¯æµ®ç‚¹å‹ç§’æ•°\nos.path.exists(path) åˆ¤æ–­è·¯å¾„æ˜¯å¦å­˜åœ¨\nos.path.isabs(path) åˆ¤æ–­æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„\nos.path.isdir(path) åˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªç›®å½•\nos.path.isfile(path)\nos.path.islink(path) åˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥\nos.path.ismount(path) åˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªæŒ‚è½½ç‚¹\nos.path.samefile(path1, path2) åˆ¤æ–­ä¸¤ä¸ªè·¯å¾„æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶\n","date":"2019-10-10T14:20:46+08:00","permalink":"https://sunnnner.github.io/p/os%E6%A8%A1%E5%9D%97/","title":"Osæ¨¡å—"},{"content":"","date":"2019-10-08T14:57:24+08:00","permalink":"https://sunnnner.github.io/p/k8s-install/","title":"K8s Install"},{"content":"docker build æ‰“åŒ…docker é¡¹ç›®\ndocker-compose up å¯åŠ¨æ•´ä½“é¡¹ç›®(docker-compose.ymlæ–‡ä»¶)\ndocker-compose down å¼ºåˆ¶åœæ­¢dockerè¿è¡Œçš„æ‰€æœ‰é¡¹ç›®\n1ã€åˆ é™¤æ‰€æœ‰å®¹å™¨ docker rm docker ps -a -q\n2ã€åˆ é™¤æ‰€æœ‰é•œåƒd ocker rmi docker images -q\n3ã€æŒ‰æ¡ä»¶åˆ é™¤é•œåƒ æ²¡æœ‰æ‰“æ ‡ç­¾docker rmi docker images -q | awk '/^\u0026lt;none\u0026gt;/ { print $3 }'\né•œåƒååŒ…å«å…³é”®å­—docker rmi \u0026ndash;force docker images | grep doss-api | awk '{print $3}' //å…¶ä¸­doss-apiä¸ºå…³é”®å­—\nã€€docker-compose.yml\nservice é¡¹ç›®\nimage dockeré•œåƒåå­—ï¼Œè‹¥æœ¬åœ°æ²¡æœ‰ä¼šå°è¯•åœ¨dockeræœåŠ¡å™¨æ‹‰å–\nrestart æ˜¯å¦stopåé‡å¯\ncommand å¯åŠ¨è·¯å¾„\nvolumes å°†dockerå®¹å™¨æ–‡ä»¶å¤¹ä¸æœ¬åœ°æ–‡ä»¶å¤¹æ˜ å°„æŒ‚è½½ [æœ¬åœ°:dockeræ–‡ä»¶å¤¹]\nenvironment è¿è¡Œæºå¸¦çš„å‚æ•°\nportsè¿è¡Œç«¯å£\nlinks å…³è”é¡¹ç›®ï¼Œå…³è”ä¹‹åå†…éƒ¨è®¿é—®\n","date":"2019-10-08T14:19:00+08:00","permalink":"https://sunnnner.github.io/p/docker%E6%93%8D%E4%BD%9C/","title":"Dockeræ“ä½œ"},{"content":" ä½¿ç”¨Django-minio-storageè¿›è¡Œå¼€å‘minioçš„é™æ€æ–‡ä»¶å­˜å‚¨åŠŸèƒ½ï¼Œæœ¬æ¥å¯»æ€ç”¨minioç›´æ¥è¿›è¡Œå¼€å‘ï¼Œæ—¢ç„¶djangoæœ‰è¿™ä¸ªåŒ…æˆ‘ä»¬å°±æ‹¿æ¥ç”¨ä¸€ä¸‹\n  é¡¹ç›®è¯´æ˜django-minio-storage  å¼€å‘æœŸé—´é‡åˆ°çš„é—®é¢˜   åƒä¸‡ä¸è¦å¿˜äº†æŠŠminio-storageæ·»åŠ åˆ°app\n Add minio_storage to INSTALLED_APPS in your project settings. The last step is setting DEFAULT_FILE_STORAGE to \u0026quot;minio_storage.storage.MinioMediaStorage\u0026quot;, and STATICFILES_STORAGE to \u0026quot;minio_storage.storage.MinioStaticStorage\u0026quot;.    æ¥ä¸‹æ¥çš„é…ç½®çœ‹å®˜ç½‘é…ç½®å°±è¡Œäº†\nå› ä¸ºæˆ‘ç”¨dockerå†™çš„æ‰€ä»¥minio_storage_endpointå¯ä»¥ä½¿ç”¨dockeré¡¹ç›®åç§°:ç«¯å£å·æˆ–è€…å¤–ç½‘åŸŸåï¼ˆstatic.media.comï¼‰æˆ–è€…å¤–ç½‘IP:ç«¯å£å·\næµè§ˆå™¨å¤ç”¨minioé™æ€æœåŠ¡å™¨çš„mediaæºå¸¦ç«¯å£å·æ€ä¹ˆåŠï¼Ÿ\nè§£å†³åŠæ³• nginx è´Ÿè½½å‡è¡¡ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  upstream docker { server docker:9000; } server { listen 80; server_name static.media.com location / { proxy_set_header Host $host; proxy_pass http://docker; client_max_body_size 10m; } }   ","date":"2019-10-06T14:17:12+08:00","permalink":"https://sunnnner.github.io/p/django-minio%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B/","title":"Django Minioå¼€å‘è¿‡ç¨‹"},{"content":"ç¯å¢ƒ  python3.6 ä¸‰æ–¹åº“â€”pyCryptodome  ä»‹ç» ä¹‹å‰çš„AESåŠ å¯†ä¸­ï¼ŒPy2æˆ–è€…3.4éƒ½æ˜¯é‡‡ç”¨çš„pyCryptoè¿™ä¸ªæ¨¡å—ä½†æ˜¯å®ƒå·²ç»åœæ­¢ç»´æŠ¤ï¼Œç°åœ¨å¤šäº†ä¸€ä¸ªåˆ†æ”¯pyCryptodomeè¿™ä¸ªæ¨¡å— å¦‚æœæœ‰åˆ«çš„æ¨¡å—ä¸èƒ½å®‰è£…å¯ä»¥å»è¿™ä¸ªç½‘ç«™ä¸‹è½½å®‰è£…ç‚¹æˆ‘\nè¿›å»ä¹‹åéƒ½ä¼šæœ‰å®‰è£…æ•™ç¨‹\nç¼–å†™ä»£ç æ”¯ä»˜å®æ¥å£ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159  # -*- coding: utf-8 -*- # pip install pycryptodome(è¿™ä¸ªä¸€å®šè¦æœ‰) #pip install winrandom from datetime import datetime from Crypto.PublicKey import RSA from Crypto.Signature import PKCS1_v1_5 from Crypto.Hash import SHA256 from base64 import b64encode, b64decode from urllib.parse import quote_plus from urllib.parse import urlparse, parse_qs from urllib.request import urlopen from base64 import decodebytes, encodebytes import json class AliPay(object): \u0026#34;\u0026#34;\u0026#34; æ”¯ä»˜å®æ”¯ä»˜æ¥å£ \u0026#34;\u0026#34;\u0026#34; def __init__(self, appid, app_notify_url, app_private_key_path, alipay_public_key_path, return_url, debug=False): self.appid = appid self.app_notify_url = app_notify_url self.app_private_key_path = app_private_key_path self.app_private_key = None self.return_url = return_url with open(self.app_private_key_path) as fp: self.app_private_key = RSA.importKey(fp.read()) self.alipay_public_key_path = alipay_public_key_path with open(self.alipay_public_key_path) as fp: self.alipay_public_key = RSA.importKey(fp.read()) if debug is True: self.__gateway = \u0026#34;https://openapi.alipaydev.com/gateway.do\u0026#34; else: self.__gateway = \u0026#34;https://openapi.alipay.com/gateway.do\u0026#34; def direct_pay(self, subject, out_trade_no, total_amount, return_url=None, **kwargs): biz_content = { \u0026#34;subject\u0026#34;: subject, \u0026#34;out_trade_no\u0026#34;: out_trade_no, \u0026#34;total_amount\u0026#34;: total_amount, \u0026#34;product_code\u0026#34;: \u0026#34;FAST_INSTANT_TRADE_PAY\u0026#34;, # \u0026#34;qr_pay_mode\u0026#34;:4 } biz_content.update(kwargs) data = self.build_body(\u0026#34;alipay.trade.page.pay\u0026#34;, biz_content, self.return_url) return self.sign_data(data) def build_body(self, method, biz_content, return_url=None): data = { \u0026#34;app_id\u0026#34;: self.appid, \u0026#34;method\u0026#34;: method, \u0026#34;charset\u0026#34;: \u0026#34;utf-8\u0026#34;, \u0026#34;sign_type\u0026#34;: \u0026#34;RSA2\u0026#34;, \u0026#34;timestamp\u0026#34;: datetime.now().strftime(\u0026#34;%Y-%m-%d%H:%M:%S\u0026#34;), \u0026#34;version\u0026#34;: \u0026#34;1.0\u0026#34;, \u0026#34;biz_content\u0026#34;: biz_content } if return_url is not None: data[\u0026#34;notify_url\u0026#34;] = self.app_notify_url data[\u0026#34;return_url\u0026#34;] = self.return_url return data def sign_data(self, data): data.pop(\u0026#34;sign\u0026#34;, None) # æ’åºåçš„å­—ç¬¦ä¸² unsigned_items = self.ordered_data(data) #æ‹¼æ¥å­—ç¬¦ä¸² unsigned_string = \u0026#34;\u0026amp;\u0026#34;.join(\u0026#34;{0}={1}\u0026#34;.format(k, v) for k, v in unsigned_items) #ç­¾å sign = self.sign(unsigned_string.encode(\u0026#34;utf-8\u0026#34;)) #æ’åº # ordered_items = self.ordered_data(data) quoted_string = \u0026#34;\u0026amp;\u0026#34;.join(\u0026#34;{0}={1}\u0026#34;.format(k, quote_plus(v)) for k, v in unsigned_items) # è·å¾—æœ€ç»ˆçš„è®¢å•ä¿¡æ¯å­—ç¬¦ä¸² signed_string = quoted_string + \u0026#34;\u0026amp;sign=\u0026#34; + quote_plus(sign) return signed_string def ordered_data(self, data): complex_keys = [] for key, value in data.items(): if isinstance(value, dict): complex_keys.append(key) # å°†å­—å…¸ç±»å‹çš„æ•°æ®dumpå‡ºæ¥ for key in complex_keys: data[key] = json.dumps(data[key], separators=(\u0026#39;,\u0026#39;, \u0026#39;:\u0026#39;)) return sorted([(k, v) for k, v in data.items()]) def sign(self, unsigned_string): # å¼€å§‹è®¡ç®—ç­¾å key = self.app_private_key signer = PKCS1_v1_5.new(key) signature = signer.sign(SHA256.new(unsigned_string)) # base64 ç¼–ç ï¼Œè½¬æ¢ä¸ºunicodeè¡¨ç¤ºå¹¶ç§»é™¤å›è½¦ sign = encodebytes(signature).decode(\u0026#34;utf8\u0026#34;).replace(\u0026#34;\\n\u0026#34;, \u0026#34;\u0026#34;) return sign def _verify(self, raw_content, signature): # å¼€å§‹è®¡ç®—ç­¾å key = self.alipay_public_key signer = PKCS1_v1_5.new(key) digest = SHA256.new() digest.update(raw_content.encode(\u0026#34;utf8\u0026#34;)) if signer.verify(digest, decodebytes(signature.encode(\u0026#34;utf8\u0026#34;))): return True return False def verify(self, data, signature): if \u0026#34;sign_type\u0026#34; in data: sign_type = data.pop(\u0026#34;sign_type\u0026#34;) # æ’åºåçš„å­—ç¬¦ä¸² unsigned_items = self.ordered_data(data) message = \u0026#34;\u0026amp;\u0026#34;.join(u\u0026#34;{}={}\u0026#34;.format(k, v) for k, v in unsigned_items) return self._verify(message, signature) if __name__ == \u0026#34;__main__\u0026#34;: return_url = \u0026#39;http://47.94.224.53:8000/?charset=utf-8\u0026amp;out_trade_no=20180614122222\u0026amp;method=alipay.trade.page.pay.return\u0026amp;total_amount=100.01\u0026amp;sign=m1u20Z%2FYTU0uipXfDYktEINrkaAmv5dh1RHYyeb6wDZzBB%2FHLt9x87W91sqsN8%2BO6%2BuxwZLEAOC5olHJDBplYHLhR5s60UXFyvvagmfNAdQYOIV7Rk3yYWkz2P7bejB7n9tOQ9Kj8%2FxMf9me5YZts1gZlLcedetHDSuDzHDTPB9Lhc1qhnF7655hYf1P9qA%2B6l%2BVFIwihmPxDsb9n7vuw34dtHFHTUuK%2FGn3sqjKwAtN5igfOJibyTYeVMjASTMSDir0HC9xVWMgyzE3BJidNnWhSvoMUah%2FDVToJZCPcydpgmd0zZ7iZMelxE4cQ7KJRidgDa4%2FAsUU0ZJrY3%2FRnw%3D%3D\u0026amp;trade_no=2018061421001004760200615074\u0026amp;auth_app_id=2016091300503105\u0026amp;version=1.0\u0026amp;app_id=2016091300503105\u0026amp;sign_type=RSA2\u0026amp;seller_id=2088102175472298\u0026amp;timestamp=2018-06-14+18%3A12%3A38\u0026#39; from newpro.settings import private_key_path, ali_public_path alipay = AliPay( appid=\u0026#34;2016091700530413\u0026#34;, #å¼‚æ­¥çš„é€šçŸ¥æ¥å£ï¼Œå½“åœ¨æµè§ˆå™¨æ‰«æåˆ›å»ºè®¢å•åï¼Œè¿™ä¸ªæ—¶å€™å…³é—­é¡µé¢ï¼Œæ­¤æ—¶å¯ä»¥åœ¨å®¢æˆ·ç«¯æˆ–è€…æ”¯æŠ¤å®è´¦å·é‡Œé¢çœ‹åˆ°è¿™ä¸ªä¸ºæ”¯ä»˜å®Œæˆçš„ä¿¡æ¯ app_notify_url=\u0026#34;http://118.190.202.67:8001/alipay/return/\u0026#34;, app_private_key_path=private_key_path, alipay_public_key_path=ali_public_path, # æ”¯ä»˜å®çš„å…¬é’¥ï¼ŒéªŒè¯æ”¯ä»˜å®å›ä¼ æ¶ˆæ¯ä½¿ç”¨ï¼Œä¸æ˜¯ä½ è‡ªå·±çš„å…¬é’¥, debug=True, # é»˜è®¤False, #åŒæ­¥æ¥å£ï¼Œæ”¯ä»˜æˆåŠŸåä¼šè·³è½¬çš„æ¥å£ return_url=\u0026#34;http://47.94.224.53:8000/alipay/return/\u0026#34; ) o = urlparse(return_url) query = parse_qs(o.query) processed_query = {} ali_sign = query.pop(\u0026#34;sign\u0026#34;)[0] for key, value in query.items(): processed_query[key] = value[0] print(\u0026#34;processed_query===\u0026#34;, processed_query) print(alipay.verify(processed_query, ali_sign)) url = alipay.direct_pay( subject=\u0026#34;æµ‹è¯•è®¢å•\u0026#34;, out_trade_no=\u0026#34;20180615109866gsss\u0026#34;, total_amount=100.01 ) #æ²™ç®±ç¯å¢ƒ re_url = \u0026#34;https://openapi.alipaydev.com/gateway.do?{data}\u0026#34;.format(data=url) print(re_url)     pythonåŠ è§£å¯†ç‚¹æˆ‘\n  æ›´å¥½çš„æ–¹æ³•\n  ","date":"2019-10-05T14:14:41+08:00","permalink":"https://sunnnner.github.io/p/python%E5%AE%9E%E7%8E%B0aes%E5%8A%A0%E5%AF%86/","title":"Pythonå®ç°AESåŠ å¯†"},{"content":"æ–¹æ³•ä¸€ï¼š ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼š `mysql\u0026gt; select count(1) from table into outfile '/tmp/test.xls';` Query OK, 31 rows affected (0.00 sec) åœ¨ç›®å½•/tmp/ä¸‹ä¼šäº§ç”Ÿæ–‡ä»¶test.xls é‡åˆ°çš„é—®é¢˜ï¼š mysql\u0026gt; select count(1) from table into outfile '/data/test.xls'; æŠ¥é”™ï¼š ERROR 1 (HY000): Canâ€™t create/write to file â€˜/data/test.xlsâ€™ (Errcode: 13) å¯èƒ½åŸå› ï¼šmysqlæ²¡æœ‰å‘/data/ä¸‹å†™çš„æƒé™  æ–¹æ³•äºŒï¼š æŸ¥è¯¢éƒ½è‡ªåŠ¨å†™å…¥æ–‡ä»¶ï¼š mysql\u0026gt; pager cat \u0026gt; /tmp/test.txt ; PAGER set to 'cat \u0026gt; /tmp/test.txt' ä¹‹åçš„æ‰€æœ‰æŸ¥è¯¢ç»“æœéƒ½è‡ªåŠ¨å†™å…¥/tmp/test.txtâ€™ï¼Œå¹¶å‰åè¦†ç›– mysql\u0026gt; select * from table ; 30 rows in set (0.59 sec) åœ¨æ¡†å£ä¸å†æ˜¾ç¤ºæŸ¥è¯¢ç»“æœ  æ–¹æ³•ä¸‰ï¼š è·³å‡ºmysqlå‘½ä»¤è¡Œ `# mysql -h 127.0.0.1 -u root -p XXXX -P 3306 -e â€œselect * from tableâ€ \u0026gt; /tmp/test/txt``  ","date":"2019-10-03T14:13:04+08:00","permalink":"https://sunnnner.github.io/p/mysql%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E8%BE%93%E5%87%BA%E5%88%B0%E6%96%87%E4%BB%B6/","title":"MysqlæŸ¥è¯¢ç»“æœè¾“å‡ºåˆ°æ–‡ä»¶"},{"content":"JWTâ€”â€”Json web token æ˜¯ä¸ºäº†åœ¨ç½‘ç»œåº”ç”¨ç¯å¢ƒé—´ä¼ é€’å£°æ˜è€Œæ‰§è¡Œçš„ä¸€ç§åŸºäºJSONçš„å¼€æ”¾æ ‡å‡†ï¼Œå¯å®ç°æ— çŠ¶æ€ã€åˆ†å¸ƒå¼çš„Webåº”ç”¨æˆæƒã€‚  1.1 ä¼ ç»Ÿæ–¹å¼ XSSçš„åŸç†åˆ†æä¸è§£å‰–\nå‰åç«¯åˆ†ç¦»é€šè¿‡Restful APIè¿›è¡Œæ•°æ®äº¤äº’æ—¶ï¼Œå¦‚ä½•éªŒè¯ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯åŠæƒé™ã€‚åœ¨åŸæ¥çš„é¡¹ç›®ä¸­ï¼Œä½¿ç”¨çš„æ˜¯æœ€ä¼ ç»Ÿä¹Ÿæ˜¯æœ€ç®€å•çš„æ–¹å¼ï¼Œå‰ç«¯ç™»å½•ï¼Œåç«¯æ ¹æ®ç”¨æˆ·ä¿¡æ¯ç”Ÿæˆä¸€ä¸ªtokenï¼Œå¹¶ä¿å­˜è¿™ä¸ª token å’Œå¯¹åº”çš„ç”¨æˆ·idåˆ°æ•°æ®åº“æˆ–Sessionä¸­ï¼Œæ¥ç€æŠŠ token ä¼ ç»™ç”¨æˆ·ï¼Œå­˜å…¥æµè§ˆå™¨ cookieï¼Œä¹‹åæµè§ˆå™¨è¯·æ±‚å¸¦ä¸Šè¿™ä¸ªcookieï¼Œåç«¯æ ¹æ®è¿™ä¸ªcookieå€¼æ¥æŸ¥è¯¢ç”¨æˆ·ï¼ŒéªŒè¯æ˜¯å¦è¿‡æœŸã€‚ ä½†è¿™æ ·åšé—®é¢˜å°±å¾ˆå¤šï¼Œå¦‚æœæˆ‘ä»¬çš„é¡µé¢å‡ºç°äº† XSS æ¼æ´ï¼Œç”±äº cookie å¯ä»¥è¢« JavaScript è¯»å–ï¼ŒXSS æ¼æ´ä¼šå¯¼è‡´ç”¨æˆ· token æ³„éœ²ï¼Œè€Œä½œä¸ºåç«¯è¯†åˆ«ç”¨æˆ·çš„æ ‡è¯†ï¼Œcookie çš„æ³„éœ²æ„å‘³ç€ç”¨æˆ·ä¿¡æ¯ä¸å†å®‰å…¨ã€‚å°½ç®¡æˆ‘ä»¬é€šè¿‡è½¬ä¹‰è¾“å‡ºå†…å®¹ï¼Œä½¿ç”¨ CDN ç­‰å¯ä»¥å°½é‡é¿å… XSS æ³¨å…¥ï¼Œä½†è°ä¹Ÿä¸èƒ½ä¿è¯åœ¨å¤§å‹çš„é¡¹ç›®ä¸­ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚ åœ¨è®¾ç½® cookie çš„æ—¶å€™ï¼Œå…¶å®ä½ è¿˜å¯ä»¥è®¾ç½® httpOnly ä»¥åŠ secure(ä¿æŠ¤)é¡¹ã€‚è®¾ç½® httpOnly å cookie å°†ä¸èƒ½è¢« JS è¯»å–ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨çš„æŠŠå®ƒåŠ åœ¨è¯·æ±‚çš„ header å½“ä¸­ï¼Œè®¾ç½® secure çš„è¯ï¼Œcookie å°±åªå…è®¸é€šè¿‡ HTTPS ä¼ è¾“ã€‚secure é€‰é¡¹å¯ä»¥è¿‡æ»¤æ‰ä¸€äº›ä½¿ç”¨ HTTP åè®®çš„ XSS æ³¨å…¥ï¼Œä½†å¹¶ä¸èƒ½å®Œå…¨é˜»æ­¢ã€‚ httpOnly é€‰é¡¹ä½¿å¾— JS ä¸èƒ½è¯»å–åˆ° cookieï¼Œé‚£ä¹ˆ XSS æ³¨å…¥çš„é—®é¢˜ä¹ŸåŸºæœ¬ä¸ç”¨æ‹…å¿ƒäº†ã€‚ä½†è®¾ç½® httpOnly å°±å¸¦æ¥äº†å¦ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¾ˆå®¹æ˜“çš„è¢« XSRFï¼Œå³è·¨ç«™è¯·æ±‚ä¼ªé€ ã€‚å½“ä½ æµè§ˆå™¨å¼€ç€è¿™ä¸ªé¡µé¢çš„æ—¶å€™ï¼Œå¦ä¸€ä¸ªé¡µé¢å¯ä»¥å¾ˆå®¹æ˜“çš„è·¨ç«™è¯·æ±‚è¿™ä¸ªé¡µé¢çš„å†…å®¹ã€‚å› ä¸º cookie é»˜è®¤è¢«å‘äº†å‡ºå»ã€‚ å¦å¤–ï¼Œå¦‚æœå°†éªŒè¯ä¿¡æ¯ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œåç«¯æ¯æ¬¡éƒ½éœ€è¦æ ¹æ®tokenæŸ¥å‡ºç”¨æˆ·idï¼Œè¿™å°±å¢åŠ äº†æ•°æ®åº“çš„æŸ¥è¯¢å’Œå­˜å‚¨å¼€é”€ã€‚è‹¥æŠŠéªŒè¯ä¿¡æ¯ä¿å­˜åœ¨sessionä¸­ï¼Œæœ‰åŠ å¤§äº†æœåŠ¡å™¨ç«¯çš„å­˜å‚¨å‹åŠ›ã€‚é‚£æˆ‘ä»¬å¯ä¸å¯ä»¥ä¸è¦æœåŠ¡å™¨å»æŸ¥è¯¢å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬ç”Ÿæˆtokenéµå¾ªä¸€å®šçš„è§„å¾‹ï¼Œæ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨å¯¹ç§°åŠ å¯†ç®—æ³•æ¥åŠ å¯†ç”¨æˆ·idå½¢æˆtokenï¼Œé‚£ä¹ˆæœåŠ¡ç«¯ä»¥åå…¶å®åªè¦è§£å¯†è¯¥tokenå°±å¯ä»¥çŸ¥é“ç”¨æˆ·çš„idæ˜¯ä»€ä¹ˆäº†ã€‚ä¸è¿‡å‘¢ï¼Œæˆ‘åªæ˜¯ä¸¾ä¸ªä¾‹å­è€Œå·²ï¼Œè¦æ˜¯çœŸè¿™ä¹ˆåšï¼Œåªè¦ä½ çš„å¯¹ç§°åŠ å¯†ç®—æ³•æ³„éœ²äº†ï¼Œå…¶ä»–äººå¯ä»¥é€šè¿‡è¿™ç§åŠ å¯†æ–¹å¼è¿›è¡Œä¼ªé€ tokenï¼Œé‚£ä¹ˆæ‰€æœ‰ç”¨æˆ·ä¿¡æ¯éƒ½ä¸å†å®‰å…¨äº†ã€‚æ©ï¼Œé‚£ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•æ¥åšå‘¢ï¼Œå…¶å®ç°åœ¨æœ‰ä¸ªè§„èŒƒå°±æ˜¯è¿™æ ·åšçš„ï¼Œå°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦ä»‹ç»çš„ JWTã€‚  Json Web Tokenï¼ˆJWTï¼‰ JWT æ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†(RFC 7519)ï¼Œå®ƒå®šä¹‰äº†ä¸€ç§ç”¨äºç®€æ´ï¼Œè‡ªåŒ…å«çš„ç”¨äºé€šä¿¡åŒæ–¹ä¹‹é—´ä»¥ JSON å¯¹è±¡çš„å½¢å¼å®‰å…¨ä¼ é€’ä¿¡æ¯çš„æ–¹æ³•ã€‚JWT å¯ä»¥ä½¿ç”¨ HMAC ç®—æ³•æˆ–è€…æ˜¯ RSA çš„å…¬é’¥å¯†é’¥å¯¹è¿›è¡Œç­¾åã€‚å®ƒå…·å¤‡ä¸¤ä¸ªç‰¹ç‚¹ï¼š ç®€æ´(Compact) å¯ä»¥é€šè¿‡URL, POST å‚æ•°æˆ–è€…åœ¨ HTTP header å‘é€ï¼Œå› ä¸ºæ•°æ®é‡å°ï¼Œä¼ è¾“é€Ÿåº¦å¿« è‡ªåŒ…å«(Self-contained) è´Ÿè½½ä¸­åŒ…å«äº†æ‰€æœ‰ç”¨æˆ·æ‰€éœ€è¦çš„ä¿¡æ¯ï¼Œé¿å…äº†å¤šæ¬¡æŸ¥è¯¢æ•°æ®åº“  JWT ç»„æˆ Header å¤´éƒ¨ å¤´éƒ¨åŒ…å«äº†ä¸¤éƒ¨åˆ†ï¼Œtoken ç±»å‹å’Œé‡‡ç”¨çš„åŠ å¯†ç®—æ³•  1 2 3 4  { \u0026#34;alg\u0026#34;: \u0026#34;HS256\u0026#34;, \u0026#34;typ\u0026#34;: \u0026#34;JWT\u0026#34; }   å®ƒä¼šä½¿ç”¨ Base64 ç¼–ç ç»„æˆ JWT ç»“æ„çš„ç¬¬ä¸€éƒ¨åˆ†,å¦‚æœä½ ä½¿ç”¨Node.jsï¼Œå¯ä»¥ç”¨Node.jsçš„åŒ…base64urlæ¥å¾—åˆ°è¿™ä¸ªå­—ç¬¦ä¸²ã€‚ Base64æ˜¯ä¸€ç§ç¼–ç ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯å¯ä»¥è¢«ç¿»è¯‘å›åŸæ¥çš„æ ·å­æ¥çš„ã€‚å®ƒå¹¶ä¸æ˜¯ä¸€ç§åŠ å¯†è¿‡ç¨‹ã€‚  Payload è´Ÿè½½ è¿™éƒ¨åˆ†å°±æ˜¯æˆ‘ä»¬å­˜æ”¾ä¿¡æ¯çš„åœ°æ–¹äº†ï¼Œä½ å¯ä»¥æŠŠç”¨æˆ· ID ç­‰ä¿¡æ¯æ”¾åœ¨è¿™é‡Œï¼ŒJWT è§„èŒƒé‡Œé¢å¯¹è¿™éƒ¨åˆ†æœ‰è¿›è¡Œäº†æ¯”è¾ƒè¯¦ç»†çš„ä»‹ç»ï¼Œå¸¸ç”¨çš„ç”± issï¼ˆç­¾å‘è€…ï¼‰ï¼Œexpï¼ˆè¿‡æœŸæ—¶é—´ï¼‰ï¼Œsubï¼ˆé¢å‘çš„ç”¨æˆ·ï¼‰ï¼Œaudï¼ˆæ¥æ”¶æ–¹ï¼‰ï¼Œiatï¼ˆç­¾å‘æ—¶é—´ï¼‰ã€‚  1 2 3 4 5 6 7  { \u0026#34;iss\u0026#34;: \u0026#34;lion1ou JWT\u0026#34;, \u0026#34;iat\u0026#34;: 1441593502, \u0026#34;exp\u0026#34;: 1441594722, \u0026#34;aud\u0026#34;: \u0026#34;www.example.com\u0026#34;, \u0026#34;sub\u0026#34;: \u0026#34;lion1ou@163.com\u0026#34; }   åŒæ ·çš„ï¼Œå®ƒä¼šä½¿ç”¨ Base64 ç¼–ç ç»„æˆ JWT ç»“æ„çš„ç¬¬äºŒéƒ¨åˆ†  Signature ç­¾å å‰é¢ä¸¤éƒ¨åˆ†éƒ½æ˜¯ä½¿ç”¨ Base64 è¿›è¡Œç¼–ç çš„ï¼Œå³å‰ç«¯å¯ä»¥è§£å¼€çŸ¥é“é‡Œé¢çš„ä¿¡æ¯ã€‚Signature éœ€è¦ä½¿ç”¨ç¼–ç åçš„ header å’Œ payload ä»¥åŠæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªå¯†é’¥ï¼Œç„¶åä½¿ç”¨ header ä¸­æŒ‡å®šçš„ç­¾åç®—æ³•ï¼ˆHS256ï¼‰è¿›è¡Œç­¾åã€‚ç­¾åçš„ä½œç”¨æ˜¯ä¿è¯ JWT æ²¡æœ‰è¢«ç¯¡æ”¹è¿‡ã€‚ ä¸‰ä¸ªéƒ¨åˆ†é€šè¿‡.è¿æ¥åœ¨ä¸€èµ·å°±æ˜¯æˆ‘ä»¬çš„ JWT äº†ï¼Œå®ƒå¯èƒ½é•¿è¿™ä¸ªæ ·å­ï¼Œé•¿åº¦è²Œä¼¼å’Œä½ çš„åŠ å¯†ç®—æ³•å’Œç§é’¥æœ‰å…³ç³» ```text eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjU3ZmVmMTY0ZTU0YWY2NGZmYzUzZGJkNSIsInhzcmYiOiI0ZWE1YzUwOGE2NTY2ZTc2MjQwNTQzZjhmZWIwNmZkNDU3Nzc3YmUzOTU0OWM0MDE2NDM2YWZkYTY1ZDIzMzBlIiwiaWF0IjoxNDc2NDI3OTMzfQ.PA3QjeyZSUh7H0GfE0vJaKW4LjKJuC3dVLQiY4hii8s ``` å…¶å®åˆ°è¿™ä¸€æ­¥å¯èƒ½å°±æœ‰äººä¼šæƒ³äº†ï¼ŒHTTP è¯·æ±‚æ€»ä¼šå¸¦ä¸Š tokenï¼Œè¿™æ ·è¿™ä¸ª token ä¼ æ¥ä¼ å»å ç”¨ä¸å¿…è¦çš„å¸¦å®½å•Šã€‚å¦‚æœä½ è¿™ä¹ˆæƒ³äº†ï¼Œé‚£ä½ å¯ä»¥å»äº†è§£ä¸‹ HTTP2ï¼ŒHTTP2 å¯¹å¤´éƒ¨è¿›è¡Œäº†å‹ç¼©ï¼Œç›¸ä¿¡ä¹Ÿè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚  ç­¾åçš„ç›®çš„ æœ€åä¸€æ­¥ç­¾åçš„è¿‡ç¨‹ï¼Œå®é™…ä¸Šæ˜¯å¯¹å¤´éƒ¨ä»¥åŠè´Ÿè½½å†…å®¹è¿›è¡Œç­¾åï¼Œé˜²æ­¢å†…å®¹è¢«çªœæ”¹ã€‚å¦‚æœæœ‰äººå¯¹å¤´éƒ¨ä»¥åŠè´Ÿè½½çš„å†…å®¹è§£ç ä¹‹åè¿›è¡Œä¿®æ”¹ï¼Œå†è¿›è¡Œç¼–ç ï¼Œæœ€ååŠ ä¸Šä¹‹å‰çš„ç­¾åç»„åˆå½¢æˆæ–°çš„JWTçš„è¯ï¼Œé‚£ä¹ˆæœåŠ¡å™¨ç«¯ä¼šåˆ¤æ–­å‡ºæ–°çš„å¤´éƒ¨å’Œè´Ÿè½½å½¢æˆçš„ç­¾åå’ŒJWTé™„å¸¦ä¸Šçš„ç­¾åæ˜¯ä¸ä¸€æ ·çš„ã€‚å¦‚æœè¦å¯¹æ–°çš„å¤´éƒ¨å’Œè´Ÿè½½è¿›è¡Œç­¾åï¼Œåœ¨ä¸çŸ¥é“æœåŠ¡å™¨åŠ å¯†æ—¶ç”¨çš„å¯†é’¥çš„è¯ï¼Œå¾—å‡ºæ¥çš„ç­¾åä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚  ä¿¡æ¯æš´éœ² åœ¨è¿™é‡Œå¤§å®¶ä¸€å®šä¼šé—®ä¸€ä¸ªé—®é¢˜ï¼šBase64æ˜¯ä¸€ç§ç¼–ç ï¼Œæ˜¯å¯é€†çš„ï¼Œé‚£ä¹ˆæˆ‘çš„ä¿¡æ¯ä¸å°±è¢«æš´éœ²äº†å—ï¼Ÿ æ˜¯çš„ã€‚æ‰€ä»¥ï¼Œåœ¨JWTä¸­ï¼Œä¸åº”è¯¥åœ¨è´Ÿè½½é‡Œé¢åŠ å…¥ä»»ä½•æ•æ„Ÿçš„æ•°æ®ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¼ è¾“çš„æ˜¯ç”¨æˆ·çš„User IDã€‚è¿™ä¸ªå€¼å®é™…ä¸Šä¸æ˜¯ä»€ä¹ˆæ•æ„Ÿå†…å®¹ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¢«çŸ¥é“ä¹Ÿæ˜¯å®‰å…¨çš„ã€‚ä½†æ˜¯åƒå¯†ç è¿™æ ·çš„å†…å®¹å°±ä¸èƒ½è¢«æ”¾åœ¨JWTä¸­äº†ã€‚å¦‚æœå°†ç”¨æˆ·çš„å¯†ç æ”¾åœ¨äº†JWTä¸­ï¼Œé‚£ä¹ˆæ€€æœ‰æ¶æ„çš„ç¬¬ä¸‰æ–¹é€šè¿‡Base64è§£ç å°±èƒ½å¾ˆå¿«åœ°çŸ¥é“ä½ çš„å¯†ç äº†ã€‚ å› æ­¤JWTé€‚åˆç”¨äºå‘Webåº”ç”¨ä¼ é€’ä¸€äº›éæ•æ„Ÿä¿¡æ¯ã€‚JWTè¿˜ç»å¸¸ç”¨äºè®¾è®¡ç”¨æˆ·è®¤è¯å’Œæˆæƒç³»ç»Ÿï¼Œç”šè‡³å®ç°Webåº”ç”¨çš„å•ç‚¹ç™»å½•ã€‚  JWT ä½¿ç”¨ 1.é¦–å…ˆï¼Œå‰ç«¯é€šè¿‡Webè¡¨å•å°†è‡ªå·±çš„ç”¨æˆ·åå’Œå¯†ç å‘é€åˆ°åç«¯çš„æ¥å£ã€‚è¿™ä¸€è¿‡ç¨‹ä¸€èˆ¬æ˜¯ä¸€ä¸ªHTTP POSTè¯·æ±‚ã€‚å»ºè®®çš„æ–¹å¼æ˜¯é€šè¿‡SSLåŠ å¯†çš„ä¼ è¾“ï¼ˆhttpsåè®®ï¼‰ï¼Œä»è€Œé¿å…æ•æ„Ÿä¿¡æ¯è¢«å—…æ¢ã€‚ 2.åç«¯æ ¸å¯¹ç”¨æˆ·åå’Œå¯†ç æˆåŠŸåï¼Œå°†ç”¨æˆ·çš„idç­‰å…¶ä»–ä¿¡æ¯ä½œä¸ºJWT Payloadï¼ˆè´Ÿè½½ï¼‰ï¼Œå°†å…¶ä¸å¤´éƒ¨åˆ†åˆ«è¿›è¡ŒBase64ç¼–ç æ‹¼æ¥åç­¾åï¼Œå½¢æˆä¸€ä¸ªJWTã€‚å½¢æˆçš„JWTå°±æ˜¯ä¸€ä¸ªå½¢åŒlll.zzz.xxxçš„å­—ç¬¦ä¸²ã€‚ 3.åç«¯å°†JWTå­—ç¬¦ä¸²ä½œä¸ºç™»å½•æˆåŠŸçš„è¿”å›ç»“æœè¿”å›ç»™å‰ç«¯ã€‚å‰ç«¯å¯ä»¥å°†è¿”å›çš„ç»“æœä¿å­˜åœ¨localStorageæˆ–sessionStorageä¸Šï¼Œé€€å‡ºç™»å½•æ—¶å‰ç«¯åˆ é™¤ä¿å­˜çš„JWTå³å¯ã€‚ 4.å‰ç«¯åœ¨æ¯æ¬¡è¯·æ±‚æ—¶å°†JWTæ”¾å…¥HTTP Headerä¸­çš„Authorizationä½ã€‚(è§£å†³XSSå’ŒXSRFé—®é¢˜) 5.åç«¯æ£€æŸ¥æ˜¯å¦å­˜åœ¨ï¼Œå¦‚å­˜åœ¨éªŒè¯JWTçš„æœ‰æ•ˆæ€§ã€‚ä¾‹å¦‚ï¼Œæ£€æŸ¥ç­¾åæ˜¯å¦æ­£ç¡®ï¼›æ£€æŸ¥Tokenæ˜¯å¦è¿‡æœŸï¼›æ£€æŸ¥Tokençš„æ¥æ”¶æ–¹æ˜¯å¦æ˜¯è‡ªå·±ï¼ˆå¯é€‰ï¼‰ã€‚ 6.éªŒè¯é€šè¿‡ååç«¯ä½¿ç”¨JWTä¸­åŒ…å«çš„ç”¨æˆ·ä¿¡æ¯è¿›è¡Œå…¶ä»–é€»è¾‘æ“ä½œï¼Œè¿”å›ç›¸åº”ç»“æœã€‚  å’ŒSessionæ–¹å¼å­˜å‚¨idçš„å·®å¼‚ Sessionæ–¹å¼å­˜å‚¨ç”¨æˆ·idçš„æœ€å¤§å¼Šç—…åœ¨äºSessionæ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯çš„ï¼Œæ‰€ä»¥éœ€è¦å ç”¨å¤§é‡æœåŠ¡å™¨å†…å­˜ï¼Œå¯¹äºè¾ƒå¤§å‹åº”ç”¨è€Œè¨€å¯èƒ½è¿˜è¦ä¿å­˜è®¸å¤šçš„çŠ¶æ€ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œå¤§å‹åº”ç”¨è¿˜éœ€è¦å€ŸåŠ©ä¸€äº›KVæ•°æ®åº“å’Œä¸€ç³»åˆ—ç¼“å­˜æœºåˆ¶æ¥å®ç°Sessionçš„å­˜å‚¨ã€‚ è€ŒJWTæ–¹å¼å°†ç”¨æˆ·çŠ¶æ€åˆ†æ•£åˆ°äº†å®¢æˆ·ç«¯ä¸­ï¼Œå¯ä»¥æ˜æ˜¾å‡è½»æœåŠ¡ç«¯çš„å†…å­˜å‹åŠ›ã€‚é™¤äº†ç”¨æˆ·idä¹‹å¤–ï¼Œè¿˜å¯ä»¥å­˜å‚¨å…¶ä»–çš„å’Œç”¨æˆ·ç›¸å…³çš„ä¿¡æ¯ï¼Œä¾‹å¦‚è¯¥ç”¨æˆ·æ˜¯å¦æ˜¯ç®¡ç†å‘˜ã€ç”¨æˆ·æ‰€åœ¨çš„åˆ†ç»„ç­‰ã€‚è™½è¯´JWTæ–¹å¼è®©æœåŠ¡å™¨æœ‰ä¸€äº›è®¡ç®—å‹åŠ›ï¼ˆä¾‹å¦‚åŠ å¯†ã€ç¼–ç å’Œè§£ç ï¼‰ï¼Œä½†æ˜¯è¿™äº›å‹åŠ›ç›¸æ¯”ç£ç›˜å­˜å‚¨è€Œè¨€å¯èƒ½å°±ä¸ç®—ä»€ä¹ˆäº†ã€‚å…·ä½“æ˜¯å¦é‡‡ç”¨ï¼Œéœ€è¦åœ¨ä¸åŒåœºæ™¯ä¸‹ç”¨æ•°æ®è¯´è¯ã€‚  å•ç‚¹ç™»å½• Sessionæ–¹å¼æ¥å­˜å‚¨ç”¨æˆ·idï¼Œä¸€å¼€å§‹ç”¨æˆ·çš„Sessionåªä¼šå­˜å‚¨åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šã€‚å¯¹äºæœ‰å¤šä¸ªå­åŸŸåçš„ç«™ç‚¹ï¼Œæ¯ä¸ªå­åŸŸåè‡³å°‘ä¼šå¯¹åº”ä¸€å°ä¸åŒçš„æœåŠ¡å™¨ï¼Œä¾‹å¦‚ï¼šwww.taobao.comï¼Œnv.taobao.comï¼Œnz.taobao.comï¼Œlogin.taobao.comã€‚æ‰€ä»¥å¦‚æœè¦å®ç°åœ¨login.taobao.comç™»å½•åï¼Œåœ¨å…¶ä»–çš„å­åŸŸåä¸‹ä¾ç„¶å¯ä»¥å–åˆ°Sessionï¼Œè¿™è¦æ±‚æˆ‘ä»¬åœ¨å¤šå°æœåŠ¡å™¨ä¸ŠåŒæ­¥Sessionã€‚ä½¿ç”¨JWTçš„æ–¹å¼åˆ™æ²¡æœ‰è¿™ä¸ªé—®é¢˜çš„å­˜åœ¨ï¼Œå› ä¸ºç”¨æˆ·çš„çŠ¶æ€å·²ç»è¢«ä¼ é€åˆ°äº†å®¢æˆ·ç«¯ã€‚  æ€»ç»“ä¼˜ç‚¹ ä¹Ÿå°±æ˜¯è¯´ç›¸æ¯”äºä¼ ç»ŸåŸºäºcookieçš„sessionï¼ŒåŸºäºtokençš„jwtæœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š Cookieæ˜¯ä¸å…è®¸å®åŸŸè®¿é—®çš„ï¼Œè¿™ä¸€ç‚¹å¯¹Tokenæœºåˆ¶æ˜¯ä¸å­˜åœ¨çš„ï¼Œå‰ææ˜¯ä¼ è¾“çš„ç”¨æˆ·è®¤è¯ä¿¡æ¯é€šè¿‡HTTPå¤´ä¼ è¾“. æ— çŠ¶æ€(ä¹Ÿç§°ï¼šæœåŠ¡ç«¯å¯æ‰©å±•è¡Œ):Tokenæœºåˆ¶åœ¨æœåŠ¡ç«¯ä¸éœ€è¦å­˜å‚¨sessionä¿¡æ¯ï¼Œå› ä¸ºToken è‡ªèº«åŒ…å«äº†æ‰€æœ‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ï¼Œåªéœ€è¦åœ¨å®¢æˆ·ç«¯çš„cookieæˆ–æœ¬åœ°ä»‹è´¨å­˜å‚¨çŠ¶æ€ä¿¡æ¯. æ›´é€‚ç”¨CDN: å¯ä»¥é€šè¿‡å†…å®¹åˆ†å‘ç½‘ç»œè¯·æ±‚ä½ æœåŠ¡ç«¯çš„æ‰€æœ‰èµ„æ–™ï¼ˆå¦‚ï¼šjavascriptï¼ŒHTML,å›¾ç‰‡ç­‰ï¼‰ï¼Œè€Œä½ çš„æœåŠ¡ç«¯åªè¦æä¾›APIå³å¯. å»è€¦: ä¸éœ€è¦ç»‘å®šåˆ°ä¸€ä¸ªç‰¹å®šçš„èº«ä»½éªŒè¯æ–¹æ¡ˆã€‚Tokenå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ç”Ÿæˆï¼Œåªè¦åœ¨ä½ çš„APIè¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä½ å¯ä»¥è¿›è¡ŒTokenç”Ÿæˆè°ƒç”¨å³å¯. æ›´é€‚ç”¨äºç§»åŠ¨åº”ç”¨: å½“ä½ çš„å®¢æˆ·ç«¯æ˜¯ä¸€ä¸ªåŸç”Ÿå¹³å°ï¼ˆiOS, Androidï¼ŒWindows 8ç­‰ï¼‰æ—¶ï¼ŒCookieæ˜¯ä¸è¢«æ”¯æŒçš„ï¼ˆä½ éœ€è¦é€šè¿‡Cookieå®¹å™¨è¿›è¡Œå¤„ç†ï¼‰ï¼Œè¿™æ—¶é‡‡ç”¨Tokenè®¤è¯æœºåˆ¶å°±ä¼šç®€å•å¾—å¤šã€‚ CSRF:å› ä¸ºä¸å†ä¾èµ–äºCookieï¼Œæ‰€ä»¥ä½ å°±ä¸éœ€è¦è€ƒè™‘å¯¹CSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰çš„é˜²èŒƒã€‚ æ€§èƒ½: ä¸€æ¬¡ç½‘ç»œå¾€è¿”æ—¶é—´ï¼ˆé€šè¿‡æ•°æ®åº“æŸ¥è¯¢sessionä¿¡æ¯ï¼‰æ€»æ¯”åšä¸€æ¬¡HMACSHA256è®¡ç®— çš„TokenéªŒè¯å’Œè§£æè¦è´¹æ—¶å¾—å¤š. ä¸éœ€è¦ä¸ºç™»å½•é¡µé¢åšç‰¹æ®Šå¤„ç†: å¦‚æœä½ ä½¿ç”¨Protractor åšåŠŸèƒ½æµ‹è¯•çš„æ—¶å€™ï¼Œä¸å†éœ€è¦ä¸ºç™»å½•é¡µé¢åšç‰¹æ®Šå¤„ç†. åŸºäºæ ‡å‡†åŒ–:ä½ çš„APIå¯ä»¥é‡‡ç”¨æ ‡å‡†åŒ–çš„ JSON Web Token (JWT). è¿™ä¸ªæ ‡å‡†å·²ç»å­˜åœ¨å¤šä¸ªåç«¯åº“ï¼ˆ.NET, Ruby, Java,Python, PHPï¼‰å’Œå¤šå®¶å…¬å¸çš„æ”¯æŒï¼ˆå¦‚ï¼šFirebase,Google, Microsoftï¼‰. ","date":"2019-10-02T14:08:17+08:00","permalink":"https://sunnnner.github.io/p/jwt/","title":"JWT"},{"content":"ä¸ºä»€ä¹ˆä½¿ç”¨tokenéªŒè¯  åœ¨webé¢†åŸŸåŸºäºtokençš„èº«ä»½éªŒè¯éšå¤„å¯å˜ï¼Œåœ¨å¤§å¤šè¯´ä½¿ç”¨web APIçš„äº’è”ç½‘å…¬å¸ä¸­ï¼Œtokensæ˜¯å¤šç”¨æˆ·ä¸‹å¤„ç†è®¤è¯çš„æœ€ä½³æ–¹å¼  ä¸€ä¸‹å‡ ç‚¹ç‰¹æ€§ä¼šè®©ä½ åœ¨ç¨‹åºä¸­ä½¿ç”¨åŸºäºToken çš„èº«ä»½éªŒè¯  æ— çŠ¶æ€ã€å¯æ‰©å±• æ”¯æŒç§»åŠ¨è®¾å¤‡ è·¨ç¨‹åºè°ƒç”¨ å®‰å…¨ é‚£äº›ä½¿ç”¨åŸºäºTokençš„èº«ä»½éªŒè¯çš„å¤§ä½¬ä»¬ å¤§éƒ¨åˆ†ä½ è§åˆ°è¿‡çš„APIå’ŒWEBåº”ç”¨éƒ½æ˜¯ç”¨tokensï¼Œåˆ—å¦‚facebook, twitter, google+, githubç­‰  Tokençš„èµ·æº   åœ¨ä»‹ç»åŸºäºtokençš„èº«ä»½éªŒè¯çš„åŸç†ä¸ä¼˜åŠ¿ä¹‹å‰ï¼Œä¸å¦¨å…ˆçœ‹çœ‹ä¹‹å‰çš„è®¤è¯éƒ½æ˜¯æ€ä¹ˆåšçš„\n åŸºäºæœåŠ¡å™¨çš„éªŒè¯ æˆ‘ä»¬éƒ½æ˜¯çŸ¥é“HTTPåè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œè¿™ç§æ— çŠ¶æ€æ„å‘³ç€ç¨‹åºéœ€è¦éªŒè¯æ¯ä¸€æ¬¡è¯·æ±‚ï¼Œä»è€Œè¾¨åˆ«å®¢æˆ·ç«¯çš„èº«ä»½ã€‚ åœ¨è¿™ä¹‹å‰ï¼Œç¨‹åºéƒ½æ˜¯é€šè¿‡åœ¨æœåŠ¡ç«¯å­˜å‚¨çš„ç™»å½•ä¿¡æ¯æ¥è¾¨åˆ«è¯·æ±‚çš„ã€‚è¿™ç§æ–¹å¼ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡å­˜å‚¨Sessionæ¥å®Œæˆã€‚ éšç€Webï¼Œåº”ç”¨ç¨‹åºï¼Œå·²ç»ç§»åŠ¨ç«¯çš„å…´èµ·ï¼Œè¿™ç§éªŒè¯çš„æ–¹å¼é€æ¸æš´éœ²å‡ºäº†é—®é¢˜ã€‚å°¤å…¶æ˜¯åœ¨å¯æ‰©å±•æ€§æ–¹é¢ã€‚    åŸºäºæœåŠ¡å™¨çš„éªŒè¯æ–¹å¼æš´éœ²çš„ä¸€äº›é—®é¢˜ 1ã€sessionï¼šæ¯æ¬¡è®¤è¯ç”¨æˆ·å‘èµ·è¯·æ±‚æ—¶ï¼Œ æœåŠ¡å™¨éœ€è¦å»åˆ›å»ºä¸€ä¸ªè®°å½•æ¥å­˜å‚¨ä¿¡æ¯ï¼Œ å½“è¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·å‘è¯·æ±‚æ—¶ï¼Œ å†…å­˜çš„å¼€é”€ä¹Ÿä¼šä¸æ–­å¢åŠ  2ã€å¯è·æŒ¯å…´ï¼šåœ¨æœåŠ¡ç«¯çš„å†…å­˜ä¸­ä½¿ç”¨sessionå­˜å‚¨çš„ç™»å½•ä¿¡æ¯ï¼ŒåŠæ‰€è€Œæ¥çš„æ˜¯å¯æ‰©å±•æ€§é—®é¢˜ 3ã€CORSï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰ï¼š å½“æˆ‘ä»¬éœ€è¦è®©æ•°æ®è·¨å¤šå°ç§»åŠ¨è®¾å¤‡ä¸Šä½¿ç”¨æ—¶ï¼Œ è·¨åŸŸèµ„æºå…±äº«å›äº‹ä¸€ä¸ªè®©äººå¤´ç–¼çš„é—®é¢˜ï¼Œ åœ¨ä½¿ç”¨ajaxæŠ“å–å¦ä¸€ä¸ªåŸŸçš„èµ„æºï¼Œå°±å¯ä»¥ä¼šå‡ºç°ç¦æ­¢è¯·æ±‚çš„æƒ…å†µ 4ã€CSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰ï¼š ç”¨æˆ·åœ¨è®¿é—®é“¶è¡Œç½‘ç«™æ—¶ï¼Œ ä»–ä»¬å¾ˆå®¹æ˜“å—åˆ°è·¨ç«™è¯·æ±‚ä¼ªé€ çš„æ”»å‡»ï¼Œ å¹¶ä¸”èƒ½å¤Ÿè¢«åˆ©ç”¨å…¶è®¿é—®å…¶ä»–ç½‘ç«™ åœ¨è¿™äº›é—®é¢˜ä¸­ï¼Œå¯æ‰©å±•æ€§æ˜¯æœ€çªå‡ºï¼Œå› æ­¤æˆ‘ä»¬æœ‰å¿…è¦å»å¯»æ±‚ä¸€ç§æ›´æœ‰è¡Œä¹‹æœ‰æ•ˆçš„æ–¹æ³•  åŸºäºTOKENçš„éªŒè¯åŸç† åŸºäºTokençš„èº«ä»½éªŒè¯æ˜¯æ— çŠ¶æ€çš„ï¼Œæˆ‘ä»¬ä¸å°†ç”¨æˆ·ä¿¡æ¯å­˜åœ¨æœåŠ¡å™¨æˆ–Sessionä¸­ã€‚ è¿™ç§æ¦‚å¿µè§£å†³äº†åœ¨æœåŠ¡ç«¯å­˜å‚¨ä¿¡æ¯æ—¶çš„è®¸å¤šé—®é¢˜ NoSessionæ„å‘³ç€ä½ çš„ç¨‹åºå¯ä»¥æ ¹æ®éœ€è¦å»å¢å‡æœºå™¨ï¼Œè€Œä¸ç”¨å»æ‹…å¿ƒç”¨æˆ·æ˜¯å¦ç™»å½•ã€‚ åŸºäºTokençš„èº«ä»½éªŒè¯çš„è¿‡ç¨‹å¦‚ä¸‹: 1.ç”¨æˆ·é€šè¿‡ç”¨æˆ·åå’Œå¯†ç å‘é€è¯·æ±‚ã€‚ 2.ç¨‹åºéªŒè¯ã€‚ 3.ç¨‹åºè¿”å›ä¸€ä¸ªç­¾åçš„token ç»™å®¢æˆ·ç«¯ã€‚ 4.å®¢æˆ·ç«¯å‚¨å­˜token,å¹¶ä¸”æ¯æ¬¡ç”¨äºæ¯æ¬¡å‘é€è¯·æ±‚ã€‚ 5.æœåŠ¡ç«¯éªŒè¯tokenå¹¶è¿”å›æ•°æ®ã€‚ æ¯ä¸€æ¬¡è¯·æ±‚éƒ½éœ€è¦tokenã€‚tokenåº”è¯¥åœ¨HTTPçš„å¤´éƒ¨å‘é€ä»è€Œä¿è¯äº†Httpè¯·æ±‚æ— çŠ¶æ€ã€‚æˆ‘ä»¬åŒæ ·é€šè¿‡è®¾ç½®æœåŠ¡å™¨å±æ€§Access-Control-Allow-Origin:* ï¼Œè®©æœåŠ¡å™¨èƒ½æ¥å—åˆ°æ¥è‡ªæ‰€æœ‰åŸŸçš„è¯·æ±‚ã€‚éœ€è¦ä¸»è¦çš„æ˜¯ï¼Œåœ¨ACAOå¤´éƒ¨æ ‡æ˜(designating)*æ—¶ï¼Œä¸å¾—å¸¦æœ‰åƒHTTPè®¤è¯ï¼Œå®¢æˆ·ç«¯SSLè¯ä¹¦å’Œcookiesçš„è¯ä¹¦ã€‚  ä»£ç å®ä¾‹æµç¨‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  //ç”¨æˆ·ç¬¬ä¸€æ¬¡ç™»å½• username pwd client_type //æ¥å£åˆ¤æ–­ if(token\u0026amp;uid){ æŸ¥è¯¢tokenè¡¨ $token=where uid =uid if($token==token){ ç™»å½•æˆåŠŸï¼ï¼ è¿”å›token å’Œ uid }else{ ç™»å½•å¤±è´¥ï¼ï¼ } } if(usename powd client_type){ æ£€éªŒç”¨æˆ·åå’Œå¯†ç  ifï¼ˆæ­£ç¡®ï¼‰{ å¾—åˆ°uid å¹¶ ç”Ÿæˆtokenï¼ˆmd5( uid.pwd.time() è‡ªå·±å®šä¹‰è§„åˆ™ )ï¼‰ if(uidä¸å­˜åœ¨){ into token è¡¨ id uid token }else{ where uid=$uid ä¿®æ”¹token } è¿”å›token å’Œ uid }else{ è¿”å›é”™è¯¯ä¿¡æ¯ï¼› } }   å®¢æˆ·ç«¯cè¿›è¡Œæ–‡ä»¶å­˜å‚¨uid å’Œtoken ä¸‹æ¬¡å†æ¬¡ç™»å½•æ—¶ä½¿ç”¨uidå’Œtoken å®ç°äº†ç”¨æˆ·ç™»å½•çš„äº’è¸¢ å½“æˆ‘ä»¬åœ¨ç¨‹åºä¸­è®¤è¯äº†ä¿¡æ¯å¹¶å–å¾—tokenä¹‹åï¼Œæˆ‘ä»¬ä¾¿èƒ½é€šè¿‡è¿™ä¸ªTokenåšè®¸å¤šçš„äº‹æƒ…ã€‚ æˆ‘ä»¬ç”šè‡³èƒ½åŸºäºåˆ›å»ºä¸€ä¸ªåŸºäºæƒé™çš„tokenä¼ ç»™ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºï¼Œè¿™äº›ç¬¬ä¸‰æ–¹ç¨‹åºèƒ½å¤Ÿè·å–åˆ°æˆ‘ä»¬çš„æ•°æ®ï¼ˆå½“ç„¶åªæœ‰åœ¨æˆ‘ä»¬å…è®¸çš„ç‰¹å®šçš„tokenï¼‰  Tokensçš„ä¼˜åŠ¿   æ— çŠ¶æ€ã€å¯æ‰©å±•\n åœ¨å®¢æˆ·ç«¯å­˜å‚¨çš„Tokensæ˜¯æ— çŠ¶æ€çš„ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«æ‰©å±•ã€‚åŸºäºè¿™ç§æ— çŠ¶æ€å’Œä¸å­˜å‚¨Sessionä¿¡æ¯ï¼Œè´Ÿè½½è´Ÿè½½å‡è¡¡å™¨èƒ½å¤Ÿå°†ç”¨æˆ·ä¿¡æ¯ä»ä¸€ä¸ªæœåŠ¡ä¼ åˆ°å…¶ä»–æœåŠ¡å™¨ä¸Šã€‚ å¦‚æœæˆ‘ä»¬å°†å·²éªŒè¯çš„ç”¨æˆ·çš„ä¿¡æ¯ä¿å­˜åœ¨Sessionä¸­ï¼Œåˆ™æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦ç”¨æˆ·å‘å·²éªŒè¯çš„æœåŠ¡å™¨å‘é€éªŒè¯ä¿¡æ¯(ç§°ä¸ºSessionäº²å’Œæ€§)ã€‚ç”¨æˆ·é‡å¤§æ—¶ï¼Œå¯èƒ½ä¼šé€ æˆä¸€äº›æ‹¥å µã€‚ä½†æ˜¯ä¸è¦ç€æ€¥ã€‚ä½¿ç”¨tokensä¹‹åè¿™äº›é—®é¢˜éƒ½è¿åˆƒè€Œè§£ï¼Œå› ä¸ºtokensè‡ªå·±holdä½äº†ç”¨æˆ·çš„éªŒè¯ä¿¡æ¯ã€‚    å®‰å…¨æ€§ è¯·æ±‚ä¸­å‘é€tokenè€Œä¸å†æ˜¯å‘é€cookieèƒ½å¤Ÿé˜²æ­¢CSRF(è·¨ç«™è¯·æ±‚ä¼ªé€ )ã€‚å³ä½¿åœ¨å®¢æˆ·ç«¯ä½¿ç”¨cookieå­˜å‚¨tokenï¼Œcookieä¹Ÿä»…ä»…æ˜¯ä¸€ä¸ªå­˜å‚¨æœºåˆ¶è€Œä¸æ˜¯ç”¨äºè®¤è¯ã€‚ä¸å°†ä¿¡æ¯å­˜å‚¨åœ¨Sessionä¸­ï¼Œè®©æˆ‘ä»¬å°‘äº†å¯¹sessionæ“ä½œã€‚ tokenæ˜¯æœ‰æ—¶æ•ˆçš„ï¼Œä¸€æ®µæ—¶é—´ä¹‹åç”¨æˆ·éœ€è¦é‡æ–°éªŒè¯ã€‚æˆ‘ä»¬ä¹Ÿä¸ä¸€å®šéœ€è¦ç­‰åˆ°tokenè‡ªåŠ¨å¤±æ•ˆï¼Œtokenæœ‰æ’¤å›çš„æ“ä½œï¼Œé€šè¿‡token revocataionå¯ä»¥ä½¿ä¸€ä¸ªç‰¹å®šçš„tokenæˆ–æ˜¯ä¸€ç»„æœ‰ç›¸åŒè®¤è¯çš„tokenæ— æ•ˆã€‚  å¯æ‰©å±•æ€§ï¼ˆï¼‰ Tokensèƒ½å¤Ÿåˆ›å»ºä¸å…¶å®ƒç¨‹åºå…±äº«æƒé™çš„ç¨‹åºã€‚ä¾‹å¦‚ï¼Œèƒ½å°†ä¸€ä¸ªéšä¾¿çš„ç¤¾äº¤å¸å·å’Œè‡ªå·±çš„å¤§å·(Fackbookæˆ–æ˜¯Twitter)è”ç³»èµ·æ¥ã€‚å½“é€šè¿‡æœåŠ¡ç™»å½•Twitter(æˆ‘ä»¬å°†è¿™ä¸ªè¿‡ç¨‹Buffer)æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›Bufferé™„åˆ°Twitterçš„æ•°æ®æµä¸Š(we are allowing Buffer to post to our Twitter stream)ã€‚ ä½¿ç”¨tokensæ—¶ï¼Œå¯ä»¥æä¾›å¯é€‰çš„æƒé™ç»™ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºã€‚å½“ç”¨æˆ·æƒ³è®©å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºè®¿é—®å®ƒä»¬çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å»ºç«‹è‡ªå·±çš„APIï¼Œå¾—å‡ºç‰¹æ®Šæƒé™çš„tokensã€‚  å¤šå¹³å°è·¨åŸŸ æˆ‘ä»¬æå‰å…ˆæ¥è°ˆè®ºä¸€ä¸‹CORS(è·¨åŸŸèµ„æºå…±äº«)ï¼Œå¯¹åº”ç”¨ç¨‹åºå’ŒæœåŠ¡è¿›è¡Œæ‰©å±•çš„æ—¶å€™ï¼Œéœ€è¦ä»‹å…¥å„ç§å„ç§çš„è®¾å¤‡å’Œåº”ç”¨ç¨‹åºã€‚ Having our API just serve data, we can also make the design choice to serve assets from a CDN. This eliminates the issues that CORS brings up after we set a quick header configuration for our application. åªè¦ç”¨æˆ·æœ‰ä¸€ä¸ªé€šè¿‡äº†éªŒè¯çš„tokenï¼Œæ•°æ®å’Œèµ„æºå°±èƒ½å¤Ÿåœ¨ä»»ä½•åŸŸä¸Šè¢«è¯·æ±‚åˆ°ã€‚  Access-Control-Allow-Origin: * åŸºäºæ ‡å‡† åˆ›å»ºtokençš„æ—¶å€™ï¼Œä½ å¯ä»¥è®¾å®šä¸€äº›é€‰é¡¹ã€‚æˆ‘ä»¬åœ¨åç»­çš„æ–‡ç« ä¸­ä¼šè¿›è¡Œæ›´åŠ è¯¦å°½çš„æè¿°ï¼Œä½†æ˜¯æ ‡å‡†çš„ç”¨æ³•ä¼šåœ¨JSON Web Tokensä½“ç°ã€‚ æœ€è¿‘çš„ç¨‹åºå’Œæ–‡æ¡£æ˜¯ä¾›ç»™JSON Web Tokensçš„ã€‚å®ƒæ”¯æŒä¼—å¤šçš„è¯­è¨€ã€‚è¿™æ„å‘³åœ¨æœªæ¥çš„ä½¿ç”¨ä¸­ä½ å¯ä»¥çœŸæ­£çš„è½¬æ¢ä½ çš„è®¤è¯æœºåˆ¶ã€‚  æ€»ç»“ è¿™ç¯‡æ–‡ç« ä»…ä»…æ˜¯ä»‹ç»äº†ä¸ºä»€ä¹ˆé€‰æ‹©åŸºäºTokençš„èº«ä»½éªŒè¯ï¼Œå¹¶ä¸”æ€æ ·ä½¿ç”¨å®ƒã€‚  ","date":"2019-10-01T14:03:37+08:00","permalink":"https://sunnnner.github.io/p/token%E9%AA%8C%E8%AF%81%E8%AF%A6%E8%A7%A3/","title":"TOKENéªŒè¯è¯¦è§£"},{"content":" ç½‘ç»œåº”ç”¨ç¨‹åºï¼Œåˆ†ä¸ºå‰ç«¯å’Œåç«¯ä¸¤ä¸ªéƒ¨åˆ†ï¼Œ å½“å‰çš„å‘å±•è¶‹åŠ¿ï¼Œ å°±æ˜¯å‰æ®µè®¾å¤‡å±‚å‡ºä¸ç©· å› æ­¤ï¼Œå¿…é¡»æœ‰ä¸€ç§ç»Ÿä¸€çš„æœºåˆ¶ï¼Œæ–¹ä¾¿ä¸åŒçš„å‰ç«¯è®¾å¤‡ä¸åç«¯è¿›è¡Œé€šä¿¡ï¼Œ è¿™å¯¼è‡´APIæ¶æ„çš„æµè¡Œï¼Œ \u0026gt; ç”šè‡³å‡ºç°APIfirstçš„è®¾è®¡æ€æƒ³ã€‚\n åè®® APIä¸ç”¨æˆ·çš„é€šä¿¡åè®®ï¼Œ æ€»æ˜¯ä½¿ç”¨HTTPsåè®®  åŸŸå   åº”å°½é‡å°†APIéƒ¨ç½²åœ¨ä¸“ç”¨åŸŸåä¹‹ä¸‹\n https:// api.example.com    å¦‚æœç¡®å®šAPIå¾ˆç®€å•ï¼Œä¸ä¼šæœ‰è¿›ä¸€æ­¥æ‰©å±•ï¼Œ å¯ä»¥è€ƒè™‘æ”¾åœ¨ä¸»åŸŸåä¸‹\n https: // example.com    ç‰ˆæœ¬(Versioning)   åº”å°†APIçš„ç‰ˆæœ¬å·æ”¾å…¥URL\n https://api.example.com/v1/    å¦ä¸€ç§åšæ³•æ˜¯ï¼Œå°†ç‰ˆæœ¬å·æ”¾åœ¨HTTPå¤´ä¿¡æ¯ä¸­ï¼Œä½†ä¸å¦‚æ”¾å…¥URLæ–¹ä¾¿å’Œç›´è§‚ã€‚Githubé‡‡ç”¨è¿™ç§åšæ³•ã€‚\n  è·¯å¾„(Endpoint) è·¯å¾„åˆç§°â€ç»ˆç‚¹â€ï¼ˆendpointï¼‰ï¼Œè¡¨ç¤ºAPIçš„å…·ä½“ç½‘å€ã€‚ åœ¨RESTfulæ¶æ„ä¸­ï¼Œæ¯ä¸ªç½‘å€ä»£è¡¨ä¸€ç§èµ„æºï¼ˆresourceï¼‰ï¼Œæ‰€ä»¥ç½‘å€ä¸­ä¸èƒ½æœ‰åŠ¨è¯ï¼Œåªèƒ½æœ‰åè¯ï¼Œè€Œä¸”æ‰€ç”¨çš„åè¯å¾€å¾€ä¸æ•°æ®åº“çš„è¡¨æ ¼åå¯¹åº”ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ•°æ®åº“ä¸­çš„è¡¨éƒ½æ˜¯åŒç§è®°å½•çš„â€é›†åˆâ€ï¼ˆcollectionï¼‰ï¼Œæ‰€ä»¥APIä¸­çš„åè¯ä¹Ÿåº”è¯¥ä½¿ç”¨å¤æ•°ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œæœ‰ä¸€ä¸ªAPIæä¾›åŠ¨ç‰©å›­ï¼ˆzooï¼‰çš„ä¿¡æ¯ï¼Œè¿˜åŒ…æ‹¬å„ç§åŠ¨ç‰©å’Œé›‡å‘˜çš„ä¿¡æ¯ï¼Œåˆ™å®ƒçš„è·¯å¾„åº”è¯¥è®¾è®¡æˆä¸‹é¢è¿™æ ·ã€‚ Â· https://api.example.com/v1/zoos Â· https://api.example.com/v1/animals Â· https://api.example.com/v1/employees  HTTPåŠ¨è¯ å¯¹äºèµ„æºçš„å…·ä½“æ“ä½œç±»å‹ï¼Œç”±HTTPåŠ¨è¯è¡¨ç¤ºã€‚ å¸¸ç”¨çš„HTTPåŠ¨è¯æœ‰ä¸‹é¢äº”ä¸ªï¼ˆæ‹¬å·é‡Œæ˜¯å¯¹åº”çš„SQLå‘½ä»¤ï¼‰ã€‚ GET(SELECT) : ä»æœåŠ¡å™¨å–å‡ºèµ„æº(ä¸€é¡¹æˆ–è€…å¤šé¡¹) POST(CREATE) : åœ¨æœåŠ¡å™¨æ–°å»ºä¸€ä¸ªèµ„æº PUT(UPDATE) : åœ¨æœåŠ¡å™¨æ›´æ–°èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ”¹å˜åçš„å®Œæ•´èµ„æºï¼‰ PATCH(update): åœ¨æœåŠ¡å™¨æ›´æ–°èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ”¹å˜çš„å±æ€§ï¼‰ DELETE(DELETE): ä»æœåŠ¡å™¨åˆ é™¤èµ„æº è¿˜æœ‰ä¸¤ä¸ªä¸å¸¸ç”¨çš„HTTP\u0008åŠ¨è¯ HEAD: è·å–èµ„æºçš„å…ƒæ•°æ® OPTIONS: è· å–ä¿¡æ¯ï¼Œ å…³äºèµ„æºçš„å“ªäº›å±æ€§æ˜¯å®¢æˆ·ç«¯å¯ä»¥æ”¹å˜çš„ ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ GET/ courses ï¼šåˆ—å‡ºæ‰€æœ‰è¯¾ç¨‹ POST/ courses : æ·»åŠ ä¸€é—¨è¯¾ç¨‹ GET/ courses/ID: è·å–æŸä¸ªè¯¾ç¨‹çš„ä¿¡æ¯ PUT/ courses/ID: æ›´æ–°æŸä¸ªæŒ‡å®šè¯¾ç¨‹ä¿¡æ¯ï¼ˆæä¾›è¯¥è¯¾ç¨‹çš„å…¨éƒ¨ä¿¡æ¯ï¼‰ PATCH/ courses/ID: æ›´æ–°æŸä¸ªæŒ‡å®šè¯¾ç¨‹ä¿¡æ¯ï¼ˆæä¾›è¯¥è¯¾ç¨‹çš„éƒ¨åˆ†ä¿¡æ¯ï¼‰ DELETE/courses/ID: åˆ é™¤ä¸€é—¨è¯¾ç¨‹ GET/ courses/ ID/ class: åˆ—å‡ºæŸä¸ªæŒ‡å®šè¯¾ç¨‹çš„æ‰€æœ‰ç­çº§ DELETE/courses/ class/ID: åˆ é™¤æŸä¸ªæŒ‡å®šè¯¾ç¨‹çš„æŒ‡å®šç­çº§  è¿‡æ»¤ä¿¡æ¯ï¼ˆFiteringï¼‰ å¦‚æœè®°å½•æ•°é‡å¾ˆå¤šï¼ŒæœåŠ¡å™¨ä¸å¯èƒ½éƒ½å°†ä»–ä»¬è¿”å›ç»™ç”¨æˆ·ï¼ŒAPIåº”è¯¥æä¾›å‚æ•°ï¼Œ è¿‡æ»¤è¿”å›ç»“æœï¼Œä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„å‚æ•° ?limit=10: æŒ‡å®šè¿”å›è®°å½•çš„æ•°é‡ ?offset=10: æŒ‡å®šè¿”å›è®°å½•çš„å¼€å§‹ä½ç½® ?page=2\u0026amp;per_page=100: æŒ‡å®šç¬¬å‡ é¡µï¼Œä»¥åŠæ¯é¡µçš„è®°å½•æ•° ?sortby=name\u0026amp;order=asc: æŒ‡å®šè¿”å›ç»“æœæŒ‰ç…§é‚£ä¸ªå±æ€§æ’åºï¼Œ ä»¥åŠæ’åºé¡ºåº ?animal_type_id=1: æŒ‡å®šç­›é€‰æ¡ä»¶ å‚æ•°çš„è®¾è®¡å…è®¸å­˜åœ¨å†—ä½™ï¼Œå³å…è®¸APIè·¯å¾„å’ŒURLå‚æ•°å¶å°”æœ‰é‡å¤ï¼Œ æ¯”å¦‚ï¼šGET/zoo/ID/animalsä¸GET/animals?zoo_id=IDçš„å«ä¹‰æ˜¯ç›¸åŒçš„  çŠ¶æ€å—ï¼ˆstatus codesï¼‰ æœåŠ¡å™¨å‘ ç”¨æˆ·è¿”å›çš„çŠ¶æ€å—å’Œæç¤ºä¿¡æ¯ï¼Œ å¸¸è§çš„æœ‰ä»¥ä¸‹ä¸€äº› 200 OK - [GET]ï¼šæœåŠ¡å™¨æˆåŠŸè¿”å›ç”¨æˆ·è¯·æ±‚çš„æ•°æ®ï¼Œè¯¥æ“ä½œæ˜¯å¹‚ç­‰çš„ï¼ˆIdempotentï¼‰ 201 CREATED - [POST/PUT/PATCH]ï¼šç”¨æˆ·æ–°å»ºæˆ–ä¿®æ”¹æ•°æ®æˆåŠŸã€‚ 202 Accepted - [*]ï¼šè¡¨ç¤ºä¸€ä¸ªè¯·æ±‚å·²ç»è¿›å…¥åå°æ’é˜Ÿï¼ˆå¼‚æ­¥ä»»åŠ¡ï¼‰ 204 NO CONTENT - [DELETE]ï¼šç”¨æˆ·åˆ é™¤æ•°æ®æˆåŠŸã€‚ 400 INVALID REQUEST - [POST/PUT/PATCH]ï¼šç”¨æˆ·å‘å‡ºçš„è¯·æ±‚æœ‰é”™è¯¯ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ–°å»ºæˆ–ä¿®æ”¹æ•°æ®çš„æ“ä½œï¼Œè¯¥æ“ä½œæ˜¯å¹‚ç­‰çš„ã€‚ Unauthorized - [*]ï¼šè¡¨ç¤ºç”¨æˆ·æ²¡æœ‰æƒé™ï¼ˆä»¤ç‰Œã€ç”¨æˆ·åã€å¯†ç é”™è¯¯ï¼‰ã€‚ Forbidden - [*] è¡¨ç¤ºç”¨æˆ·å¾—åˆ°æˆæƒï¼ˆä¸401é”™è¯¯ç›¸å¯¹ï¼‰ï¼Œä½†æ˜¯è®¿é—®æ˜¯è¢«ç¦æ­¢çš„ã€‚ 404 NOT FOUND - [*]ï¼šç”¨æˆ·å‘å‡ºçš„è¯·æ±‚é’ˆå¯¹çš„æ˜¯ä¸å­˜åœ¨çš„è®°å½•ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ“ä½œï¼Œè¯¥æ“ä½œæ˜¯å¹‚ç­‰çš„ã€‚ 406 Not Acceptable - [GET]ï¼šç”¨æˆ·è¯·æ±‚çš„æ ¼å¼ä¸å¯å¾—ï¼ˆæ¯”å¦‚ç”¨æˆ·è¯·æ±‚JSONæ ¼å¼ï¼Œä½†æ˜¯åªæœ‰XMLæ ¼å¼ï¼‰ã€‚ 410 Gone -[GET]ï¼šç”¨æˆ·è¯·æ±‚çš„èµ„æºè¢«æ°¸ä¹…åˆ é™¤ï¼Œä¸”ä¸ä¼šå†å¾—åˆ°çš„ã€‚ 422 Unprocesable entity - [POST/PUT/PATCH] å½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå‘ç”Ÿä¸€ä¸ªéªŒè¯é”™è¯¯ã€‚ 500 INTERNAL SERVER ERROR - [*]ï¼šæœåŠ¡å™¨å‘ç”Ÿé”™è¯¯ï¼Œç”¨æˆ·å°†æ— æ³•åˆ¤æ–­å‘å‡ºçš„è¯·æ±‚æ˜¯å¦æˆåŠŸã€‚  çŠ¶æ€ç çš„å®Œå…¨åˆ—è¡¨å‚è§ è¿™é‡Œ\né”™è¯¯å¤„ç†(ERROR handling) å¦‚æœçŠ¶æ€ç æ˜¯4XXï¼Œå°±åº”è¯¥å‘ç”¨æˆ·è¿”å›å‡ºé”™ä¿¡æ¯ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¿”å›çš„ä¿¡æ¯ä¸­å°†errorä½œä¸ºé”®åï¼Œå‡ºé”™ä¿¡æ¯\u0008ä½œä¸ºé”®å€¼å³å¯ {error:\u0026quot;Invalid API key\u0026quot;}  è¿”å›ç»“æœ é’ˆå¯¹ä¸åŒæ“ä½œï¼Œ æœåŠ¡å™¨å‘ç”¨æˆ·è¿”å›çš„ç»“æœåº”è¯¥ç¬¦åˆä»¥ä¸‹è§„èŒƒ GET /collectionï¼šè¿”å›èµ„æºå¯¹è±¡çš„åˆ—è¡¨ï¼ˆæ•°ç»„ï¼‰ GET /collection/resourceï¼šè¿”å›å•ä¸ªèµ„æºå¯¹è±¡ POST /collectionï¼šè¿”å›æ–°ç”Ÿæˆçš„èµ„æºå¯¹è±¡ PUT /collection/resourceï¼šè¿”å›å®Œæ•´çš„èµ„æºå¯¹è±¡ PATCH /collection/resourceï¼šè¿”å›å®Œæ•´çš„èµ„æºå¯¹è±¡ DELETE /collection/resourceï¼šè¿”å›ä¸€ä¸ªç©ºæ–‡æ¡£  Hypermedia API RESTful APIæœ€å¥½åšåˆ°Hypermediaï¼Œå³è¿”å›ç»“æœä¸­æä¾›é“¾æ¥ï¼Œè¿å‘å…¶ä»–APIæ–¹æ³•ï¼Œä½¿å¾—ç”¨æˆ·ä¸æŸ¥æ–‡æ¡£ï¼Œä¹ŸçŸ¥é“ä¸‹ä¸€æ­¥åº”è¯¥åšä»€ä¹ˆã€‚ æ¯”å¦‚ï¼Œå½“ç”¨æˆ·å‘api.example.comçš„æ ¹ç›®å½•å‘å‡ºè¯·æ±‚ï¼Œä¼šå¾—åˆ°è¿™æ ·ä¸€ä¸ªæ–‡æ¡£ã€‚ ```text {\u0026quot;link\u0026quot;: { \u0026quot;rel\u0026quot;: \u0026quot;collection https://www.example.com/zoos\u0026quot;, \u0026quot;href\u0026quot;: \u0026quot;https://api.example.com/zoos\u0026quot;, \u0026quot;title\u0026quot;: \u0026quot;List of zoos\u0026quot;, \u0026quot;type\u0026quot;: \u0026quot;application/vnd.yourformat+json\u0026quot; }} ``` ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œæ–‡æ¡£ä¸­æœ‰ä¸€ä¸ªlinkå±æ€§ï¼Œç”¨æˆ·è¯»å–è¿™ä¸ªå±æ€§å°±çŸ¥é“ä¸‹ä¸€æ­¥è¯¥è°ƒç”¨ä»€ä¹ˆAPIäº†ã€‚relè¡¨ç¤ºè¿™ä¸ªAPIä¸å½“å‰ç½‘å€çš„å…³ç³»ï¼ˆcollectionå…³ç³»ï¼Œå¹¶ç»™å‡ºè¯¥collectionçš„ç½‘å€ï¼‰ï¼Œhrefè¡¨ç¤ºAPIçš„è·¯å¾„ï¼Œtitleè¡¨ç¤ºAPIçš„æ ‡é¢˜ï¼Œtypeè¡¨ç¤ºè¿”å›ç±»å‹ã€‚ Hypermedia APIçš„è®¾è®¡è¢«ç§°ä¸ºHATEOASã€‚Githubçš„APIå°±æ˜¯è¿™ç§è®¾è®¡ï¼Œè®¿é—® api.github.com ä¼šå¾—åˆ°ä¸€ä¸ªæ‰€æœ‰å¯ç”¨APIçš„ç½‘å€åˆ—è¡¨ã€‚ { \u0026quot;current_user_url\u0026quot;: \u0026quot;https://api.github.com/user\u0026quot;, \u0026quot;authorizations_url\u0026quot;: \u0026quot;https://api.github.com/authorizations\u0026quot;, // ... } ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæƒ³è·å–å½“å‰ç”¨æˆ·çš„ä¿¡æ¯ï¼Œåº”è¯¥å»è®¿é—® api.github.com/user ï¼Œç„¶åå°±å¾—åˆ°äº†ä¸‹é¢ç»“æœã€‚ { \u0026quot;message\u0026quot;: \u0026quot;Requires authentication\u0026quot;, \u0026quot;documentation_url\u0026quot;: \u0026quot;https://developer.github.com/v3\u0026quot; } ä¸Šé¢ä»£ç è¡¨ç¤ºï¼ŒæœåŠ¡å™¨ç»™å‡ºäº†æç¤ºä¿¡æ¯ï¼Œä»¥åŠæ–‡æ¡£çš„ç½‘å€ã€‚  å…¶ä»– (1) APIçš„èº«ä»½è®¤è¯åº”è¯¥ä½¿ç”¨OAuth 2.0æ¡†æ¶ã€‚ (2) æœåŠ¡å™¨è¿”å›çš„æ•°æ®æ ¼å¼ï¼Œåº”è¯¥å°½é‡ä½¿ç”¨JSONï¼Œé¿å…ä½¿ç”¨XMLã€‚  ","date":"2019-09-12T11:43:08+08:00","permalink":"https://sunnnner.github.io/p/restful_api%E8%AE%BE%E8%AE%A1%E6%8C%87%E5%8D%97/","title":"RESTful_APIè®¾è®¡æŒ‡å—"},{"content":"æˆ‘ä»¬ä½¿ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·selenium pip install selenium\nPhantomJS åŸºäºwebkitçš„æ— ç•Œé¢æµè§ˆå™¨\nubuntuä½¿ç”¨apt-get install phantomjs MACä½¿ç”¨bew cask install phantomjs\nChromedriver\nä¸seleniumé…åˆå› ä¸ºphantomjså·²ç»ä¸æ”¯æŒselenium å¦‚æœä½¿ç”¨Chromeè¿›è¡Œæµ‹è¯•ï¼Œéœ€è¦ä½¿ç”¨xvfbï¼Œ Xvirtual framebuffer (xvfb)è™šæ‹Ÿå¸§ç¼“å†²å™¨ï¼Œ ç®€å•æ¥è¯´å®ƒå¯ä»¥ç›´æ¥å¤„ç†windowçš„å›¾å½¢åŒ–åŠŸèƒ½ï¼Œå¹¶ä¸”ä¸ä¼šè¾“å‡ºåˆ°å±å¹•ä¸Šï¼Œè¿™å°±æ‘†è„±äº†å¯¹å¯è§†çª—å£çš„ä¾èµ–  MACå®‰è£…brew cask install chromedriver macå®‰è£…xvfb(å¯é€‰) pip install xvfbwrapper\n","date":"2019-09-11T11:42:10+08:00","permalink":"https://sunnnner.github.io/p/%E5%8A%A8%E6%80%81%E7%BD%91%E9%A1%B5%E7%88%AC%E5%8F%96/","title":"åŠ¨æ€ç½‘é¡µçˆ¬å–"},{"content":"sqlä¿®æ”¹å­—æ®µé•¿åº¦çš„è¯­æ³• alter table è¡¨å modify å­—æ®µå å­—æ®µç±»å‹;\næ ‡å‡†sqlæ‰€æœ‰éƒ½é€‚ç”¨ alter table æ•°æ®åº“.è¡¨å modify å­—æ®µå å­—æ®µç±»å‹;\nä¿®æ”¹å­—æ®µååç§° alter table æ•°æ®åº“å è¡¨å column col1 to col2;\næ·»åŠ å­—æ®µ alter table æ•°æ®åº“å.è¡¨å add å­—æ®µå ç±»å‹;\n","date":"2019-09-10T11:41:14+08:00","permalink":"https://sunnnner.github.io/p/sql%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5%E9%95%BF%E5%BA%A6/","title":"Sqlä¿®æ”¹å­—æ®µé•¿åº¦"},{"content":"è·¨åŸŸ æµè§ˆå™¨ä»ä¸€ä¸ªåŸŸåçš„ç½‘é¡µå»è¯·æ±‚å¦ä¸€ä¸ªåŸŸåçš„èµ„æºæ—¶,æµè§ˆå™¨å¤„äºå®‰å…¨çš„è€ƒè™‘,ä¸å…è®¸ä¸åŒæºçš„è¯·æ±‚ åŒæºç­–ç•¥ï¼šåè®®ç›¸åŒï¼Œ åŸŸåç›¸åŒï¼Œ ç«¯å£ç›¸åŒ å¤„ç†åŠæ³•ï¼š é€šè¿‡JSONPè·¨åŸŸ JSONæ˜¯ä¸€ç§æ•°æ®äº¤æ¢æ ¼å¼ JSONPæ˜¯ä¸€ç§éå®˜æ–¹çš„è·¨åŸŸæ•°æ®äº¤äº’åè®® JSONPæ˜¯åŒ…å«åœ¨å‡½æ•°è°ƒç”¨ä¸­çš„json sjonpæ˜¯åŒ…å«åœ¨å‡½æ•°è°ƒç”¨ä¸­çš„json scriptæ ‡ç­¾ä¸æ”¶åŒæºç­–ç•¥çš„å½±å“ï¼Œæ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªscriptæ ‡ç­¾ï¼Œä¼ é€’URLï¼Œ åŒæ—¶ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°çš„åå­— æœåŠ¡å™¨å¾—åˆ°åå­—åï¼Œ è¿”å›æ•°æ®æ—¶ä¼šç”¨è¿™ä¸ªå‡½æ•°åæ¥åŒ…è£¹æ•°æ®ï¼Œ å®¢æˆ·ç«¯è·å–åˆ°æ•°æ®ä¹‹åï¼Œ ç«‹å³å§scriptæ ‡ç­¾åˆ æ‰ corsï¼šè·¨åŸŸèµ„æºå…±äº« ä½¿ç”¨è‡ªå®šä¹‰çš„HTTPå¤´éƒ¨å…è®¸æµè§ˆå™¨å’ŒæœåŠ¡å™¨ç›¸äº’é€šä¿¡ å¦‚æœæ˜¯ç®€å•è¯·æ±‚,ç›´æ¥è®¾ç½®å…è®¸è®¿é—®çš„åŸŸåï¼š å…è®¸ä½ çš„åŸŸåæ¥è·å–æˆ‘çš„æ•°æ® response[â€˜Access-Control-Allow-Originâ€˜] = â€œ*â€ å¦‚æœæ˜¯å¤æ‚è¯·æ±‚,é¦–å…ˆä¼šå‘é€optionsè¯·æ±‚åšé¢„æ£€,ç„¶åå†å‘é€çœŸæ­£çš„PUT/POSTâ€¦.è¯·æ±‚ å› æ­¤å¦‚æœå¤æ‚è¯·æ±‚æ˜¯PUTç­‰è¯·æ±‚,åˆ™æœåŠ¡ç«¯éœ€è¦è®¾ç½®å…è®¸æŸè¯·æ±‚ å¦‚æœå¤æ‚è¯·æ±‚è®¾ç½®äº†è¯·æ±‚å¤´ï¼Œåˆ™æœåŠ¡ç«¯éœ€è¦è®¾ç½®å…è®¸æŸè¯·æ±‚å¤´ ç®€å•è¯·æ±‚ï¼š ä¸€æ¬¡è¯·æ±‚ éç®€å•è¯·æ±‚ï¼š ä¸¤æ¬¡è¯·æ±‚ï¼Œåœ¨å‘é€æ•°æ®ä¹‹å‰ä¼šå…ˆå‘ä¸€æ¬¡è¯·æ±‚ç”¨äºåšâ€œé¢„æ£€â€ï¼Œ åªæœ‰â€œé¢„æ£€â€é€šè¿‡åæ‰å†å‘é€ä¸€æ¬¡è¯·æ±‚ç”¨äºæ•°æ®ä¼ è¾“ã€‚ åªè¦åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸¤å¤§æ¡ä»¶ï¼Œå°±å±äºç®€å•è¯·æ±‚ã€‚ (1) è¯·æ±‚æ–¹æ³•æ˜¯ä»¥ä¸‹ä¸‰ç§æ–¹æ³•ä¹‹ä¸€ï¼šHEAD GET POST (2)HTTPçš„å¤´ä¿¡æ¯ä¸è¶…å‡ºä»¥ä¸‹å‡ ç§å­—æ®µï¼š  1 2 3 4 5  Accept Accept-Language Content-Language Last-Event-ID Content-Typeï¼šåªé™äºä¸‰ä¸ªå€¼application/x-www-form-urlencodedã€multipart/form-dataã€ text/plain   JSONPå’ŒCORSï¼š\n1.JSONPåªèƒ½å®ç°GETè¯·æ±‚ï¼Œè€ŒCORSæ”¯æŒæ‰€æœ‰ç±»å‹çš„HTTPè¯·æ±‚ 2.jsonpéœ€è¦clientå’Œserverç«¯çš„ç›¸äº’é…åˆ 3.corsåœ¨clientç«¯æ— éœ€è®¾ç½®ï¼Œserverç«¯éœ€è¦é’ˆå¯¹ä¸åŒçš„è¯·æ±‚ï¼Œæ¥åšheadå¤´çš„å¤„ç† ","date":"2019-09-09T11:39:55+08:00","permalink":"https://sunnnner.github.io/p/%E4%BB%80%E4%B9%88%E6%98%AF%E8%B7%A8%E5%9F%9F%E5%8F%8A%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/","title":"ä»€ä¹ˆæ˜¯è·¨åŸŸåŠè§£å†³åŠæ³•"},{"content":"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Django_rest_framework èƒ½è‡ªåŠ¨ç”Ÿæˆrestfulè§„èŒƒçš„API\nä»£ç ç®€ä»‹ å¹¶ä¸”å¼€å‘é€Ÿåº¦å¿«  Django_rest_frameworkæ¡†æ¶æœ‰ä»€ä¹ˆç»„ä»¶ åºåˆ—åŒ–ç»„ä»¶ï¼šserializers å¯¹querysetåºåˆ—åŒ–åŠå¯¹è¯·æ±‚æ•°æ®æ ¼å¼æ ¡éªŒ\nè·¯ç”±ç»„ä»¶ï¼šrouters è¿›è¡Œè·¯ç”±å¼€å‘ è§†å›¾ç»„ä»¶ï¼š ModelViewSet å¸®åŠ©å¼€å‘è€…æä¾›äº†ä¸€äº›ç±»ã€‚ å¹¶åœ¨ç±»ä¸­æä¾›äº†å¤šä¸ªæ–¹æ³• è®¤è¯ç»„ä»¶ï¼š å†™ä¸€ä¸ªç±»å¹¶æ³¨å†Œåˆ°é€‰çº¿ç±»ï¼ˆauthentication_classesï¼‰ï¼Œ å†ç±»çš„authticateæ–¹æ³•ä¸­ç¼–å†™è®¤è¯é€»è¾‘ æƒé™ç»„ä»¶ï¼šå†™ä¸€ä¸ªç±»å¹¶æ³¨å†Œåˆ°æƒé™ç±»ï¼ˆpermission_classesï¼‰, åœ¨ç±»ä¸­çš„has_permissionæ–¹æ³•ä¸­ç¼–å†™è®¤è¯é€»è¾‘ é¢‘ç‡é™åˆ¶ï¼š å†™ä¸€ä¸ªç±»å¹¶æ³¨å†Œåˆ°é¢‘ç‡ç±»ï¼ˆthrottle_classesï¼‰, åœ¨ç±»ä¸­çš„allow_request/waitæ–¹æ³•ä¸­ç¼–å†™è®¤è¯é€»è¾‘ è§£æå™¨ é€‰æ‹©å¯¹æ•°æ®è§£æçš„ç±»ï¼Œ åœ¨è§£æç±»ä¸­æ³¨å†Œ(parser_classes) æ¸²æŸ“å™¨ å®šä¹‰æ•°æ®å¦‚ä½•æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼Œ åœ¨æ¸²æŸ“å™¨ç±»ä¸­æ³¨å†Œ(render_classes) åˆ†é¡µ å¯¹è·å–åˆ°çš„æ•°æ®è¿›è¡Œåˆ†é¡µå¤„ç† pagination_class ç‰ˆæœ¬ ç‰ˆæœ¬æ§åˆ¶ç”¨æ¥åœ¨ä¸åŒçš„å®¢æˆ·ç«¯ä½¿ç”¨ä¸åŒçš„è¡Œä¸º åœ¨URLä¸­è®¾ç½®versionå‚æ•°ï¼Œ ç”¨æˆ·è¯·æ±‚æ—¶å€™ä¼ å…¥å‚æ•°ï¼Œ åœ¨request.versionä¸­è·å–ç‰ˆæœ¬, æ ¹æ®ç‰ˆæœ¬ä¸åŒï¼Œåšä¸åŒå¤„ç†  django rest frameworkæ¡†æ¶çš„è®¤è¯æµç¨‹ ç”¨æˆ·è¯·æ±‚èµ°è¿›æ¥è¿›å…¥APIViewï¼Œ åˆå§‹åŒ–äº†é»˜è®¤çš„è®¤è¯æ–¹å¼\nè¿›å…¥APIView.dispatch()æ–¹æ³•ï¼Œ initialæ–¹æ³•è°ƒç”¨äº†request.user å¦‚æœæˆ‘ä»¬é…ç½®äº†è®¤è¯ç±»ï¼Œ èµ°æˆ‘ä»¬è‡ªå·±è®¤è¯ç±»ä¸­çš„authenticationæ–¹æ³•  django rest frameworkå¦‚ä½•å®ç°çš„ç”¨æˆ·è®¿é—®é¢‘ç‡æ§åˆ¶ ä½¿ç”¨ip/ç”¨æˆ·è´¦æˆ·ä½œä¸ºå»ºï¼Œ æ¯æ¬¡è®¿é—®æ—¶é—´ä½œä¸ºå€¼ï¼Œ æ„é€ ä¸€ä¸ªå­—å…¸æ•°æ®ï¼Œ å­˜èµ·æ¥ï¼Œ æ¯æ¬¡è®¿é—®å¯¹æ—¶é—´åˆ—è¡¨è¿›è¡Œåˆ¤æ–­\næŠŠæ²¡æœ‰è®¿é—®çš„è¶…æ—¶çš„åˆ æ‰ã€‚ åœ¨è®¡ç®—åˆ—è¡¨å‰©ä½™çš„å…ƒç´ å°±èƒ½åšåˆ°é¢‘ç‡é™åˆ¶äº† åŒ¿åè´¦æˆ·ï¼Œ ä½¿ç”¨IPæ§åˆ¶ï¼Œ ä½†æ˜¯æ— æ³•å®Œå…¨æ§åˆ¶ï¼Œ å› ä¸ºç”¨æˆ·å¯ä»¥æ›´æ¢ä»£ç†IP ç™»é™†ç”¨æˆ·ä½¿ç”¨è´¦å·æ§åˆ¶ï¼Œä½†æ˜¯å¦‚æœæœ‰å¾ˆå¤šè´¦å·ï¼Œä¹Ÿæ— æ³•é™åˆ¶  å¦‚ä½•å®ç°ç”¨æˆ·ç™»é™†è®¤è¯ cookice session\ntoken ç™»é™†æˆåŠŸåç”Ÿæˆçš„åŠ å¯†å­—ç¬¦ä¸² JWTï¼š json wed token ç¼©å†™ï¼Œ ä»–è®²ç”¨æˆ·ä¿¡æ¯åŠ å¯†åˆ°tokenä¸­ æœåŠ¡å™¨ä¸ä¿å­˜ä»»ä½•ç”¨æˆ·ä¿¡æ¯ï¼Œ æœåŠ¡å™¨é€šè¿‡ä½¿ç”¨ä¿å­˜çš„å¯†åŒ™æ¥éªŒè¯tokençš„æ­£ç¡®æ€§  rest_frameworkåºåˆ—åŒ–ç»„ä»¶çš„ä½œç”¨,ä»¥åŠä¸€äº›å¤–é”®å…³ç³»çš„é’©å­æ–¹æ³•\nä½œç”¨ï¼šå¸®åŠ©æˆ‘ä»¬åºåˆ—åŒ–æ•°æ® ```python 1.choices get_å­—æ®µå_display 2.ForeignKey source=orm æ“ä½œ 3.ManyToManyFiled SerializerMethodField() def get_å­—æ®µå(): return è‡ªå®šä¹‰ ```  PV å’Œ UV\npv :é¡µé¢è®¿é—®é‡æ‰“å¼€ä¸€æ¬¡ç®—ä¸€æ¬¡åˆ·æ–°ä¹Ÿç®— uv ï¼š ç‹¬ç«‹è®¿é—®æ•°ï¼Œ ä¸€å°ç”µè„‘ç®—ä¸€ä¸ªè®¿å®¢  ","date":"2019-09-08T11:37:47+08:00","permalink":"https://sunnnner.github.io/p/django_rest_framework/","title":"Django_rest_framework"},{"content":"RPC\nè¿œç¨‹è¿‡ç¨‹ä¸­è°ƒç”¨(RPC) æ˜¯ä¸€ç§åè®®ï¼Œ ç¨‹åºå¯ä½¿ç”¨è¿™ç§åè®®å‘ç½‘ç»œä¸­çš„å¦ä¸€å°è®¡ç®—æœºä¸Šçš„ç¨‹åºè¯·æ±‚æœåŠ¡ RPCé‡‡ç”¨å®¢æˆ·æœº/ æœåŠ¡å™¨æ¨¡å¼ï¼Œ è¯·æ±‚ç¨‹åºå°±æ˜¯ä¸€ä¸ªå®¢æˆ·æœºï¼Œ è€ŒæœåŠ¡æä¾›ç¨‹åºå°±æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ first å®¢æˆ·æœºè°ƒç”¨è¿›ç¨‹å‘é€ä¸€ä¸ªæœ‰è¿›ç¨‹å‚æ•°çš„è°ƒç”¨ä¿¡æ¯åˆ°æœåŠ¡è¿›ç¨‹ï¼Œç„¶åç­‰å¾…åº”ç­”ä¿¡æ¯ second åœ¨æœåŠ¡ç«¯ï¼Œ è¿›ç¨‹ä¿æŒç¡çœ çŠ¶æ€çŸ¥é“è°ƒç”¨ä¿¡æ¯åˆ°è¾¾ä¸ºæ­¢ï¼Œ å½“ä¸€ä¸ªè°ƒç”¨åˆ°è¾¾ï¼Œ æœåŠ¡å™¨æˆ–å¾—æ™‹åŸå‚æ•°ï¼Œ ç»“æœï¼Œ å‘é€ç­”å¤ä¿¡æ¯ï¼Œ ç„¶åç­‰å¾…ä¸‹ä¸€ä¸ªè°ƒç”¨ä¿¡æ¯ next å®¢æˆ·ç«¯è°ƒç”¨è¿›ç¨‹æ¥å—ç­”å¤ä¿¡æ¯ï¼Œ æˆ–å¾—è¿›ç¨‹ç»“æœï¼Œ ç„¶åè°ƒç”¨æ‰§è¡Œç»§ç»­è¿›è¡Œ  ä¸ºä»€ä¹ˆè¦ä½¿ç”¨API\nç³»ç»Ÿä¹‹é—´ä¸ºäº†è°ƒç”¨æ•°æ® æ•°æ®çš„ä¼ è¾“æ ¼å¼ï¼šjson, xml  ","date":"2019-09-07T11:36:55+08:00","permalink":"https://sunnnner.github.io/p/%E4%BB%80%E4%B9%88%E6%98%AFrpc/","title":"ä»€ä¹ˆæ˜¯RPC"},{"content":"restful åªæ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼æˆ–è€…è¯´æ˜¯ä¸€ç§è®¾è®¡é£æ ¼ï¼Œå®ƒåªæ˜¯ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªè®¾è®¡çš„åŸåˆ™å’Œçº¦æŸçš„æ¡ä»¶ï¼Œä¸»è¦ç”¨äºå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„äº¤äº’\næˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚åšçš„æ›´åŠ ç®€æ´ï¼Œ æ›´æœ‰å±‚æ¬¡\nå®ƒé‡Œé¢æä¾›äº†ä¸€äº›è§„èŒƒï¼Œæ¯”å¦‚restfulæå€¡é¢å‘èµ„æºç¼–ç¨‹ï¼Œ åœ¨URLæ¥å£ä¸­å°½é‡ä½¿ç”¨åè¯ï¼Œ ä¸è¦ä½¿ç”¨åŠ¨è¯\nåœ¨restfulæ¨èä½¿ç”¨HTTPSåè®®ï¼Œæ›´åŠ å®‰å…¨\nå°½é‡åœ¨URLä¸­ä½“ç°ç‰ˆæœ¬å·\nrestfulçš„method \u0026lt;GET/ POST/ PUT/ DELETE/ PATCH\u0026gt;\nå“åº”åº”è¯¥è®¾ç½®çŠ¶æ€ç \næœ‰è¿”å›å€¼ï¼Œå¹¶ä¸”ä¸ºjsonæ ¼å¼\nè¿”å›ç»“æœä¸­è¦æä¾›å¸®åŠ©é“¾æ¥ï¼Œ å³APIæœ€å¥½åšå¥½Hypermedia\n","date":"2019-09-06T11:36:12+08:00","permalink":"https://sunnnner.github.io/p/restful%E8%A7%84%E8%8C%83/","title":"Restfulè§„èŒƒ"},{"content":"FBV  fbvå°±æ˜¯åœ¨urlä¸­ä¸€ä¸ªè·¯å¾„å¯¹åº”ä¸€ä¸ªå‡½æ•°\n 1 2 3 4  urlpatterns = [ url(r\u0026#39;^admin/\u0026#39;, admin.site.urls), url(r\u0026#39;^index/\u0026#39;, views.index) ]   è§†å›¾å‡½æ•°ä¸­ 1 2  def index(request): return render(request, \u0026#39;index.html\u0026#39;)   CBV  cbvå°±æ˜¯åœ¨urlä¸­ä¸€ä¸ªè·¯å¾„å¯¹åº”ä¸€ä¸ªç±»\n 1 2 3 4  urlpatterns = [ url(r\u0026#39;^admin/\u0026#39;, admin.site.urls), url(r\u0026#39;^index/\u0026#39;, views.IndexView.as_views()) # æ‰§è¡Œç±»åé¢çš„as_view()æ–¹æ³• ]   è§†å›¾å‡½æ•°ä¸­ 1 2 3 4 5 6 7 8 9  from django.views import View class IndexView(View): # ä»¥getå½¢å¼è®¿é—®ä¼šæ‰§è¡Œgetå‡½æ•°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è·å–æ•°æ® def get(self, *args, **keargs): return HttpResponse(\u0026#39;6666\u0026#39;) # ä»¥postå½¢å¼è®¿é—®çš„è¯ä¼šæ‰§è¡Œpostå‡½æ•°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å‘é€æ•°æ® def post(self, *args, **kwargs): return HttpResponse(\u0026#39;post ok\u0026#39;)   æ³¨æ„: cbvå®šä¹‰ç±»çš„æ—¶å€™å¿…é¡»è¦ç»§æ‰¿view åœ¨å†™URLçš„æ—¶å€™å¿…é¡»è¦åŠ as_view ç±»é‡Œé¢ä½¿ç”¨formè¡¨å•æäº¤çš„è¯åªæœ‰getå’Œpostæ–¹æ³• restfulè§„èŒƒï¼šâ€™getâ€™è·å–æ•°æ®, â€˜postâ€™åˆ›å»ºæ–°æ•°æ®, â€˜putâ€™æ›´æ–°, â€˜patchâ€™å±€éƒ¨æ›´æ–°, â€˜deleteâ€™åˆ é™¤, â€˜headâ€™, â€˜optionsâ€™, â€˜traceâ€™  CBVé‡æ–°å®šä¹‰dispatchå‡½æ•° æ‰€æœ‰çš„æ–¹æ³•æœ¬è´¨ä¸Šéƒ½æ˜¯é€šè¿‡dispatchè¿™ä¸ªå‡½æ•°åå°„æ‰§è¡Œï¼Œå¦‚æœæƒ³è¦åœ¨æ‰§è¡Œgetæˆ–postæ–¹æ³•å‰æ‰§è¡Œå…¶ä»–æ­¥éª¤ï¼Œå¯ä»¥é‡å†™dispatch ","date":"2019-09-05T11:34:25+08:00","permalink":"https://sunnnner.github.io/p/django%E4%B8%AD%E7%9A%84fbv%E5%92%8Ccbv/","title":"Djangoä¸­çš„FBVå’ŒCBV"},{"content":" æœ€è¿‘æŸ¥æ‰¾å¤§å®¹é‡å­˜å‚¨å·¥å…·ï¼Œæƒ³åˆ°äº†å…è´¹ç‰ˆçš„Googleäº‘ç›˜ï¼Œè¯¢é—®äº†ä¸€ä¸‹æœ‰ä¸€ä¸ªæ— é™ç©ºé—´çš„äº‘ç›˜ï¼Œè¯ä¸å¤šè¯´å¼€å§‹æï¼Œåœ¨æ·˜å®ä¹°äº†ä¸ªè´¦å·å¼€å§‹é…åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œä½†æ˜¯å‘ç°å¹¶ä¸æ˜¯è¿™ä¹ˆå¥½é…ï¼ŒæŸ¥æ‰¾äº†å¾ˆå¤šèµ„æ–™ï¼Œåˆ°æœ€åæœ‹å‹ç»™æˆ‘è¯´rcloneå¯ä»¥æŒ‚åœ¨Googleäº‘ç›˜ï¼ŒæŸ¥äº†ä¸€ä¸‹æœç„¶å¯ä»¥ï¼ŒæŠŠæ•™ç¨‹è´´å‡ºæ¥ä¸ºä»¥åæŸ¥çœ‹æ–¹ä¾¿  é¦–å…ˆå®‰è£…rclone wget https://www.moerats.com/usr/shell/rclone_debian.sh \u0026amp;\u0026amp; bash rclone_debian.sh  åˆå§‹åŒ–é…ç½® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98  rclone config n) New remote s) Set configuration password q) Quit config n/s/q\u0026gt; n name\u0026gt; Rats #éšä¾¿å¡«ï¼Œåé¢è¦ç”¨åˆ° Type of storage to configure. Choose a number from below, or type in your own value 1 / Amazon Drive \\ \u0026#34;amazon cloud drive\u0026#34; 2 / Amazon S3 (also Dreamhost, Ceph, Minio) \\ \u0026#34;s3\u0026#34; 3 / Backblaze B2 \\ \u0026#34;b2\u0026#34; 4 / Box \\ \u0026#34;box\u0026#34; 5 / Cache a remote \\ \u0026#34;cache\u0026#34; 6 / Dropbox \\ \u0026#34;dropbox\u0026#34; 7 / Encrypt/Decrypt a remote \\ \u0026#34;crypt\u0026#34; 8 / FTP Connection \\ \u0026#34;ftp\u0026#34; 9 / Google Cloud Storage (this is not Google Drive) \\ \u0026#34;google cloud storage\u0026#34; 10 / Google Drive \\ \u0026#34;drive\u0026#34; 11 / Hubic \\ \u0026#34;hubic\u0026#34; 12 / Local Disk \\ \u0026#34;local\u0026#34; 13 / Microsoft Azure Blob Storage \\ \u0026#34;azureblob\u0026#34; 14 / Microsoft OneDrive \\ \u0026#34;onedrive\u0026#34; 15 / Openstack Swift (Rackspace Cloud Files, Memset Memstore, OVH) \\ \u0026#34;swift\u0026#34; 16 / Pcloud \\ \u0026#34;pcloud\u0026#34; 17 / QingCloud Object Storage \\ \u0026#34;qingstor\u0026#34; 18 / SSH/SFTP Connection \\ \u0026#34;sftp\u0026#34; 19 / Webdav \\ \u0026#34;webdav\u0026#34; 20 / Yandex Disk \\ \u0026#34;yandex\u0026#34; 21 / http Connection \\ \u0026#34;http\u0026#34; Storage\u0026gt; 10 #é€‰æ‹©10ï¼ŒGoogle Drive Google Application Client Id - leave blank normally. client_id\u0026gt; #ç•™ç©º Google Application Client Secret - leave blank normally. client_secret\u0026gt; #ç•™ç©º Service Account Credentials JSON file path - needed only if you want use SA instead of interactive login. service_account_file\u0026gt; Remote config Use auto config? * Say Y if not sure * Say N if you are working on a remote or headless machine or Y didn\u0026#39;t work y) Yes n) No y/n\u0026gt; n #é€‰æ‹©n If your browser doesn\u0026#39;t open automatically go to the following link: https://accounts.google.com/o/oauth2/auth.... #å¤åˆ¶åˆ°æµè§ˆå™¨æ‰“å¼€ï¼Œè·å–éªŒè¯ç  Log in and authorize rclone for access Enter verification code\u0026gt; #å¡«å…¥ä¸Šé¢è·å–åˆ°çš„éªŒè¯ç  Configure this as a team drive? y) Yes n) No y/n\u0026gt; y #é€‰æ‹©y Fetching team drive list... No team drives found in your account-------------------- [Rats] client_id = client_secret = service_account_file = token = {\u0026#34;access_token\u0026#34;:\u0026#34;ya29.GltFBd7UJN2qrxdG8FnG_rMuB18ogb8QlujdL7glvXtfV\u0026#34;} team_drive = -------------------- y) Yes this is OK e) Edit this remote d) Delete this remote y/e/d\u0026gt; y #é€‰æ‹©y Current remotes: Name Type ==== ==== Rats drive e) Edit existing remote n) New remote d) Delete remote r) Rename remote c) Copy remote s) Set configuration password q) Quit config e/n/d/r/c/s/q\u0026gt; q #é€‰æ‹©qé€€å‡º   æŒ‚è½½ç¡¬ç›˜ï¼ˆè¿™é‡Œå‘æ¯”è¾ƒå¤šï¼‰   é¦–å…ˆæˆ‘ä»¬è¦åœ¨vpsä¸Šåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹(ä½œä¸ºGoogleäº‘ç›˜çš„è½½ä½“ç›˜)\nmkdir /root/GoogleDrive\n  é¦–å…ˆæˆ‘ä»¬å…ˆåˆ›å»ºäº‘ç›˜æ–‡ä»¶å¤¹\nrclone mkdir test\n  å…¶æ¬¡æˆ‘ä»¬ä½¿ç”¨rcloneå¼€å§‹æŒ‚è½½äº‘ç›˜\nrclone mount gdrive:test /root/GoogleDrive \u0026amp;\n   gdriveæ˜¯è°·æ­Œäº‘ç›˜æ ‡è¯†\n  å¸è½½æ–‡ä»¶å¤¹ fusermount -qzu GoogleDrive   GoogleDrive ä¸ºä½ æœ¬åœ°VPSè½½ä½“æ–‡ä»¶å¤¹\n  ä¸Šä¼ æ–‡ä»¶ rclone copy /root/test gdrive:test   /root/testä¸ºæœ¬åœ°æ–‡ä»¶ åé¢çš„ä¸ºè°·æ­Œäº‘ç›˜æ ‡è¯†åŠæ–‡ä»¶å¤¹åå­—\n  æ–‡ä»¶ä¸‹è½½ rclone copy gdrive:test /root/test   ä¸‹è½½åˆ°æœ¬åœ°vpsæ–‡ä»¶å¤¹ä¸‹\n   åˆ—è¡¨\nrclone ls gdrive:test\nrclone lsl gdrive:test\n   æ˜¾ç¤ºä¸Šä¼ æ—¶é—´ rclone lsd gdrive:test\n ","date":"2019-09-04T11:30:51+08:00","permalink":"https://sunnnner.github.io/p/rclone%E6%8C%82%E8%BD%BDgoogledrive/","title":"RcloneæŒ‚è½½googleDrive"},{"content":"   è¯­æ³• æè¿°     s.capitalize() è¿”å›å­—ç¬¦ä¸²sçš„å‰¯æœ¬ï¼Œå¹¶å°†é¦–å­—ç¬¦å˜ä¸ºå¤§å†™   s.center(width, char) è¿”å›sä¸­é—´éƒ¨åˆ†çš„ä¸€ä¸ªå­å­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸ºwidthï¼Œå¹¶ä½¿ç”¨ç©ºæ ¼æˆ–å¯é€‰çš„char(é•¿åº¦ä¸º1çš„å­—ç¬¦ä¸²)è¿›è¡Œå¡«å……   s.count(t, star, end) è¿”å›å­—ç¬¦ä¸²sä¸­ï¼ˆæˆ–åœ¨sçš„start:endåˆ†ç‰‡ä¸­ï¼‰å­å­—ç¬¦ä¸²tå‡ºç°çš„æ¬¡æ•°   s.encode(encoding,err) è¿”å›ä¸€ä¸ªbyteså¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä½¿ç”¨é»˜è®¤çš„ç¼–ç æ ¼å¼æˆ–æŒ‡å®šç¼–ç æ ¼å¼æ¥è¡¨ç¤ºè¯¥å­—ç¬¦ä¸²ï¼Œå¹¶æ ¹æ®å¯é€‰çš„errå‚æ•°å¤„ç†é”™è¯¯   s.expandtabs(size) è¿”å›sçš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå…¶ä¸­çš„åˆ¶è¡¨ç¬¦ä½¿ç”¨8ä¸ªæˆ–æŒ‡å®šæ•°é‡çš„ç©ºæ ¼æ›¿æ¢   s.find(t, start, end) è¿”å›tåœ¨sä¸­ï¼ˆæˆ–åœ¨sçš„start:endåˆ†ç‰‡ä¸­ï¼‰çš„æœ€å·¦ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±è¿”å›-1ï¼Œä½¿ç”¨str:find()åˆ™å¯ä»¥å‘ç°ç›¸åº”çš„æœ€å³ä½ç½®   s.format() è¿”å›æŒ‰æŒ‡å®šå‚æ•°è¿›è¡Œæ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²å‰¯æœ¬ï¼Œ   s.index(t, start, end) è¿”å›sæœ€å·¦è¾¹tçš„ä½ç½®(ä½ç½®æˆ–åœ¨start:endçš„åˆ‡ç‰‡ä¸­)   s.isalnum() æ˜¯å¦éƒ½ä¸ºå­—æ¯æ•°å­—æ˜¯è¿”å›true   s.isalpha() æ˜¯å¦éƒ½ä¸ºå­—æ¯   s.isdecimal() æ˜¯ä¸ºéƒ½ä¸ºunicodeçš„åŸºæ•°ä¸º10çš„æ•°å­—   s.isdigit() æ˜¯å¦å…¨ä¸ºæ•°å­—   s.isidentifier() \u0008 æ˜¯å¦ä¸ºæœ‰æ•ˆçš„æ ‡è¯†ç¬¦   s.islower() æ˜¯å¦å…¨ä¸ºå°å†™   s.isnumeric() æ˜¯å¦ä¸ºæ•°å­—æˆ–å°æ•°   s.isprintable() æ˜¯å¦ä¸ºå¯æ‰“å°çš„åŒ…æ‹¬å­—ç¬¦ï¼Œä¸åŒ…æ‹¬æ¢è¡Œ   s.isspace() æ˜¯å¦ä¸ºç©ºç™½å­—ç¬¦   s.istitle() æ˜¯å¦é¦–å­—æ¯å¤§å†™   s.isupper() æ˜¯å¦\u0008å…¨ä¸ºå¤§å†™   s.join(seq) è¿”å›seqä¸­æ¯ä¸ªé¡¹é“¾æ¥èµ·æ¥åçš„ç»“æœ   s.ljust(width, char) è¿”å›é•¿åº¦ä¸ºwidthçš„å­—ç¬¦ä¸²ä½¿ç”¨ç©ºæ ¼æˆ–å¯é€‰çš„charè¿›è¡Œå¡«å……   s.lower() å°†sä¸­çš„å­—ç¬¦å˜ä¸ºå°å†™   s.maketrans() ä¸str.translatr()ç±»ä¼¼   s.partition() è¿”å›åŒ…å«3ä¸ªå­—ç¬¦ä¸²çš„è¿œè¶³   s.replace(t, u, n) æ›¿æ¢   s.split(t, n) ä»¥tè¿›è¡Œåˆ‡å‰²   s.splitlines(f) è¿”å›åœ¨è¡Œç»ˆç»“ç¬¦å¤„è¿›è¡Œåˆ†å‰²äº§ç”Ÿçš„è¡Œåˆ—è¡¨ï¼Œå¹¶å‰¥ç¦»\u0008è¡Œç»ˆç»“ç¬¦   s.satrtwith() ä»¥â€¦å¼€å¤´   s.strip(char) å»é™¤å­—ç¬¦ä¸²ç©ºæ ¼   s.swapcase() å°†å¤§å†™å˜ä¸ºå°å†™å°å†™è½¬å¤§å†™   s.title() é¦–å­—æ¯å˜å¤§å†™   s.translate()    s.upper() è¿”å›såˆ†å¤§å†™åŒ–ç‰ˆæœ¬   s.zfill(w)     ","date":"2019-09-03T11:25:09+08:00","permalink":"https://sunnnner.github.io/p/python%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C/","title":"Pythonå­—ç¬¦ä¸²æ“ä½œ"},{"content":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46  1.åœ¨ä¸‹è½½æœ€æ–°pythonï¼ˆ3.6ï¼‰ï¼šwget https://www.python.org/ftp/python/3.6.1/python-3.6.1-macosx10.6.pkg 2.å®‰è£…python-3.6.1-macosx10.6.pkg 3.åˆ é™¤macè‡ªå¸¦çš„python2.7ï¼š sudo rm -R /System/Library/Frameworks/Python.framework/Versions/2.7 4.æŠŠåˆšå®‰è£…å¥½çš„pythonç§»åˆ°åŸæœ¬ç³»ç»Ÿpythonä½ç½®ï¼š sudo mv /Library/Frameworks/Python.framework/Versions/3.6 /System/Library/Frameworks/Python.framework/Versions 5.ä¿®æ”¹æ–‡ä»¶æ‰€å±çš„Groupï¼Œè®¾ç½®Groupä¸ºwheelï¼š sudo chown -R root:wheel /System/Library/Frameworks/Python.framework/Versions/3.6``` 6.æ›´æ–°Currentçš„Link sudo rm /System/Library/Frameworks/Python.framework/Versions/Current sudo ln -s /System/Library/Frameworks/Python.framework/Versions/3.6 /System/Library/Frameworks/Python.framework/Versions/Current 7.åˆ æ‰åŸæ¥çš„æ‰§è¡Œæ–‡ä»¶ sudo rm /usr/bin/pydoc sudo rm /usr/bin/python sudo rm /usr/bin/pythonw sudo rm /usr/bin/python-config sudo rm /usr/bin/easy_install sudo rm /usr/bin/pyvenv 8.å»ºç«‹æ–°çš„é“¾æ¥ sudo ln -s /System/Library/Frameworks/Python.framework/Versions/3.6/bin/pydoc3.6 /usr/bin/pydoc sudo ln -s /System/Library/Frameworks/Python.framework/Versions/3.6/bin/python3.6 /usr/bin/python sudo ln -s /System/Library/Frameworks/Python.framework/Versions/3.6/bin/pythonw3.6 /usr/bin/pythonw sudo ln -s /System/Library/Frameworks/Python.framework/Versions/3.6/bin/python3.6m-config /usr/bin/python-config sudo ln -s /System/Library/Frameworks/Python.framework/Versions/3.6/bin/pip3.6 /usr/bin/pip sudo ln -s /System/Library/Frameworks/Python.framework/Versions/3.6/bin/easy_install-3.6 /usr/bin/easy_install sudo ln -s /System/Library/Frameworks/Python.framework/Versions/3.6/bin/pyvenv-3.6 /usr/bin/pyvenv 9.æ·»åŠ ç¯å¢ƒå˜é‡ åˆ›å»º.bash_profileï¼š`touch .bash_profile` vimå‘½ä»¤æ‰“å¼€.bash_profileï¼š`vim .bash_profile` æ·»åŠ ç¯å¢ƒå˜é‡ï¼š Setting PATH for Python 3.6 The orginal version is saved in .bash_profile.pysave PATH=\u0026#34;/System/Library/Frameworks/Python.framework/Versions/3.6/bin:${PATH}\u0026#34; export PATH `alias python=\u0026#34;python3.6\u0026#34; source .bash_profile` 11.æµ‹è¯•æ˜¯å¦æˆåŠŸï¼š è¾“å…¥pythonå‘½ä»¤ï¼ŒæŸ¥çœ‹ç‰ˆæœ¬python   ","date":"2019-09-02T11:24:14+08:00","permalink":"https://sunnnner.github.io/p/%E4%BF%AE%E6%94%B9macos%E8%87%AA%E5%B8%A6python%E7%89%88%E6%9C%AC%E5%B0%BD%E9%87%8F%E4%B8%8D%E8%A6%81%E4%BF%AE%E6%94%B9/","title":"ä¿®æ”¹macosè‡ªå¸¦Pythonç‰ˆæœ¬ï¼ˆå°½é‡ä¸è¦ä¿®æ”¹ï¼‰"},{"content":"è™šæ‹Ÿç¯å¢ƒå®‰è£… å½“ç„¶é¦–å…ˆä½ å…ˆå»å®˜ç½‘ä¸‹è½½Python3.6 æ³¨æ„ä¸æ˜¯3.7 å®ƒç°åœ¨è¿˜ä¸å…¼å®¹ ä¸‹è½½å¥½äº†ä¹‹åå®‰è£…è¿™æ˜¯Macçš„è·¯å¾„åŒ… éšåé…ç½®ä¸‹é¢çš„è¯­å¥ pip3 install virtualenv å½“ç„¶è¿™é‡Œä½ è¦å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹æ¥å­˜æ”¾ä½ çš„è™šæ‹Ÿç¯å¢ƒ æˆ‘è¿™é‡Œæ˜¯workspace mkdir workspace  è™šæ‹Ÿç¯å¢ƒç®¡ç†åŒ…\npip3 install virtualenvwrapper  è™šæ‹Ÿç¯å¢ƒæ–‡ä»¶å¤¹ export WORKON_HOME=\u0026rsquo;~/workspace'\nè™šæ‹Ÿç¯å¢ƒPythonéœ€è¦Pythonç‰ˆæœ¬è¿›è¡Œå®‰è£… VIRTUALENVWRAPPER_PYTHON=\u0026quot;/Library/Frameworks/Python.framework/Versions/3.6/bin/python3.6\u0026quot;\nä½¿ç”¨å“ªä¸ªPythonç¯å¢ƒçš„è™šæ‹Ÿç¯å¢ƒå®‰è£…åŒ… source /Library/Frameworks/Python.framework/Versions/3.6/bin/virtualenvwrapper.sh\nPythonç¯å¢ƒé…ç½®\nå› ä¸ºTensorFlowåº“çš„å­¦ä¹ æˆ‘å®‰è£…è™šæ‹Ÿç¯å¢ƒå¯æ˜¯æˆ‘å¹¶ä¸æ€ä¹ˆä¼šå®‰è£…è™šæ‹Ÿç¯å¢ƒ å°±æ“…è‡ªåˆ é™¤äº†Macè‡ªå¸¦çš„Pythonç‰ˆæœ¬ä½¿ç”¨ç½‘ä¸Šçš„å®‰è£…é»˜è®¤çš„ç‰ˆæœ¬Python3.6 å¯æ˜¯è¿™æ˜¯é”™è¯¯çš„å†³å®šå®‰è£…äº†é»˜è®¤ç‰ˆæœ¬çš„3ã€‚6ä¹‹åpipå„ç§æŠ¥é”™ åˆ°æœ€åæˆ‘æ€»ç»“äº†ä¸€å¥è¯ åœ¨.zshrcï¼ˆå¦‚æœä½ å®‰è£…äº†oh_my_zshï¼‰å°±åŠ å…¥è¿™ä¸€æ¡shellè¯­å¥ è¿™æ¡è¯­å¥ä»£è¡¨äº†ä½ çš„é»˜è®¤Pythonå˜é‡çš„åœ°å€  Pythonç¯å¢ƒå˜é‡ export PATH=\u0026quot;/Library/Frameworks/Python.framework/Versions/3.6/bin:${PATH}\u0026quot;\n","date":"2019-09-01T11:22:47+08:00","permalink":"https://sunnnner.github.io/p/python%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E4%BB%A5%E5%8F%8A%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E7%9A%84%E5%AE%89%E8%A3%85/","title":"Pythonç‰ˆæœ¬æ§åˆ¶ä»¥åŠè™šæ‹Ÿç¯å¢ƒçš„å®‰è£…"},{"content":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  #! /bin/bash # file test operators # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ -e è¡¨ç¤ºempty é»˜è®¤æ–‡ä»¶æ˜¯ä¸ä¸ºç©º echo -e \u0026#34;Enter the name of file: ~\u0026#34; read filename # æ³¨æ„æ‹¬å·å†…ç©ºæ ¼ -e å°±æ˜¯existçš„æ„æ€,è¡¨ç¤ºæ–‡ä»¶æ˜¯å¦å­˜åœ¨ if [ -e $filename ] then echo \u0026#39;File found\u0026#39; else echo \u0026#39;file is not exist or not found\u0026#39; fi # æ£€æŸ¥æ˜¯å¦æ˜¯å¸¸è§„æ–‡ä»¶æˆ–è€…ç›®å½• -fè¡¨ç¤ºfile åˆ¤æ–­æ˜¯å¦æ˜¯å¸¸è§„çš„æ–‡ä»¶ if [ -f $filename ] then echo \u0026#34;$filenamefound\u0026#34; else echo \u0026#34;$filenameis not exist or not fount\u0026#34; fi # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æ˜¯ç©º if [ -s $filename ] then echo \u0026#34;$filenameis not empty\u0026#34; else echo \u0026#34;$filenameis empty\u0026#34; fi   ","date":"2019-08-20T11:22:13+08:00","permalink":"https://sunnnner.github.io/p/shell-%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95%E6%93%8D%E4%BD%9C/","title":"Shell æ–‡ä»¶æµ‹è¯•æ“ä½œ"},{"content":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70  ! /bin/bash this is an example of a if -then if-thenæ¯”è¾ƒæ•´æ•° score=91 if ((\u0026#34;$score\u0026#34;\u0026gt;90)) then echo \u0026#34;well done\u0026#34; fi if-then æ¯”è¾ƒå­—ç¬¦ä¸² word=abc if [$word=\u0026#34;abc\u0026#34;] then echo \u0026#34;condition is true\u0026#34; fi if-then-else word=abc if [ $word=\u0026#39;abccccc\u0026#39; ] then echo \u0026#39;f\u0026#39; else echo \u0026#39;false\u0026#39; fi if-then-elif-then-else num=6 if (($num\u0026gt;7)) then echo \u0026#39;6 is bigger\u0026#39; elif (($num\u0026lt;7)) then echo \u0026#39;7 is bigger\u0026#39; else echo \u0026#39;nonoooo\u0026#39; fi æ•´æ•°æ¯”è¾ƒç¬¦ -eq\t: (equal to)ç›¸ç­‰ ä¾‹å¦‚ï¼š if [ \u0026#34;$a\u0026#34; -eq \u0026#34;$b\u0026#34; ] -ne\t: (not equal to)ç›¸ç­‰ ä¾‹å¦‚ï¼š if [ \u0026#34;$a\u0026#34; -ne \u0026#34;$b\u0026#34; ] -gt\t: (greater than)å¤§äº ä¾‹å¦‚ï¼š if [ \u0026#34;$a\u0026#34; -gt \u0026#34;$b\u0026#34; ] -ge\t: (greater than or equal to)å¤§äºæˆ–ç­‰äº ä¾‹å¦‚ï¼š if [ \u0026#34;$a\u0026#34; -ge \u0026#34;$b\u0026#34; ] -lt\t: (less than)å°äº ä¾‹å¦‚ï¼š if [ \u0026#34;$a\u0026#34; -lt \u0026#34;$b\u0026#34; ] -le\t: (less than or equal to)å°äºæˆ–ç­‰äº ä¾‹å¦‚ï¼š if [ \u0026#34;$a\u0026#34; -le \u0026#34;$b\u0026#34; ] \u0026lt;\t: å°äº ä¾‹å¦‚ï¼š if (( \u0026#34;$a\u0026#34; \u0026lt; \u0026#34;$b\u0026#34; )) \u0026lt;=\t: å°äºç­‰äº ä¾‹å¦‚ï¼š if (( \u0026#34;$a\u0026#34; \u0026lt;= \u0026#34;$b\u0026#34; )) \u0026gt;\t: å¤§äº ä¾‹å¦‚ï¼š if (( \u0026#34;$a\u0026#34; \u0026gt; \u0026#34;$b\u0026#34; )) \u0026gt;=\t: å¤§äºç­‰äº ä¾‹å¦‚ï¼š if (( \u0026#34;$a\u0026#34; \u0026gt;= \u0026#34;$b\u0026#34; )) å­—ç¬¦ä¸²æ¯”è¾ƒ =\t: ç­‰äº ä¾‹å¦‚ï¼š if [ \u0026#34;$a\u0026#34; = \u0026#34;$b\u0026#34; ] ==\t: ç­‰äº ä¾‹å¦‚ï¼š if [ \u0026#34;$a\u0026#34; == \u0026#34;$b\u0026#34; ] !=\t: ä¸ç­‰äº ä¾‹å¦‚ï¼š if [ \u0026#34;$a\u0026#34; != \u0026#34;$b\u0026#34; ] \u0026lt;\t: å°äºï¼ˆASCIIå­—æ¯é¡ºåºï¼‰ ä¾‹å¦‚ï¼š if [[ \u0026#34;$a\u0026#34; \u0026lt; \u0026#34;$b\u0026#34; ]] \u0026gt;\t: å¤§äºï¼ˆASCIIå­—æ¯é¡ºåºï¼‰ ä¾‹å¦‚ï¼š if [[ \u0026#34;$a\u0026#34; \u0026gt; \u0026#34;$b\u0026#34; ]] -z\t: å­—ç¬¦ä¸ä¸ºç©º éœ€è¦æ³¨æ„ï¼Œä»€ä¹ˆæ—¶å€™ç”¨å•ä¸ªä¸­æ‹¬å·å’Œä¸¤ä¸ªä¸­æ‹¬å·ï¼Œè¿˜æœ‰ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ä¸¤ä¸ªå°æ‹¬å·ï¼Œæ³¨æ„æ‹¬å·å†…ç©ºæ ¼ã€‚   ","date":"2019-08-19T11:21:38+08:00","permalink":"https://sunnnner.github.io/p/shell-if-then%E8%AF%AD%E5%8F%A5/","title":"Shell if Thenè¯­å¥"},{"content":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  # how to pass arguments to shell script  # åˆ©ç”¨echoæ‰“å°ä½ ä¼ å…¥çš„å‚æ•° # ä¸Šé¢å¯ä»¥çœ‹åˆ°$0è¡¨ç¤º æˆ‘ä»¬è¿è¡Œshæ–‡ä»¶çš„è¯­å¥ ./demo.shï¼Œè¿™ä¸ªä¸æ˜¯ä¸€ä¸ªæˆ‘ä»¬æä¾›çš„çœŸå®çš„å‚æ•°ã€‚ # echo $0 $1 $2 $3  # æ¢æˆargs æ•°ç»„æ–¹å¼å»å­˜å‚¨å‚æ•°åˆ—è¡¨ args=(\u0026#34;$@\u0026#34;) # echo ${args[0]} ${args[1]} ${args[2]} ${args[3]} # æ›´ç®€å•çš„æ–¹æ³• $@å¯ä»¥è¡¨ç¤ºä¼ å…¥çš„å‚æ•°åˆ—è¡¨ï¼Œç›´æ¥æ‰“å°å‡ºæ¥ # echo $@ # å¦‚ä½•è®¡ç®—å‚æ•°çš„ä¸ªæ•° # $#å¯ä»¥å­˜å‚¨å‚æ•°çš„ä¸ªæ•°å€¼ echo $#   ","date":"2019-08-18T11:21:09+08:00","permalink":"https://sunnnner.github.io/p/shell-%E5%A6%82%E4%BD%95%E4%BC%A0%E5%8F%82/","title":"Shell å¦‚ä½•ä¼ å‚"},{"content":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  #! /bin/bash # learn about how to read from user input echo \u0026#34;Places input your name\u0026#34; read name echo \u0026#34;your had input name is $name\u0026#34; # -p æ˜¯promote ï¼Œæç¤ºçš„æ„æ€å°±æ˜¯å¯ä»¥è®©ç”¨æˆ·åœ¨æç¤ºè¯­ç›¸åŒ # ä¸€è¡Œè¾“å…¥å†…å®¹ read -p \u0026#34;Please input a name\u0026#34; user_var echo \u0026#34;your had input name is: $user_var\u0026#34; # æ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥å¯†ç æ“ä½œ read -p \u0026#34;place input you name\u0026#34; users_var # -sä¸€èˆ¬åœ¨è¾“å…¥å¯†ç çš„æ—¶å€™å¯ç”¨å¯ä»¥è¾“å…¥è¿‡ç¨‹çœ‹ä¸åˆ°æ“ä½œ read -sp \u0026#34;place input you password\u0026#34; pas_var echo \u0026#34;you had input name is $users_var\u0026#34; echo \u0026#34;you had input password is $pas_var\u0026#34;   ","date":"2019-08-17T11:20:41+08:00","permalink":"https://sunnnner.github.io/p/shell-%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5/","title":"Shell è·å–ç”¨æˆ·è¾“å…¥"},{"content":"1 2 3 4 5 6 7 8 9 10 11  #! /bin/bash # input your comments here echo \u0026#39;Hello world\u0026#39; # you also can input a comment here echo $BASH # å¼•ç”¨ç³»ç»Ÿå˜é‡ä½¿ç”¨â€œ$â€ echo $PATH echo the system variable path is $PATH name=Anthony echo my name is $name   å¼•ç”¨ç³»ç»Ÿå˜é‡ä½¿ç”¨â€˜$â€™\nå®šä¹‰å˜é‡æ—¶ç­‰å·ä¸¤è¾¹ä¸è¦æœ‰ç©ºæ ¼\n#å·æ˜¯å¤‡æ³¨ä¿¡æ¯\n","date":"2019-08-16T11:19:55+08:00","permalink":"https://sunnnner.github.io/p/shell-2/","title":"Shell 2"},{"content":"ä»€ä¹ˆæ˜¯shell\næœ€æ—©æœŸè¿è¡Œåœ¨unixä¸Šçš„shellæ˜¯Bourne shellï¼ˆshï¼‰ï¼Œå…¶å®shellæˆ‘ä»¬éƒ½çŸ¥é“æ˜¯ä¸€ä¸ªå†…æ ¸ï¼Œé‡Œé¢é›†æˆäº†å¾ˆå¤šå‘½ä»¤ï¼Œshellè´Ÿè´£å’Œåº•å±‚ç¡¬ä»¶æ‰“äº¤é“ã€‚å‰é¢æˆ‘ä»¬ä»‹ç»çš„è¿™äº›å‘½ä»¤ï¼Œå¯ä»¥è¯´æ˜¯shellå‘½ä»¤ã€‚shellç¨‹åºçš„å…¥å£ä¸€èˆ¬æ˜¯åœ¨ç»ˆç«¯è¾“å…¥ä¸€äº›ç›¸å…³å‘½ä»¤ï¼Œç„¶åä¸éœ€è¦ç¼–è¯‘ï¼Œç›´æ¥å»è§£é‡Šå’Œè¿è¡Œå‘½ä»¤çš„ç»“æœï¼Œç»™å‡ºç›¸å…³åé¦ˆåˆ°ç»ˆç«¯ä¸Šé¢ã€‚æ‰€ä»¥ï¼Œä¸€å¥è¯æ¥ç†è§£ï¼Œshellæ˜¯ä¸€ä¸ªå¾ˆå¤šå‘½ä»¤çš„é›†åˆï¼Œä¸€ä¸ªå†…æ ¸  ä»€ä¹ˆæ˜¯bash\nbash æ˜¯ä¸€ä¸ªä¸ºGNUè®¡åˆ’ç¼–å†™çš„Unix shellã€‚å®ƒçš„åå­—æ˜¯ä¸€ç³»åˆ—ç¼©å†™ï¼šBourne-Again SHell â€” è¿™æ˜¯å…³äºBourne shellï¼ˆshï¼‰çš„ä¸€ä¸ªåŒå…³è¯­ï¼ˆBourne again / born againï¼‰.Bash (GNU Bourne-Again Shell) æ˜¯è®¸å¤šLinuxå‘è¡Œç‰ˆçš„é»˜è®¤Shellã€‚äº‹å®ä¸Šï¼Œè¿˜æœ‰è®¸å¤šä¼ ç»ŸUNIXä¸Šç”¨çš„Shellï¼Œä¾‹å¦‚tcshã€cshã€ashã€bshã€kshç­‰ç­‰ï¼ŒShell Scriptå¤§è‡´éƒ½ç±»åŒï¼Œå½“æ‚¨å­¦ä¼šä¸€ç§Shellä»¥åï¼Œå…¶å®ƒçš„Shellä¼šå¾ˆå¿«å°±ä¸Šæ‰‹ï¼Œå¤§å¤šæ•°çš„æ—¶å€™ï¼Œä¸€ä¸ªShell Scripté€šå¸¸å¯ä»¥åœ¨å¾ˆå¤šç§Shellä¸Šä½¿ç”¨ã€‚æ‰€ä»¥ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ä½¿ç”¨bashè„šæœ¬çš„åŸå› ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥çš„shellè„šæœ¬éƒ½æ˜¯åŸºäºbashã€‚  ä»€ä¹ˆæ˜¯shellè„šæœ¬\nå‰é¢æˆ‘ä»¬å†™è¿‡äº†ä¸€ä¸ªshellè„šæœ¬ï¼Œshellè„šæœ¬å°±æ˜¯é€šè¿‡ä¸€äº›ç›¸å…³shellå‘½ä»¤çš„ç»„åˆæ¥è¾¾åˆ°å®Œæˆä¸€ä¸ªä»»åŠ¡çš„æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸€èˆ¬æ˜¯ä»¥,shç»“å°¾ã€‚  å†™ä¸€ä¸ªshellè„šæœ¬ï¼Œåœ¨ç»ˆç«¯æ‰“å°hello shell\n1 2 3 4 5 6 7 8  touch hello.sh code hello.sh #! /bin/bash echo \u0026#39;Hello world\u0026#39; æé«˜æƒé™ -rwxr-xr-x chmod +x hellp.sh   ","date":"2019-08-15T11:18:47+08:00","permalink":"https://sunnnner.github.io/p/shell-1/","title":"Shell 1"},{"content":"CSSå¸¸ç”¨æ¡†æ¶\n1ã€Scooter CSS 2ã€Leaf CSS 3ã€Fox CSS 4ã€Miligram CSS 5ã€Layers CSS 6ã€Baseguide CSS 7ã€Mimic CSS 8ã€Cascade CSS 9ã€Emastic CSS 10ã€Neutron CSS  HTMLæ¡†æ¶\nframe iframe  JSæ¡†æ¶\n1.Zepto.js 2.SUI Mobile 3.Node.Js 4.angular.Js 5.JQuery Mobile 6.requirejs 7.Vue.js 8.backbone.js 9.React 10.Ionic  å‰ç«¯UIæ¡†æ¶\n1.Pure 2.bootstrap 3.EasyUI 4.Ant Design  å¯è§†åŒ–ç»„ä»¶\n1.Echarts 2.tableau(æ”¶è´¹)  ","date":"2019-03-01T11:16:46+08:00","permalink":"https://sunnnner.github.io/p/%E6%A1%86%E6%9E%B6/","title":"æ¡†æ¶"},{"content":"redis æ•°æ®åº“ä¼˜åŒ– 1 2 3 4 5 6 7 8 9 10 11  å°½é‡ä½¿ç”¨çŸ­çš„key ä¸è¦å¿˜äº†è§keyè¯†æ„ é¿å…ä½¿ç”¨keys * è¿™æ¡å‘½ä»¤æ˜¯é˜»å¡å°±æ˜¯æ“ä½œè¿™æ¡å‘½ä»¤çš„æ—¶å€™å°±ä¸èƒ½æ“ä½œå…¶ä»–çš„å‘½ä»¤ ä¿å­˜æ•°æ®ä¹‹å‰å…ˆå‹ç¼©ä¸€æ¬¡ è®¾ç½®keyçš„æœ‰æ•ˆæœŸï¼Œä½¿å…¶è‡ªåŠ¨é”€æ¯ é€‰æ‹©å›æ”¶ç­–ç•¥ï¼ŒRedisçš„å®ä¾‹ç©ºé—´è¢«è£…æ»¡ä¹‹åï¼Œä¼šå°è¯•å›æ”¶ä¸€éƒ¨åˆ†æ•°æ®ã€‚ å°½å¯èƒ½çš„ä½¿ç”¨å“ˆå¸Œå­˜å‚¨ ä¸€æ¬¡æ€§æ·»åŠ å¤šæ¡æ•°æ®çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ç®¡é“è¿›è¡Œå­˜å‚¨ Redisçš„ç³»ç»Ÿä¼˜åŒ– ä¿®æ”¹Linuxä¸­TCPçš„æœ€å¤§å®¹çº³çš„æ•°é‡ ä¿®æ”¹Linuxä¸­å†…æ ¸çš„åˆ†é…ç­–ç•¥ å…³é—­ THP ï¼ˆè¿ç»­çš„ç‰©ç†å†…å­˜å·¨å¤§çš„é¡µé¢ï¼‰   redis çš„æ€§èƒ½ä¼˜åŒ–æ€»ç»“ æ ¹æ®ä¸šåŠ¡éœ€è¦é€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹ï¼Œå¹¶ä¸ºä¸åŒçš„åº”ç”¨åœºæ™¯è®¾ç½®å“åº”çš„ç´§å‡‘çš„å­˜å‚¨å‚æ•°\nå½“ä¸šåŠ¡åœºæ™¯ä¸éœ€è¦æ•°æ®æŒä¹…åŒ–æ—¶ï¼Œ å…³é—­æ‰€æœ‰çš„æŒä¹…åŒ–æ–¹å¼å¯ä»¥æˆ–å¾—æœ€ä½³çš„æ€§èƒ½ä»¥åŠæœ€å¤§çš„å†…å­˜ä½¿ç”¨é‡\nå¦‚æœéœ€è¦ä½¿ç”¨æŒä¹…åŒ–æ ¹æ®æ˜¯å¦å¯ä»¥å®¹å¿é‡å¯ä¸¢å¤±éƒ¨åˆ†æ•°æ®åœ¨å¿«ç…§æ–¹å¼ä¸è¯­å¥è¿½åŠ æ–¹å¼ä¹‹é—´é€‰æ‹©å…¶ä¸€ï¼Œä¸\nè¦ä½¿ç”¨è™šæ‹Ÿå†…å­˜ä»¥åŠdiskstoreæ–¹å¼\nä¸è¦è®©ä½ çš„Redisæ‰€åœ¨æœºå™¨ç‰©ç†å†…å­˜ä½¿ç”¨è¶…è¿‡å®é™…å†…å­˜æ€»é‡çš„3/5\nmysql æ•°æ®åº“ä¼˜åŒ– sql è¯­å¥ä¼˜åŒ–\nç´¢å¼•ä¼˜åŒ–\né¿å…æŸ¥è¯¢æ—¶çš„å…¨ç›˜æ‰«æ\nå¢åŠ ç¼“å­˜\nè¯»å†™åˆ†ç¦»\nåˆ†åŒº\nåˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆå‚ç›´åˆ†å‰²ï¼‰\næ°´å¹³åˆ‡åˆ†\nMongoDB æ•°æ®åº“ä¼˜åŒ– mongodbå¯ä»¥é€šè¿‡profileæ¥ç›‘æ§æ•°æ®ï¼Œè¿›è¡Œä¼˜åŒ–ã€‚\nç´¢å¼•ä¼˜åŒ–\næ•°æ®åº“è®¾è®¡ä¼˜åŒ–\n1ã€å®Œå…¨åˆ†ç¦»ï¼ˆèŒƒå¼åŒ–è®¾è®¡ï¼‰ 2ã€å®Œå…¨å†…åµŒï¼ˆåèŒƒå¼åŒ–è®¾è®¡ï¼‰ 3ã€éƒ¨åˆ†å†…åµŒï¼ˆæŠ˜ä¸­æ–¹æ¡ˆï¼‰ ","date":"2019-02-05T11:15:10+08:00","permalink":"https://sunnnner.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/","title":"æ•°æ®åº“ä¼˜åŒ–"},{"content":"ä¼˜åŒ–SQLè¯­å¥\né€šè¿‡æ·»åŠ ç´¢å¼•è¿›è¡Œä¼˜åŒ–\nä¼˜åŒ–Order by\næœ‰ä¸¤ç§æ–¹å¼å¦‚ä¸‹ï¼š\nï¼ˆ1ï¼‰ç´¢å¼•ä¼˜åŒ–ï¼šå¯¹byåçš„åˆ—æ·»åŠ ç´¢å¼•ï¼Œä»è€Œå¤§è¾¾åˆ°ä¼˜åŒ–çš„ç›®çš„ã€‚\nï¼ˆ2ï¼‰where+order by çš„ç»„åˆä¼˜åŒ–ï¼šé€šè¿‡whereè¿›è¡Œé™åˆ¶ååœ¨è¿›è¡Œorder by\nä¼˜åŒ–limit\nä¼˜åŒ–å­æŸ¥è¯¢\n2.ä¼˜åŒ–æ•°æ®åº“ç»“æ„\n1ã€ä¼˜åŒ–insertè¯­å¥\n ç¦ç”¨ç´¢å¼•ï¼Œç¦ç”¨å”¯ä¸€æ€§æ£€æŸ¥ï¼Œä½¿ç”¨ä¸€æ¡insertæ’å…¥å¤šæ¡è¯­å¥ã€‚  2ã€ä¼˜åŒ–updateè¯­å¥\n ä½¿ç”¨ä¸€ä¸ªupdateè¯­å¥åŒæ—¶åšå¤šä¸ªæ›´æ–°ã€‚  3ã€ä¼˜åŒ–deleteè¯­å¥\n åˆ é™¤ä¸€æ¡è®°å½•çš„æ—¶é—´ä¸ç´¢å¼•çš„æ•°é‡æˆæ­£æ¯”ã€‚åˆ é™¤ä¸€ä¸ªè¡¨çš„æ‰€æœ‰è¡Œï¼Œä½¿ç”¨truncate table Tbname è€Œä¸è¦ä½¿ç”¨delete from table  Djangoå¦‚ä½•ä¼˜åŒ–\n1åˆ©ç”¨æ ‡å‡†æ•°æ®åº“ä¼˜åŒ–æŠ€æœ¯ï¼šç´¢å¼•, Djangoå»ºç«‹å®ä½“çš„æ—¶å€™ï¼Œæ”¯æŒç»™å­—æ®µæ·»åŠ ç´¢å¼•ï¼Œå…·ä½“å‚è€ƒDjango.db.models.Field.db_indexã€‚\n2äº†è§£Djangoçš„QuerySetsï¼šQuerySetsæ˜¯æœ‰ç¼“å­˜çš„ï¼Œä¸€æ—¦å–å‡ºæ¥ï¼Œå®ƒå°±ä¼šåœ¨å†…å­˜é‡Œå‘†ä¸Šä¸€æ®µæ—¶é—´ï¼Œå°½é‡é‡ç”¨å®ƒ\n3æ•°æ®åº“çš„å·¥ä½œå°±äº¤ç»™æ•°æ®åº“æœ¬èº«è®¡ç®—ï¼Œåˆ«ç”¨Pythonå¤„ç†ï¼šä½¿ç”¨ filter and exclude è¿‡æ»¤ä¸éœ€è¦çš„è®°å½•ï¼Œè¿™ä¸¤ä¸ªæ˜¯æœ€å¸¸ç”¨è¯­å¥ï¼Œç›¸å½“æ˜¯SQLçš„whereã€‚ä½¿ç”¨annotateå¯¹æ•°æ®åº“åšèšåˆè¿ç®—ã€‚ä¸è¦ç”¨pythonè¯­è¨€å¯¹ä»¥ä¸Šç±»å‹æ•°æ®è¿‡æ»¤ç­›é€‰ï¼ŒåŒæ ·çš„ç»“æœï¼Œpythonå¤„ç†å¤æ‚åº¦è¦é«˜ï¼Œè€Œä¸”æ•ˆç‡ä¸é«˜ï¼Œ ç™½ç™½æµªè´¹å†…å­˜ã€‚ä½¿ç”¨åŸç”Ÿçš„SQLè¯­å¥ï¼š\n4å¦‚æœéœ€è¦å°±ä¸€æ¬¡æ€§å–å‡ºä½ æ‰€éœ€è¦çš„æ•°æ®ï¼š\nå•ä¸€åŠ¨ä½œï¼ˆå¦‚ï¼šåŒä¸€ä¸ªé¡µé¢ï¼‰éœ€è¦å¤šæ¬¡è¿æ¥æ•°æ®åº“æ—¶ï¼Œæœ€å¥½ä¸€æ¬¡æ€§å–å‡ºæ‰€æœ‰éœ€è¦çš„æ•°æ®ï¼Œå‡å°‘è¿æ¥æ•°æ®åº“æ¬¡æ•°ã€‚æ­¤ç±»éœ€æ±‚æ¨èä½¿ç”¨QuerySet.select_related() å’Œ prefetch_related()ã€‚ä½¿ç”¨QuerySet.count()ä»£æ›¿len(queryset),è™½ç„¶è¿™ä¸¤ä¸ªå¤„ç†å¾—å‡ºçš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†å‰è€…æ€§èƒ½ä¼˜ç§€å¾ˆå¤šã€‚åŒç†åˆ¤æ–­è®°å½•å­˜åœ¨æ—¶ï¼ŒQuerySet.exists()æ¯”if querysetå®åœ¨å¼ºå¾—å¤ªå¤šäº†ã€‚\n5 æ‡‚å‡å°‘æ•°æ®åº“çš„è¿æ¥æ•°ï¼š\nä½¿ç”¨ QuerySet.update() å’Œ delete()ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°æ˜¯èƒ½æ‰¹å¤„ç†å¤šæ¡è®°å½•çš„ï¼Œé€‚å½“ä½¿ç”¨å®ƒä»¬äº‹åŠåŠŸå€ï¼›å¦‚æœå¯ä»¥ï¼Œåˆ«ä¸€æ¡æ¡æ•°æ®å»update deleteå¤„ç†ã€‚\nä½¿ç”¨ Redis è¿›è¡Œç¼“å­˜\nä½¿ç”¨å¼‚æ­¥ Worker è¿›è¡Œå†™åº“æ“ä½œ\né«˜å¹¶å‘é—®é¢˜\nï¼š1ï¼Œæ‚²è§‚é”ï¼›2ï¼Œä¹è§‚é”\nä½¿ç”¨åœºæ™¯ï¼š\nå¹¶å‘é‡é«˜çš„æ—¶å€™ä½¿ç”¨æ‚²è§‚é”ï¼Œ\nç¼ºç‚¹ï¼šåŠ é”æ¶ˆè€—èµ„æº\nå¹¶å‘é‡ä½çš„æ—¶å€™ä½¿ç”¨ä¹è§‚é”ï¼Œ\nç¼ºç‚¹ï¼šä¹è§‚é”å¾ªç¯è€—è´¹æ—¶é—´ã€‚ ç§’æ€é—®é¢˜,ä¸€ä»¶å•†å“å¤šäººæŠ¢è´­å¦‚ä½•å¤„ç†\nè·å–ç¬¬ä¸€ä½çš„æ•°æ®å…¶ä»–äººå‡ä¸æ»¡è¶³\nè¯´ä¸€ä¸‹äº‹åŠ¡å››å¤§ç‰¹æ€§å’Œéš”ç¦»çº§åˆ«\nACID\nåŸå­æ€§ï¼ˆAtomicityï¼‰ è¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆéƒ½ä¸æˆåŠŸ\nä¸€è‡´æ€§(Consistency) å‡ ä¸ªå¹¶è¡Œæ‰§è¡Œçš„äº‹åŠ¡ï¼Œå…¶æ‰§è¡Œç»“æœå¿…é¡»ä¸æŒ‰ç…§æŸä¸€èˆ’å¾ä¸²æ‰§è¡Œçš„ç»“æœç›¸ä¸€è‡´\néš”ç¦»æ€§(Isolation) äº‹åŠ¡çš„æ‰§è¡Œä¸å—å…¶ä»–äº‹åŠ¡çš„å¹²æ‰°ï¼Œäº‹åŠ¡æ‰§è¡Œçš„ä¸­é—´ç»“æœå¯¹å…¶ä»–äº‹åŠ¡å¿…é¡»å¸‚é€æ˜çš„\næŒä¹…æ€§(Durability) å¯¹äºä»»æ„å·²æäº¤äº‹åŠ¡ï¼Œç³»ç»Ÿå¿…é¡»ä¿è¯è¯¥äº‹åŠ¡å¯¹æ•°æ®åº“çš„æ”¹å˜ä¸è¢«ä¸¢å¤±ï¼Œå³ä½¿æ•°æ®åº“å‡ºç°æ•…éšœï¼›\néš”ç¦»çº§åˆ«\nè„è¯» åœ¨ä¸€ä¸ªäº‹åŠ¡å¤„ç†è¿‡ç¨‹é‡Œè¯»å–äº†å¦ä¸€ä¸ªæœªæäº¤çš„äº‹åŠ¡ä¸­çš„æ•°æ®\nä¸å¯é‡å¤è¯» åœ¨å¯¹äºæ•°æ®åº“ä¸­çš„æŸä¸ªæ•°æ®ï¼Œä¸€ä¸ªäº‹åŠ¡èŒƒå›´å†…å¤šæ¬¡æŸ¥è¯¢å´è¿”å›äº†ä¸åŒçš„æ•°æ®å€¼ï¼Œ\nè™šè¯» æ˜¯äº‹åŠ¡éç‹¬ç«‹æ‰§è¡Œæ—¶å‘ç”Ÿçš„ä¸€ç§ç°è±¡ ç°åœ¨æ¥çœ‹çœ‹MySQLæ•°æ®åº“ä¸ºæˆ‘ä»¬æä¾›çš„å››ç§éš”ç¦»çº§åˆ«ï¼š\nã€€â‘  Serializable (ä¸²è¡ŒåŒ–)ï¼šå¯é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»çš„å‘ç”Ÿã€‚\nã€€â‘¡ Repeatable read (å¯é‡å¤è¯»)ï¼šå¯é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»çš„å‘ç”Ÿã€‚\nã€€â‘¢ Read committed (è¯»å·²æäº¤)ï¼šå¯é¿å…è„è¯»çš„å‘ç”Ÿã€‚\nã€€â‘£ Read uncommitted (è¯»æœªæäº¤)ï¼šæœ€ä½çº§åˆ«ï¼Œä»»ä½•æƒ…å†µéƒ½æ— æ³•ä¿è¯ã€‚\nredisçš„æ•°æ®ç±»å‹å’Œä½¿ç”¨åœºæ™¯\nå­—ç¬¦ä¸²(str)ï¼Œ å“ˆå¸Œ(hash) åˆ—è¡¨(list) é›†åˆ(set) æœ‰åºé›†åˆ(zset)\nä¸€ä¸‡ä»¶å•†å“å¦‚ä½•æŒ‰ä»·æ ¼æ’åºå–å‰åä¸ª\nä½¿ç”¨å¿«é€Ÿæ’åº\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  def partition(A, p, r): x = A[r] i = p - 1 for j in range(p, r): if A[j] \u0026lt;= x: i = i + 1 A[i], A[j] = A[j], A[i] A[i + 1], A[r] = A[r], A[i + 1] return i + 1 def quickSort(A, p, r): if p \u0026lt; r: q = partition(A, p, r) quickSort(A, p, q - 1) quickSort(A, q + 1, r) A = [â€¦] quickSort(A, 0, 9999) print(A[:-9])   redisè€ƒæ•°æ®ç±»å‹å’Œä½¿ç”¨åœºæ™¯,æ¯”å¦‚listå•¥æ—¶å€™ç”¨,\nredis ä¸ƒä¸ªä½¿ç”¨åœºæ™¯https://www.cnblogs.com/NiceCui/p/7794659.html\nè¿˜æœ‰MySQLæœ‰å“ªäº›æ•°æ®åº“å¼•æ“,æœ‰ä»€ä¹ˆåŒºåˆ«\nISAMï¼šISAMæ˜¯ä¸€ä¸ªå®šä¹‰æ˜ç¡®ä¸”å†ç»æ—¶é—´è€ƒéªŒçš„æ•°æ®è¡¨æ ¼ç®¡ç†æ–¹æ³•ï¼Œå®ƒåœ¨è®¾è®¡ä¹‹æ—¶å°±è€ƒè™‘åˆ°æ•°æ®åº“è¢«æŸ¥è¯¢çš„æ¬¡æ•°è¦è¿œå¤§äºæ›´æ–°çš„æ¬¡æ•°\nMyISAMï¼šMyISAMæ˜¯MySQLçš„ISAMæ‰©å±•æ ¼å¼å’Œç¼ºçœçš„æ•°æ®åº“å¼•æ“ã€‚\nInnoDBï¼šInnoDBæ•°æ®åº“å¼•æ“éƒ½æ˜¯é€ å°±MySQLçµæ´»æ€§çš„æŠ€æœ¯çš„ç›´æ¥äº§å“ï¼Œè¿™é¡¹æŠ€æœ¯å°±æ˜¯MYSQL+API\nMEMORY: MEMORYæ˜¯MySQLä¸­ä¸€ç±»ç‰¹æ®Šçš„å­˜å‚¨å¼•æ“ã€‚å®ƒä½¿ç”¨å­˜å‚¨åœ¨å†…å­˜ä¸­çš„å†…å®¹æ¥åˆ›å»ºè¡¨ï¼Œè€Œä¸”æ•°æ®å…¨éƒ¨æ”¾åœ¨å†…å­˜ä¸­ã€‚\nInnoDBï¼šæ”¯æŒäº‹åŠ¡å¤„ç†ï¼Œæ”¯æŒå¤–é”®ï¼Œæ”¯æŒå´©æºƒä¿®å¤èƒ½åŠ›å’Œå¹¶å‘æ§åˆ¶ã€‚\nMyISAMï¼šæ’å…¥æ•°æ®å¿«ï¼Œç©ºé—´å’Œå†…å­˜ä½¿ç”¨æ¯”è¾ƒä½ã€‚\nMEMORYï¼šæ‰€æœ‰çš„æ•°æ®éƒ½åœ¨å†…å­˜ä¸­ï¼Œæ•°æ®çš„å¤„ç†é€Ÿåº¦å¿«ï¼Œä½†æ˜¯å®‰å…¨æ€§ä¸é«˜\nhttps://blog.csdn.net/t146lla128xx0x/article/details/78737290\n1 2 3 4 5 6 7  [â€œ1â€,â€2â€,â€10â€],åˆ—è¡¨é‡Œæ˜¯å­—ç¬¦å‹æ•°å€¼,å¦‚ä½•æŒ‰æ•°å­—å¤§å°ç»™åˆ—è¡¨æ’åº list1 = [] a = [â€œ1â€,â€2â€,â€10â€] for i in a: b = int(i) list1.append(b) print(sorted(list1, reverse=True))   Python2å’Œ3çš„åŒºåˆ«\nprintä¸å†æ˜¯è¯­å¥ï¼Œè€Œæ˜¯å‡½æ•°\nåœ¨Python 3ä¸­ï¼Œæ²¡æœ‰æ—§å¼ç±»ï¼Œåªæœ‰æ–°å¼ç±»\nåŸæ¥1/2ï¼ˆä¸¤ä¸ªæ•´æ•°ç›¸é™¤ï¼‰ç»“æœæ˜¯0ï¼Œç°åœ¨æ˜¯0.5äº†\næ–°çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–æ–¹æ³•formatå–ä»£%\nxrangeé‡å‘½åä¸ºrange\n!=å–ä»£ \u0026lt; \u0026gt;\nlongé‡å‘½åä¸ºint\nexcept Exception, eå˜æˆexcept (Exception) as e\nexecå˜æˆå‡½æ•°\nçˆ¬è™«å¥½åƒé—®scrapyå’Œscrapy_redisæœ‰ä»€ä¹ˆåŒºåˆ«\nè¿˜æœ‰scrapyçˆ¬è™«çš„æ‰§è¡Œæµç¨‹,å½“åœºæ‰‹å†™\nçœ‹å®Œæˆ‘è¯´çš„ä½ åœ¨ç™¾åº¦djangoå’Œçˆ¬è™«çš„é¢è¯•é¢˜\nRESTfromeworké—®å¾—ä¹ŸæŒºå¤š\napiviewå’Œviewsetæœ‰å•¥å…³ç³»\né—®restæ˜¯å•¥\n","date":"2019-02-04T10:52:21+08:00","permalink":"https://sunnnner.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96/","title":"æ•°æ®åº“å¦‚ä½•ä¼˜åŒ–"},{"content":"cookieæ•°æ®å­˜æ”¾åœ¨å®¢æˆ·çš„æµè§ˆå™¨ä¸Šï¼Œsessionæ•°æ®æ”¾åœ¨æœåŠ¡å™¨ä¸Šã€‚\ncookieä¸æ˜¯å¾ˆå®‰å…¨ï¼Œåˆ«äººå¯ä»¥åˆ†æå­˜æ”¾åœ¨æœ¬åœ°çš„COOKIEå¹¶è¿›è¡ŒCOOKIEæ¬ºéª—\nè€ƒè™‘åˆ°å®‰å…¨åº”å½“ä½¿ç”¨sessionã€‚\nè€ƒè™‘åˆ°å‡è½»æœåŠ¡å™¨æ€§èƒ½æ–¹é¢ï¼Œåº”å½“ä½¿ç”¨COOKIEã€‚\nå°†ç™»é™†ä¿¡æ¯ç­‰é‡è¦ä¿¡æ¯å­˜æ”¾ä¸ºSESSION\nå…¶ä»–ä¿¡æ¯å¦‚æœéœ€è¦ä¿ç•™ï¼Œå¯ä»¥æ”¾åœ¨COOKIEä¸­\nsession å’Œ tokenå¹¶ä¸çŸ›ç›¾ï¼Œä½œä¸ºèº«ä»½è®¤è¯ tokenå®‰å…¨æ€§æ¯”sessionå¥½\ntokenå°±æ˜¯ä»¤ç‰Œï¼Œæ¯”å¦‚ä½ æˆæƒï¼ˆç™»å½•ï¼‰ä¸€ä¸ªç¨‹åºæ—¶ï¼Œä»–å°±æ˜¯ä¸ªä¾æ®ï¼Œåˆ¤æ–­ä½ æ˜¯å¦å·²ç»æˆæƒè¯¥è½¯ä»¶ï¼›cookieå°±æ˜¯å†™åœ¨å®¢æˆ·ç«¯çš„ä¸€ä¸ªtxtæ–‡ä»¶ï¼Œé‡Œé¢åŒ…æ‹¬ä½ ç™»å½•ä¿¡æ¯ä¹‹ç±»çš„ï¼Œè¿™æ ·ä½ ä¸‹æ¬¡åœ¨ç™»å½•æŸä¸ªç½‘ç«™ï¼Œå°±ä¼šè‡ªåŠ¨è°ƒç”¨cookieè‡ªåŠ¨ç™»å½•ç”¨æˆ·åï¼›sessionå’Œcookieå·®ä¸å¤šï¼Œåªæ˜¯sessionæ˜¯å†™åœ¨æœåŠ¡å™¨ç«¯çš„æ–‡ä»¶ï¼Œä¹Ÿéœ€è¦åœ¨å®¢æˆ·ç«¯å†™å…¥cookieæ–‡ä»¶ï¼Œä½†æ˜¯æ–‡ä»¶é‡Œæ˜¯ä½ çš„æµè§ˆå™¨ç¼–å·.Sessionçš„çŠ¶æ€æ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œå®¢æˆ·ç«¯åªæœ‰session idï¼›è€ŒTokençš„çŠ¶æ€æ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯ã€‚\n","date":"2019-02-03T10:51:26+08:00","permalink":"https://sunnnner.github.io/p/session-cookie%E5%92%8C%E4%BD%BF%E7%94%A8tocken%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB/","title":"Session+cookieå’Œä½¿ç”¨tockenæœ‰ä»€ä¹ˆåŒºåˆ«"},{"content":"  è¿›ç¨‹æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½ï¼Œè¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„å•ä½ï¼Œçº¿ç¨‹æ˜¯cpuè°ƒåº¦çš„å•ä½ã€‚\n  çº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“,æ˜¯CPUè°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½,å®ƒæ˜¯æ¯”è¿›ç¨‹æ›´å°çš„èƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½.çº¿ç¨‹è‡ªå·±åŸºæœ¬ä¸Šä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æº,\n  åªæ‹¥æœ‰ä¸€ç‚¹åœ¨è¿è¡Œä¸­å¿…ä¸å¯å°‘çš„èµ„æº(å¦‚ç¨‹åºè®¡æ•°å™¨,ä¸€ç»„å¯„å­˜å™¨å’Œæ ˆ),ä½†æ˜¯å®ƒå¯ä¸åŒå±ä¸€ä¸ªè¿›ç¨‹çš„å…¶ä»–çš„çº¿ç¨‹å…±äº«è¿›ç¨‹æ‰€æ‹¥æœ‰çš„å…¨éƒ¨èµ„æº.\n  çº¿ç¨‹åŒ…å«å†è¿›ç¨‹ä¸­\n  åç¨‹ï¼Œåˆç¨‹å¾®çº¿ç¨‹ï¼Œçº¤ç¨‹ï¼Œè‹±æ–‡åï¼šcoroutine\n  è€Œåç¨‹çš„æ“ä½œåˆ™æ˜¯ç¨‹åºå‘˜æŒ‡å®šçš„ï¼Œåœ¨pythonä¸­é€šè¿‡yieldï¼Œäººä¸ºçš„å®ç°å¹¶å‘å¤„ç†ã€‚\n  åç¨‹å­˜åœ¨çš„æ„ä¹‰ï¼š\n  åç¨‹ï¼Œåˆ™åªä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹ï¼Œåˆ†è§£ä¸€ä¸ªçº¿ç¨‹æˆä¸ºå¤šä¸ªâ€œå¾®çº¿ç¨‹â€ï¼Œåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è§„å®šæŸä¸ªä»£ç å—çš„æ‰§è¡Œé¡ºåºã€‚\n  åç¨‹çš„åº”ç”¨åœºæ™¯ï¼šå½“ç¨‹åºä¸­å­˜åœ¨å¤§é‡ä¸éœ€è¦CPUçš„æ“ä½œæ—¶ï¼ˆIOï¼‰ã€‚\n  é¦–å…ˆæˆ‘ä»¬å¾—çŸ¥é“åç¨‹æ˜¯å•¥ï¼Ÿåç¨‹å…¶å®æ¯”çº¿ç¨‹æ›´å°çš„æ‰§è¡Œå•å…ƒã€‚ ä¸ºå•¥è¯´ä»–æ˜¯ä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œå› ä¸ºä»–è‡ªå¸¦CPUä¸Šä¸‹æ–‡ã€‚\n  åç¨‹å’Œçº¿ç¨‹å·®å¼‚ï¼š\n  çº¿ç¨‹åˆ‡æ¢éå¸¸è€—æ€§èƒ½\n  ä½†æ˜¯åç¨‹çš„åˆ‡æ¢åªæ˜¯å•çº¯çš„æ“ä½œCPUçš„ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥ä¸€ç§’é’Ÿåˆ‡æ¢ä¸ªä¸Šç™¾ä¸‡æ¬¡ç³»ç»Ÿéƒ½æŠ—çš„ä½ã€‚\n  åç¨‹çš„é—®é¢˜-åç¨‹ç¨‹åºå‘˜è‡ªå·±è°ƒåº¦\n  è®©éœ€è¦æ‰§è¡Œçš„åç¨‹æ›´å¤šçš„è·å¾—CPUæ—¶é—´æ‰æ˜¯é—®é¢˜çš„å…³é”®ã€‚\n  è®¡ç®—å¯†é›†å‹å’ŒIOå¯†é›†å‹   è®¡ç®—å¯†é›†å‹â€“\u0026gt;ä¾‹å¦‚forå¾ªç¯é‡ŒåµŒå¥—10å±‚forå¾ªç¯â€“\u0026gt;å å¤§é‡çš„cpuèµ„æºâ€“\u0026gt;è§£å†³æ–¹æ¡ˆâ€“\u0026gt;ä½¿ç”¨å¤šè¿›ç¨‹ä¸èƒ½ç”¨å¤šçº¿ç¨‹ï¼ˆå¤šçº¿ç¨‹ä¸­æœ‰ä¸ªå…¨å±€é”GILï¼‰\n  IOå¯†é›†å‹-\u0026gt;éœ€è¦ç½‘ç»œåŠŸèƒ½ï¼Œå¤§é‡çš„äº‹ä»¶ç­‰å¾…ç½‘ç»œæ•°æ®çš„åˆ°æ¥â€“\u0026gt;å¤šçº¿ç¨‹ã€åæˆ\n  å°½é‡ä¸è¦å†åç¨‹é‡Œé¢åšIOå¯†é›†å‹æ“ä½œ\n  ","date":"2019-02-02T10:46:49+08:00","permalink":"https://sunnnner.github.io/p/%E7%BA%BF%E7%A8%8B%E8%BF%9B%E7%A8%8B%E5%8D%8F%E7%A8%8B/","title":"çº¿ç¨‹è¿›ç¨‹åç¨‹"},{"content":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31  import queue class TreeNode: def init(self,val=None,left=None,right=None): self.val = val self.left = left self.right = right def settag(self,tag=None): self.tag = tag def visit(treenode): print(str(treenode.val),end=\u0026#39; \u0026#39;) def levelOrder(root): deque = queue.Queue() if(root is not None): deque.put(root) while(not deque.empty()): treenode = deque.get() visit(treenode) if(treenode.left is not None): deque.put(treenode.left) if(treenode.right is not None): deque.put(treenode.right) # è¯´ä¸€ä¸‹ä»–ä»¬çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ #ã€€ä¸€èˆ¬æ¥è¯´ï¼Œæ—¶é—´å¤æ‚åº¦é«˜çš„ç®—æ³•æ¯”å¤æ‚åº¦ä½çš„ç®—æ³•æ…¢ ï¼ƒã€€æ—¶é—´å¤æ‚åº¦çš„æœ€ä¼˜,æœ€å·®,å’Œå¹³å‡å€¼ ï½€ï½€ï½€   ","date":"2019-02-01T10:44:14+08:00","permalink":"https://sunnnner.github.io/p/%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86%E4%BA%8C%E5%8F%89%E6%A0%91/","title":"å¹¿åº¦ä¼˜å…ˆéå†äºŒå‰æ ‘"},{"content":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44  class TreeNode(object): #å®šä¹‰äºŒå‰æ ‘ç±» def init(self,val,left=None,right=None): self.val = val self.left = left self.right = right class BinaryTree(object): def __init__(self,root=None): self.root = root def preScan(self,retList, node): #å…ˆåºéå†ï¼šå…ˆè·Ÿã€å†å·¦ã€åå³ if node != None: retList.append(node.val) self.preScan(retList, node.left) self.preScan(retList, node.right) return retList def midScan(self, retList, node): #ä¸­åºéå†ï¼šå…ˆå·¦ã€å†è·Ÿã€åå³ if node != None: self.midScan(retList, node.left) retList.append(node.val) self.midScan(retList, node.right) return retList def postScan(self, retList, node): #ååºéå†ï¼šå…ˆå·¦ã€å†å³ã€åè·Ÿ if node != None: self.postScan(retList, node.left) self.postScan(retList, node.right) retList.append(node.val) return retList if __name__ == \u0026#34;__main__\u0026#34;: root = TreeNode(50) root.left = TreeNode(20,left=TreeNode(15),right=TreeNode(30,right=TreeNode(12))) root.right = TreeNode(60,right=TreeNode(70)) bTree = BinaryTree(root) retList = bTree.preScan([],bTree.root) print(retList) retList2 = bTree.midScan([],bTree.root) print(retList2) retList3 = bTree.postScan([],bTree.root) print(retList3)   ","date":"2019-01-01T10:41:11+08:00","permalink":"https://sunnnner.github.io/p/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86%E4%BA%8C%E5%8F%89%E6%A0%91/","title":"æ·±åº¦ä¼˜å…ˆéå†äºŒå‰æ ‘"},{"content":"1 2 3 4 5 6 7 8 9 10  # æ–¹æ³•1 f = zip(x.values(),x.keys()) sorted(f) # æ–¹æ³•2 sorted(x.items(), key = lambda x:x[1], reverse = True) # å­—å…¸key valueäº’æ¢ # ä½¿ç”¨zipå‹ç¼©å™¨ # ä½¿ç”¨å­—å…¸æ¨å¯¼å¼ {v: k for k ,v in x.items()}   ","date":"2018-12-02T10:39:55+08:00","permalink":"https://sunnnner.github.io/p/python%E5%AD%97%E5%85%B8%E6%8C%89%E5%80%BC%E6%8E%92%E5%BA%8F/","title":"Pythonå­—å…¸æŒ‰å€¼æ’åº"},{"content":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  def demo(n): a = 1æ’åº b = 2 c = 3 for i in range(n-3): c,b,a = a+b+c, c, b return c å…¶å®å°±æ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ— def demo(n): if n == 1: return 1 if n == 2: return 2 a,b = 1, 2 result = 0 for i in range(3, n+1): result = a + b a = b b = result return result print(demo(10))   ","date":"2018-12-01T10:39:04+08:00","permalink":"https://sunnnner.github.io/p/python%E4%B8%8A%E6%A5%BC%E6%A2%AF%E9%97%AE%E9%A2%98/","title":"Pythonä¸Šæ¥¼æ¢¯é—®é¢˜"},{"content":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  def demo(A,p,r): x = A[r] i = p-1 for j in range(p,r): if A[j] \u0026lt;= x: i = i+1 A[i],A[j] = A[j],A[i] A[i+1], A[r] = A[r],A[i+1] return i + 1 def demo2(A,p,r): if p\u0026lt; r: q = demo(A,p,r) demo(A,p,q-1) demo(A,q+1,r) A = [23,54,6,5,7,8] # 0,4ä»£è¡¨åˆ—è¡¨çš„ä¸‹æ ‡ demo2(A,0,4) print(A)   ","date":"2018-11-01T10:38:06+08:00","permalink":"https://sunnnner.github.io/p/python%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/","title":"Pythonå¿«é€Ÿæ’åº"},{"content":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  1--\u0026gt;2--\u0026gt;3--\u0026gt;4--\u0026gt;5--\u0026gt;null 5--\u0026gt;4-\u0026gt;3--\u0026gt;2--\u0026gt;1--\u0026gt;null class Demo(object): def __init__(self,x): self.val = x self.next = None class Demo1(object): def reverseList(self,head): dummy = head tmp = dummy while head and head.next != None: dummy = head.next head.next = dummy.next dummy.next = tmp tmp = dummy return dummy head = Demo(1) head.next = Demo(2) head.next.next = Demo(3) head.next.next.next = Demo(4) head.next.next.next.next = Demo(5) demo1 = Demo1() reverse_head = demo1.reverseList(head) tmp = reverse_head while tmp: print(tmp.val) tmp = tmp.next   ","date":"2018-10-02T10:37:28+08:00","permalink":"https://sunnnner.github.io/p/python%E9%93%BE%E8%A1%A8/","title":"Pythoné“¾è¡¨"},{"content":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30  æ—¶é—´å¤æ‚åº¦ä¸ºoï¼ˆlogNï¼‰ def demo(array, t): for i in range(len(array): if array[i] == t: return True return False def demo1(array, t): left = 0 right = len(array) - 1 while left \u0026lt;= right: mid = int((left+right)/2) if array[mid] \u0026lt; t: left = mid+1 elif array[mid] \u0026gt; t: right = mid -1 else: return True return False array = list(range(100000)) import time t1 = time.time() demo(array,100001) t2 = time.time() print(\u0026#39;çº¿æ€§æŸ¥æ‰¾\u0026#39;, t2-t1) t3 = time.time() demo1(array, 100001) t4 = time.time() print(\u0026#39;äºŒåˆ†æŸ¥æ‰¾\u0026#39;, t4-t3)   ","date":"2018-10-01T10:36:53+08:00","permalink":"https://sunnnner.github.io/p/python%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/","title":"PythonäºŒåˆ†æŸ¥æ‰¾"},{"content":"1 2 3 4 5 6 7  å†’æ³¡ def damo(sun): for i in range(len(sun)-1): for j in range(len(sun)-i-1): if sun[j]\u0026gt; sun[j+1]: sun[j], sun[j+1] = sun[j+1], sun[j] return sun   ","date":"2018-09-08T10:36:08+08:00","permalink":"https://sunnnner.github.io/p/python%E5%86%92%E6%B3%A1%E7%AE%97%E6%B3%95/","title":"Pythonå†’æ³¡ç®—æ³•"},{"content":"1 2 3 4 5 6 7 8 9 10 11 12 13 14  è£…é¥°å™¨ def demo(name): print(\u0026#39;demo--name\u0026#39;, name) def demo1(demo_name): print(\u0026#39;demo1--demoname\u0026#39;, demo_name.__name__) def demo2(): print(\u0026#39;demo--name\u0026#39;, name) demo_name() return demo2 return demo1 @demo(\u0026#39;zhuangshiqi\u0026#39;) def test(): print(\u0026#39;test\u0026#39;) test()   ","date":"2018-09-07T10:35:21+08:00","permalink":"https://sunnnner.github.io/p/python%E8%A3%85%E9%A5%B0%E5%99%A8/","title":"Pythonè£…é¥°å™¨"},{"content":"ä»‹ç»ä¸€ä¸‹å·¥å‚æ¨¡å¼ 1 2 3 4 5  å·¥å‚æ¨¡å¼æ˜¯ä¸€ä¸ªåœ¨è½¯ä»¶å¼€å‘ä¸­ç”¨æ¥åˆ›å»ºå¯¹è±¡çš„è®¾è®¡æ¨¡å¼ã€‚ å·¥å‚æ¨¡å¼åŒ…æ¶µä¸€ä¸ªè¶…ç±»ã€‚è¿™ä¸ªè¶…ç±»æä¾›ä¸€ä¸ªæŠ½è±¡åŒ–çš„æ¥å£æ¥åˆ›å»ºä¸€ä¸ªç‰¹å®šç±»å‹çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯å†³å®šå“ªä¸ªå¯¹è±¡å¯ä»¥è¢«åˆ›å»ºã€‚ å½“ç¨‹åºè¿è¡Œè¾“å…¥ä¸€ä¸ªâ€œç±»å‹â€çš„æ—¶å€™ï¼Œéœ€è¦åˆ›å»ºäºæ­¤ç›¸åº”çš„å¯¹è±¡ã€‚è¿™å°±ç”¨åˆ°äº†å·¥å‚æ¨¡å¼ã€‚åœ¨å¦‚æ­¤æƒ…å½¢ä¸­ï¼Œå®ç°ä»£ç åŸºäºå·¥å‚æ¨¡å¼ï¼Œå¯ä»¥è¾¾åˆ°å¯æ‰©å±•ï¼Œå¯ç»´æŠ¤çš„ä»£ç ã€‚å½“å¢åŠ ä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œä¸åœ¨éœ€è¦ä¿®æ”¹å·²å­˜åœ¨çš„ç±»ï¼Œåªå¢åŠ èƒ½å¤Ÿäº§ç”Ÿæ–°ç±»å‹çš„å­ç±»ã€‚ ç®€å•å·¥å‚æ¨¡å¼çš„å®è´¨æ˜¯ç”±ä¸€ä¸ªå·¥å‚ç±»æ ¹æ®ä¼ å…¥çš„å‚æ•°ï¼ŒåŠ¨æ€å†³å®šåº”è¯¥åˆ›å»ºå“ªä¸€ä¸ªäº§å“ç±»ï¼ˆè¿™äº›äº§å“ç±»ç»§æ‰¿è‡ªä¸€ä¸ªçˆ¶ç±»æˆ–æ¥å£ï¼‰çš„å®ä¾‹ã€‚ å°è£…å‡½æ•°ï¼ŒåŠ¨æ€åˆ›å»ºå•†å“ç±»   è¯´è¯´æœ‰å“ªäº›mvcæ¨¡å¼çš„æ¡†æ¶ 1 2 3  Strutsã€Springã€ZF/.NET è€¦åˆæ€§ä½/é‡ç”¨æ€§é«˜/ç”Ÿå‘½å‘¨æœŸæˆæœ¬ä½/éƒ¨ç½²å¿«/å¯ç»´æŠ¤æ€§é«˜/æœ‰åˆ©è½¯ä»¶å·¥ç¨‹åŒ–ç®¡ç† ``   ","date":"2018-09-06T10:34:03+08:00","permalink":"https://sunnnner.github.io/p/python%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/","title":"Pythonå·¥å‚æ¨¡å¼"},{"content":"  ä¸¾ä¸ªå¸¸è§çš„å•ä¾‹æ¨¡å¼ä¾‹å­ï¼Œæˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„ç”µè„‘ä¸Šéƒ½æœ‰ä¸€ä¸ªå›æ”¶ç«™ï¼Œåœ¨æ•´ä¸ªæ“ä½œç³»ç»Ÿä¸­ï¼Œå›æ”¶ç«™åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œæ•´ä¸ªç³»ç»Ÿéƒ½ä½¿ç”¨è¿™ä¸ªå”¯ä¸€çš„å®ä¾‹ï¼Œè€Œä¸”å›æ”¶ç«™è‡ªè¡Œæä¾›è‡ªå·±çš„å®ä¾‹ã€‚å› æ­¤å›æ”¶ç«™æ˜¯å•ä¾‹æ¨¡å¼çš„åº”ç”¨ã€‚\n  å•ä¾‹æ¨¡å¼ï¼Œæ˜¯ä¸€ç§å¸¸ç”¨çš„è½¯ä»¶è®¾è®¡æ¨¡å¼ã€‚åœ¨å®ƒçš„æ ¸å¿ƒç»“æ„ä¸­ï¼ŒåªåŒ…å«ä¸€ä¸ªè¢«ç§°ä¸ºå•ä¾‹çš„ç‰¹æ®Šç±»ã€‚\n  é€šè¿‡å•ä¾‹æ¨¡å¼å¯ä»¥ä¿è¯ç³»ç»Ÿä¸­ï¼Œåº”ç”¨è¯¥æ¨¡å¼çš„ç±»ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚å³ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚\n  1 2 3 4 5 6 7 8 9 10 11 12 13  class A(object): # å®šä¹‰ç±»å±æ€§è®°å½•å®ä¾‹åŒ–å¯¹è±¡ __instance = None # åˆ›å»ºå®ä¾‹å¯¹è±¡çš„æ–¹æ³• def __new__(cls): # å¦‚æœæ²¡æœ‰åˆ›å»ºå®ä¾‹å¯¹è±¡å°±åˆ›å»º if cls.__instance == None: cls.__instance = object.__new__(cls) return cls.__instance else: #å¦‚æœå­˜åœ¨å°±ç›´æ¥è¿”å› return cls.__instance    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36  # åˆ›å»ºå•ä¾‹æ—¶ï¼Œåªæ‰§è¡Œ1æ¬¡__init__æ–¹æ³• class Singleton(object): # å®šä¹‰é›·å±æ€§è®°å½•å®ä¾‹åŒ–å¯¹è±¡ __instance = None #åˆ›å»ºå¸‚é‡Œçš„æ–¹æ³• def __new__(cls): if cls.__instance = None: cls.__instance = object.__new__(cls) return cls.__instance else: return cls.__instance def __init__(self, name): self.name = name æ€ä¹ˆä¿è¯æ‰“å°çš„åå­—æ˜¯ä¸€ä¸ªå‘¢ï¼Ÿ class Singleton(object): __instance = None # æ ‡å¿—è¯­ï¼Œfalseæ²¡æœ‰èµ‹å€¼ ture å·²ç»èµ‹å€¼ __init__flag = False é‡å†™newæ–¹æ³•,åˆ›å»ºå¯¹è±¡è®°å½•ä¸‹æ¥ ä¸‹æ¬¡åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ä¸å»åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œè€Œæ˜¯è¿”å›å·²ç»åˆ›å»ºçš„å¯¹è±¡ def __new__(cls): if cls.__instance = None: cls.__instance = object.__new__(cls) print(\u0026#39;åˆ›å»ºæ–°å¯¹è±¡çš„åœ°å€\u0026#39;,id(cls.__instance) return cls.__instance return cls.__instance else: return cls.instance def __init__(self, name): if Singleton.__init__flag = False: self.name = name Singleton.__init__flag = True   ","date":"2018-09-05T10:32:39+08:00","permalink":"https://sunnnner.github.io/p/python%E5%8D%95%E4%BE%8B/","title":"Pythonå•ä¾‹"},{"content":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38  å¯¹è±¡çš„å¤šç§å½¢æ€ æ¯”å¦‚è¯´åŠ¨ç‰©ï¼ŒåŠ¨ç‰©åˆ†ä¸ºå¾ˆå¤šç§ä½†æ˜¯åŠ¨ç‰©éƒ½ä¼šåƒä¸œè¥¿ï¼Œä½†æ˜¯åŠ¨ç‰©åƒçš„ä¸œè¥¿åˆä¸ä¸€æ · # æœ‰ä¸‰ç§åŠ¨ç‰©ï¼šç‹—ã€çŒ«ã€çŒªï¼Œ #\tçˆ¶ç±»ï¼šåŠ¨ç‰©ã€ #\tå­ç±»ï¼šç‹—ã€çŒ«ã€çŒª å¯ä»¥æ·»åŠ å­ç±»è‡ªå·±çš„æ–¹æ³•ï¼Œè‡ªå·±æ‰©å±• #\tåŠ¨ç‰©çš„å±æ€§ï¼šåŠ¨ç‰©çš„åå­— #\tåŠ¨ç‰©çš„æ–¹æ³•æ˜¯eatï¼ˆå°±æ˜¯æ‰“å°è‡ªå·±çš„åå­—ï¼‰ # æœ‰ä¸€ä¸ªé¥²å…»å‘˜ï¼šé¥²å…»å‘˜ #\té¥²å…»å‘˜çš„æ–¹æ³•ï¼šfeed_animal(éœ€è¦é¥²å…»çš„åŠ¨ç‰©) #\tå‡½æ•°çš„å®ç°æ˜¯ï¼ˆå…¶å®å°±æ˜¯è°ƒç”¨åŠ¨ç‰©çš„eatæ–¹æ³•ï¼‰ class Animal(object): name=\u0026#34;åŠ¨ç‰©\u0026#34; def eat(self): print(\u0026#34;%sä¼šåƒä¸œè¥¿\u0026#34;%(self.name)) class Dog(Animal): def eat(self): print(\u0026#34;å°ç‹—åƒéª¨å¤´\u0026#34;) class Cat(Animal): def eat(self): print(\u0026#34;å°çŒ«çˆ±åƒé±¼\u0026#34;) class Pig(Animal): def eat(self): print(\u0026#34;å°çŒªä¸çŸ¥é“åƒä»€ä¹ˆ\u0026#34;) class Breeder(object): def feed_animal(self,animal): animal.eat() breeder=Breeder() dog=Dog() breeder.feed_animal(dog) cat=Cat() breeder.feed_animal(cat) pig=Pig() breeder.feed_animal(pig)   ","date":"2018-09-04T10:32:01+08:00","permalink":"https://sunnnner.github.io/p/python%E5%A4%9A%E6%80%81/","title":"Pythonå¤šæ€"},{"content":"  è®¾è®¡user models\n  djangoæœ¬èº«çš„auth_user åªåŒ…å«äº†åŸºæœ¬çš„ä¿¡æ¯åŒ…æ‹¬ç”¨æˆ·åï¼Œå¯†ç ï¼Œé‚®ç®±ä»¥åŠæ³¨å†Œæ—¶é—´å’Œæœ€æ–°çš„ç™»å½•æ—¶é—´ï¼Œä½†æ˜¯è¿™äº›å­—æ®µå¾ˆéš¾æ»¡è¶³æˆ‘ä»¬çš„è¦æ±‚ï¼Œæœ‰æ—¶æˆ‘ä»¬æƒ³è®°å½•ç”¨æˆ·æ›´å¤šçš„ä¿¡æ¯ï¼Œä¾‹å¦‚æ‰‹æœºå·ç­‰ä¿¡æ¯ï¼Œè¿™æ—¶å°±éœ€è¦åœ¨auth_user çš„åŸºç¡€ä¸Šå¢åŠ å­—æ®µï¼Œdjangoè‡ªå®šä¹‰Userç½‘ä¸Šæœ‰å››ç§æ–¹æ³•ã€‚\n  æ˜¯å®˜ç½‘ä¸Šæ¨èçš„æ–¹æ³•ï¼Œå°±æ˜¯å¢åŠ ä¸€ä¸ªè¡¨auth_profileï¼Œå…¶ä¸­ä»¥auth_user è¡¨ä¸­çš„idä½œä¸ºForgein Keyå°†ä¸¤ä¸ªè¡¨è¿‡å…³è”èµ·æ¥ï¼Œè¿™æ ·å¯ä»¥åœ¨auth_profile ä¸­å¢åŠ å¤šä¸ªç”¨æˆ·çš„ä¿¡æ¯ã€‚\n  å¦å¤–ä¸€ç§æ˜¯ä¿®æ”¹djangoçš„æºç ï¼Œè¿™ç§æ–¹æ³•ç®€å•æš´åŠ›ç›´æ¥ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•å¯ç§»æ¤æ€§å·®ï¼Œä¸åˆ©äºå¤šé¡¹ç›®éƒ¨ç½²ã€‚\n  ç»§æ‰¿django auth/models ä¸­çš„Userç»§ç»­å¢åŠ å­—æ®µï¼Œè¿™ç§æ–¹æ³•éœ€è¦ä¿®æ”¹settingä¸­çš„AUTH_USER_MODEL=â€˜app.Userâ€™ appä¸ºä½ è‡ªå®šä¹‰çš„appï¼ŒINSTALLED_APPä¸­è¦åŒ…å«Contenttypeså’Œauthä¸¤ä¸ªappï¼Œclass metaä¸­ db_table è¦æŒ‡å®šä¸ºauth_user, å¦‚æœè¦åœ¨adminä¸­ç®¡ç†ç”¨æˆ·çš„è¯ï¼Œéœ€è¦å°†app_label è¿›è¡ŒæŒ‡å®šã€‚è€Œä¸”è¦åœ¨adminä¸­é‡æ–°å®šä¹‰UserAdmin å°†æ–°æ·»åŠ çš„å­—æ®µå†™åœ¨list_displayå’Œadd_fieldsä¸­ã€‚è¯¦è§django.contrib.auth.adminä¸­ã€‚\n  é‡å†™Userï¼Œä¹Ÿå°±æ˜¯ç»§æ‰¿AbstractUserå’ŒPermissionsä¸¤ä¸ªç±»ï¼Œå…¶å®djangoçš„User Modelä¹Ÿæ˜¯ç»§æ‰¿è‡ªè¿™ä¸¤ä¸ªç±»ï¼Œå› æ­¤ä½ å¯ä»¥åšç±»ä¼¼Userçš„å®šä¹‰æ–¹æ³•å®šä¹‰Userã€‚\n  è®°å½•æ˜¯å¦æ‰§è¡Œäº†è¿ç§»æ–‡ä»¶é çš„æ˜¯django_migrationsè¿™è¡¨\n  ","date":"2018-09-03T10:30:05+08:00","permalink":"https://sunnnner.github.io/p/django%E5%AE%9A%E4%B9%89user%E5%9B%9B%E4%B8%AD%E6%96%B9%E5%BC%8F/","title":"Djangoå®šä¹‰USERå››ä¸­æ–¹å¼"},{"content":"celery ç®€ä»‹ ä»»åŠ¡é˜Ÿåˆ— 1 2 3 4  1.ä»»åŠ¡é˜Ÿåˆ—æ˜¯ä¸€ç§åœ¨çº¿ç¨‹æˆ–æœºå™¨é—´åˆ†å‘çš„ä»»åŠ¡çš„æœºåˆ¶ 2.æ¶ˆæ¯é˜Ÿåˆ—çš„è¾“å…¥æ˜¯å·¥ä½œçš„ä¸€ä¸ªå•å…ƒï¼Œç§°ä¸ºä»»åŠ¡ï¼Œç‹¬ç«‹çš„èŒç¨‹ï¼ˆWorkerï¼‰è¿›ç¨‹æŒç»­ç›‘è§†é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰éœ€è¦å¤„ç†çš„æ–°ä»»åŠ¡ã€‚ 3.Celery ç”¨æ¶ˆæ¯é€šä¿¡ï¼Œé€šå¸¸ä½¿ç”¨ä¸­é—´äººï¼ˆBrokerï¼‰åœ¨å®¢æˆ·ç«¯å’ŒèŒç¨‹é—´æ–¡æ—‹ã€‚è¿™ä¸ªè¿‡ç¨‹ä»å®¢æˆ·ç«¯å‘é˜Ÿåˆ—æ·»åŠ æ¶ˆæ¯å¼€å§‹ï¼Œä¹‹åä¸­é—´äººæŠŠæ¶ˆæ¯æ´¾é€ç»™èŒç¨‹ 4.Celery ç³»ç»Ÿå¯åŒ…å«å¤šä¸ªèŒç¨‹å’Œä¸­é—´äººï¼Œä»¥æ­¤è·å¾—é«˜å¯ç”¨æ€§å’Œæ¨ªå‘æ‰©å±•èƒ½åŠ›ã€‚   ","date":"2018-09-02T10:29:21+08:00","permalink":"https://sunnnner.github.io/p/celery%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97/","title":"Celeryä»»åŠ¡é˜Ÿåˆ—"},{"content":" ISCSIç›¸å…³æ“ä½œ ç†Ÿæ‚‰MVCï¼Œç†Ÿæ‚‰OOPï¼Œç†Ÿæ‚‰Pythonä¹‹å¤–çš„å…¶ä»–OOPè¯­è¨€ï¼ŒJavaè€…ä¼˜å…ˆ rust go vue  ","date":"2018-09-01T10:28:49+08:00","permalink":"https://sunnnner.github.io/p/%E7%BC%BA%E5%B0%91%E7%9A%84%E7%9F%A5%E8%AF%86/","title":"ç¼ºå°‘çš„çŸ¥è¯†"},{"content":"ç”Ÿæˆç§˜é’¥æ–‡ä»¶ 1 2 3 4  openssl OpenSSL\u0026gt; genrsa -out app_private_key.pem 2048 # ç§é’¥ OpenSSL\u0026gt; rsa -in app_private_key.pem -pubout -out app_public_key.pem # å¯¼å‡ºå…¬é’¥ OpenSSL\u0026gt; exit     è®¾ç½®æ”¯ä»˜å®æ²™ç®±å…¬åŒ™ï¼Œ æ”¯ä»˜å®é€æ¸è½¬æ¢ä¸ºRSA2å¯†åŒ™ï¼Œ å¯ä»¥ä½¿ç”¨å®˜æ–¹çš„å·¥å…·ç”Ÿæˆ\n  æ”¯ä»˜å®æ²™ç®±åœ°å€\n  ç”ŸæˆRSA2æ•™ç¨‹\n  æµ‹è¯•ç”¨ç§˜é’¥ å¯†ç : rcip\n  è®¾ç½®æœ¬åœ°å…¬åŒ™\u0026amp;ç§åŒ™æ ¼å¼\n  1 2 3 4 5 6 7 8 9 10 11 12  app_private_key_string.pem -----BEGIN RSA PRIVATE KEY----- ç§é’¥å†…å®¹ -----END RSA PRIVATE KEY----- alipay_public_key_string.pem -----BEGIN PUBLIC KEY----- å…¬é’¥å†…å®¹ -----END PUBLIC KEY-----   ","date":"2018-06-05T10:26:17+08:00","permalink":"https://sunnnner.github.io/p/%E6%94%AF%E4%BB%98%E5%AE%9D%E7%94%9F%E6%88%90%E5%AF%86%E5%8C%99%E6%AD%A5%E9%AA%A4/","title":"æ”¯ä»˜å®ç”Ÿæˆå¯†åŒ™æ­¥éª¤"},{"content":"  é»˜è®¤ä½¿ç”¨4000ç«¯å£ï¼Œç”¨hexo s -p 80ï¼Œå¯ä»¥æš‚æ—¶ä¿®æ”¹å¯åŠ¨ç«¯å£ã€‚\n  ä½†æ˜¯æ¯æ¬¡å¯åŠ¨éƒ½è¦å†™â€-p 80â€æ‰è¡Œï¼Œè¿‡äºç¹çã€‚\n  ä¿®æ”¹æ–¹æ³•ï¼š æ‰¾åˆ°node_modules\\hexo-server\\index.jsæ–‡ä»¶ï¼Œå¯ä»¥ä¿®æ”¹é»˜è®¤çš„portå€¼ï¼\n  ","date":"2018-06-04T10:25:30+08:00","permalink":"https://sunnnner.github.io/p/%E4%BF%AE%E6%94%B9hexo%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3%E5%90%AF%E5%8A%A8/","title":"ä¿®æ”¹hexoé»˜è®¤ç«¯å£å¯åŠ¨"},{"content":"è®©python2æ”¯æŒä¸­æ–‡ 1 2  #coding=utf-8 #-*-coding:utf-8-*-    åœ¨é¡µé¢å¤´éƒ¨å†™å…¥ å˜é‡åŠæ•°æ®ç±»å‹ å˜é‡å°±æ˜¯ç”¨æ¥å­˜ä¸œè¥¿çš„ ç¨‹åºå°±æ˜¯ç”¨æ¥å¤„ç†æ•°æ®çš„ï¼Œè€Œå˜é‡å°±æ˜¯ç”¨æ¥å­˜å‚¨æ•°æ®çš„ å˜é‡èµ·åè¦æœ‰æ„ä¹‰  æ•°æ®ç±»å‹ 1 2 3 4 5 6 7  nnumberæ•°å­—åŒ…æ‹¬int long float complex(å¤æ•°) bollernfalse true String liståˆ—è¡¨ï¼ˆæ•°ç»„ï¼‰ tupleå…ƒç»„ dictionaryå­—å…¸ï¼ˆå¯¹è±¡ï¼‰ å¯ä»¥ç”¨type()æ¥æŸ¥çœ‹å˜é‡æ•°æ®ç±»å‹   å…³é”®å­—  äº¤æ¢æ¨¡å¼ä¸‹ä½¿ç”¨import keyword- keyword.kwlistæŸ¥çœ‹å½“å‰ç³»ç»Ÿpythonçš„å…³é”®å­— python2ä¸­ä½¿ç”¨raw_iputè¿›è¡Œè·å–ç”¨æˆ·é”®ç›˜æ•°æ®å®ƒä¼šæŠŠä»»ä½•æ•°æ®å½“ä½œå­—ç¬¦ä¸²æ¥å¯¹å¾… python3ä¸­ä½¿ç”¨inputæ¥æ•è·ç”¨æˆ·é”®ç›˜æ•°æ®ä½†æ˜¯åœ¨python2ä¸­inputè¾“å…¥çš„å†…å®¹å¿…é¡»æ˜¯è¡¨è¾¾å¼ è¾“å‡º print  æ ¼å¼åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  %cä»£è¡¨å­—ç¬¦ %s é€šè¿‡strï¼ˆï¼‰å­—ç¬¦ä¸²è½¬æ¢æ¥æ ¼å¼åŒ– %i æœ‰ç¬¦å·åè¿›åˆ¶æ•´æ•° %d æœ‰ç¬¦å·åè¿›åˆ¶æ•´æ•° %u æ— ç¬¦å·åè¿›åˆ¶æ•´æ•° %o å…«è¿›åˆ¶æ•´æ•° %x åå…­è¿›åˆ¶æ•´æ•°ï¼ˆå°å†™å­—æ¯ï¼‰ %X åå…­è¿›åˆ¶æ•´æ•°ï¼ˆå¤§å†™å­—æ¯ï¼‰ %e ç´¢å¼•ç¬¦å·ï¼ˆå°å†™eï¼‰ %E ç´¢å¼•ç¬¦å·ï¼ˆå¤§å†™Eï¼‰ %f æµ®ç‚¹å®æ•° %g %fä¸%e çš„ç®€å†™ %G %F%Eçš„ç®€å†™ \\n æ¢è¡Œè¾“å‡º pythonç®—æœ¯è¿ç®—ç¬¦ +-*/ //ï¼ˆå–æ•´é™¤ï¼‰ %æ±‚ä½™ ** å¹‚   èµ‹å€¼è¿ç®— 1 2 3 4 5 6 7  += -= *= /= %= **= å¹‚èµ‹å€¼è¿ç®—ç¬¦ //= å–æ•´é™¤èµ‹å€¼è¿ç®—ç¬¦   ==- whileå¾ªç¯== 1 2 3 4 5 6 7 8  complexï¼ˆï¼‰åˆ›å»ºä¸€ä¸ªå¤æ•° evalï¼ˆï¼‰è¿ç®—pythonä¸­æœ‰æ•ˆè¡¨è¾¾å¼å¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ tupleï¼ˆï¼‰å°†åºåˆ—sè½¬æ¢ä¸ºä¸€ä¸ªå…ƒç»„ listï¼ˆï¼‰è½¬æ¢ä¸ºåˆ—è¡¨ unichr()è½¬æ¢ä¸ºUnicodeå­—ç¬¦ ordï¼ˆï¼‰è½¬æ¢ä¸ºå®ƒçš„æ•´æ•°å€¼ hex() å°†ä¸€ä¸ªæ•´æ•°è½¬æ¢ä¸ºä¸€ä¸ªåå…­è¿›åˆ¶çš„å­—ç¬¦ä¸² oct()å°†ä¸€ä¸ªæ•´æ•°è½¬æ¢ä¸ºä¸€ä¸ªå…«è¿›åˆ¶å­—ç¬¦ä¸²   ","date":"2018-06-03T10:22:36+08:00","permalink":"https://sunnnner.github.io/p/python%E5%9F%BA%E7%A1%80/","title":"PythonåŸºç¡€"},{"content":"Ajaxè¯­æ³•  ç°åœ¨å†™ajaxå†™çš„æˆ‘å¾ˆéš¾å—ä¸‹é¢å°±æ˜¯æˆ‘åœ¨æœç´¢çš„æ—¶å€™é‡åˆ°çš„æ ‡ç­¾çš„æ„æ€  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  $(\u0026#39;.show_prize\u0026#39;)è·å–ä¸ºshow_pirzeçš„æ ‡ç­¾ .childrenï¼ˆâ€˜emâ€™ï¼‰è·å–å­å…ƒç´ ä¸ºemçš„æ ‡ç­¾ ã€‚textï¼ˆï¼‰è·å–ä»–çš„æ–‡æœ¬ .val() è·å–ä»–çš„å€¼ parseInt å¼ºåˆ¶ç±»å‹è½¬æ¢æˆæ•´å½¢ .toFixed(sun) ä¿ç•™å°æ•°ç‚¹åsunä½ ã€‚clickï¼ˆï¼‰ä¾¦å¬ç‚¹å‡»äº‹ä»¶ .blur()å½“è¾“å…¥åŸŸå¤±å»ç„¦ç‚¹ (blur .trim()å»é™¤ä¸¤è¾¹ç©ºç™½ .each() æ–¹æ³•è§„å®šä¸ºæ¯ä¸ªåŒ¹é…å…ƒç´ è§„å®šè¿è¡Œçš„å‡½æ•° find() æ–¹æ³•è·å¾—å½“å‰å…ƒç´ é›†åˆä¸­æ¯ä¸ªå…ƒç´ çš„åä»£ï¼Œé€šè¿‡é€‰æ‹©å™¨ã€jQuery å¯¹è±¡æˆ–å…ƒç´ æ¥ç­›é€‰ã€‚ .find(\u0026#39;:checked\u0026#39;)è·å–typeæ ‡ç­¾çš„å±æ€§å¿…é¡»ç”¨â€œï¼šâ€æ¥é€‰æ‹© $(\u0026#34;b\u0026#34;).parents()æŸ¥æ‰¾æ¯ä¸ª b å…ƒç´ çš„æ‰€æœ‰çˆ¶å…ƒç´  changeäº‹ä»¶æ”¹å˜ ã€‚prop() æ–¹æ³•è®¾ç½®æˆ–è¿”å›è¢«é€‰å…ƒç´ çš„å±æ€§å’Œå€¼ã€‚ .attr()attr() æ–¹æ³•è®¾ç½®æˆ–è¿”å›è¢«é€‰å…ƒç´ çš„å±æ€§å€¼ã€‚ remove()ç§»é™¤å¯¹åº”çš„å…ƒç´  $.ajaxSettings.async = true//è®¾ç½®å¼‚æ­¥ $.ajaxSettings.async = false;//è®¾ç½®åŒæ­¥   å…¨é€‰å’Œå…¨ä¸é€‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  $(\u0026#39;.settlements\u0026#39;).find(\u0026#39;:checkbox\u0026#39;).change(function () { //è·å–å…¨é€‰checkboxçš„é€‰ä¸­çŠ¶æ€  is_checked = $(this).prop(\u0026#39;checked\u0026#39;) //ä¾¿åˆ©æ‰€æœ‰å•†å“å¯¹åº”çš„checkbox,è®¾ç½®checkedå±æ€§å’Œå…¨é€‰checkboxä¸€è‡´  $(\u0026#39;.cart_list_td\u0026#39;).find(\u0026#39;:checkbox\u0026#39;).each(function () { $(this).prop(\u0026#39;checked\u0026#39;, is_checked) }) // æ›´æ–°å•†å“ä¿¡æ¯  update_total_price() }); //å•†å“å¯¹åº”çš„checkboxçŠ¶æ€å‘ç”Ÿæ”¹å˜æ˜¯ï¼Œå…¨é€‰checkboxçš„æ”¹å˜  $(\u0026#39;.cart_list_td\u0026#39;).find(\u0026#39;:checkbox\u0026#39;).change(function () { //è·å–æ‰€æœ‰çš„å•†å“å¯¹åº”çš„chackedboxçš„æ•°ç›®  all_len = $(\u0026#39;.cart_list_td\u0026#39;).find(\u0026#39;:checkbox\u0026#39;).length; //è·å–æ‰€æœ‰è¢«é€‰ä¸­çš„CheckBoxçš„æ•°ç›®  checked_len = $(\u0026#39;.cart_list_td\u0026#39;).find(\u0026#39;:checked\u0026#39;).length; if (checked_len \u0026lt; all_len){ $(\u0026#39;.settlements\u0026#39;).find(\u0026#39;:checkbox\u0026#39;).prop(\u0026#39;checked\u0026#39;, false) } else { $(\u0026#39;.settlements\u0026#39;).find(\u0026#39;:checkbox\u0026#39;).prop(\u0026#39;checked\u0026#39;, true) } // æ›´æ–°å•†å“ä¿¡æ¯  update_total_price1() })   ","date":"2018-06-02T10:21:32+08:00","permalink":"https://sunnnner.github.io/p/ajax%E8%AF%AD%E6%B3%95/","title":"Ajaxè¯­æ³•"},{"content":"Django-settingé…ç½®Rediså‚¨å­˜session 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  # redisé…ç½® CACHES= { \u0026#39;default\u0026#39;:{ \u0026#34;BACKEND\u0026#34;: \u0026#39;django_redis.cache.RedisCache\u0026#39;, \u0026#34;LOCATION\u0026#34;: \u0026#34;redis://127.0.0.1:6379/2\u0026#34;, \u0026#34;OPTIONS\u0026#34;: { \u0026#34;CLIENT_CLASS\u0026#34;: \u0026#34;django_redis.client.DefaultClient\u0026#34;, \u0026#34;PASSWORD\u0026#34;: \u0026#34;\u0026#34;, } } } # å‚¨å­˜sessionè®¾ç½® SESSION_ENGING = \u0026#34;django.contrib.session.backends.cache\u0026#34; SESSION_CACHE_ALIAS = \u0026#34;default\u0026#34;   ","date":"2018-06-01T10:20:47+08:00","permalink":"https://sunnnner.github.io/p/django-redis%E9%85%8D%E7%BD%AE/","title":"Django Redisé…ç½®"},{"content":"ç¬¬ä¸€æ­¥åˆ›å»ºDjangoé¡¹ç›®  django-admin startproject blog  åˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨user  python manage.py startapp user  è®¾ç½®settingæ–‡ä»¶ 1 2  ALLOWED_HOSTS=[â€œ*â€]//æ›´æ”¹ä¸ºæ‰€æœ‰éƒ½å¯ä»¥è®¿é—®ä¸Šçº¿æ¨¡å¼ INSTALLEN_APPSâ€”ã€‹åŠ å…¥ç¬¬ä¸€ä¸ªuseråº”ç”¨    åˆ›å»ºtemplatesæ–‡ä»¶å¤¹ å¹¶è®¾ç½®TEMPLATESé‡Œé¢æ–‡ä»¶å¤¹çš„è·¯å¾„os.path.join è®¾ç½®DATABASESçš„å‚¨å­˜ä¸ºmysql  1 2 3 4 5 6 7 8 9 10 11  å­—æ®µ DATABASES = { \u0026#39;default\u0026#39;: { \u0026#39;ENGINE\u0026#39;: \u0026#39;django.db.backends.mysql\u0026#39;, \u0026#39;NAME\u0026#39;: \u0026#39;bookstore\u0026#39;, \u0026#39;USER\u0026#39;:\u0026#39;root\u0026#39;, \u0026#39;PASSWORD\u0026#39;:\u0026#39;123\u0026#39;, \u0026#39;HOST\u0026#39;:\u0026#39;localhost\u0026#39;, \u0026#39;PORT\u0026#39;:3306, } }   ä¿®æ”¹è¯­è¨€ä¸æ—¶åŒº 1 2 3  LANGUAGE_CODE = \u0026#39;zh-Hans\u0026#39; TIME_ZONE = \u0026#39;Asia/Shanghai\u0026#39;   è®¾ç½®é™æ€æ–‡ä»¶æ”¶é›†staticæ–‡ä»¶å¤¹å¹¶åœ¨settingè®¾ç½® 1 2 3 4  STATIC_URL = \u0026#39;/static/\u0026#39; STATICFILES_DIRS = [ os.path.join(BASE_DIR, \u0026#39;static\u0026#39;) ]   è®¾ç½®ä¸»é¡µurlä¸è§†å›¾å‡½æ•° 1 2 3  url(r\u0026#39;^$\u0026#39;,index,name=\u0026#39;index\u0026#39;) def index(request): return render(request, \u0026#39;index.html\u0026#39;)   ç¼–å†™ç”¨æˆ·æ¨¡å— ç¼–å†™æ³¨å†Œæ¨¡å—  é¦–å…ˆç¼–å†™æŠ½è±¡ç±»ï¼Œæ‰€è°“æŠ½è±¡ç±»å°±æ˜¯æ‰€æœ‰ç±»æ¨¡æ¿éƒ½èƒ½ç”¨ä¸Šçš„ç±» åœ¨æ ¹ç›®å½•åˆ›å»ºdb pythonFileæ–‡ä»¶å¤¹  åˆ›å»ºbase_modelæŠ½è±¡åŸºç±»æŠ½è±¡åŸºç±»ç»§æ‰¿models.Model 1 2 3 4 5 6 7 8 9 10  from django.db import models class BaseModel(models.Model): \u0026#39;\u0026#39;\u0026#39;æ¨¡å‹æŠ½è±¡åŸºç±»\u0026#39;\u0026#39;\u0026#39; is_delete = models.BooleanField(default=False, verbose_name=\u0026#39;æ˜¯å¦åˆ é™¤\u0026#39;) create_time = models.DateTimeField(auto_now_add=True, verbose_name=\u0026#39;åˆ›å»ºæ—¶é—´\u0026#39;) update_time = models.DateTimeField(auto_now=True, verbose_name=\u0026#39;æ›´æ–°æ—¶é—´\u0026#39;) class Meta: # ç»§æ‰¿æŠ½è±¡ç±» abstract = True    æ ¹ç›®å½•åˆ›å»ºutilsæ–‡ä»¶å¤¹è¯¥æ–‡ä»¶å¤¹çš„ä½œç”¨ä½œä¸ºåŠ å¯†ç”¨æˆ·å¯†ç  åˆ›å»ºget_hashæ–‡ä»¶å¤¹  1 2 3 4 5 6 7  from hashlib import sha256 def get_hash(str): \u0026#39;\u0026#39;\u0026#39;å–ä¸€ä¸ªå­—ç¬¦ä¸²çš„hashå€¼\u0026#39;\u0026#39;\u0026#39; sh = sha256 sh.update(str.encode(\u0026#39;utf8\u0026#39;)) return sh.hexdigest()    æ‰“å¼€appå†…çš„modelsæ¨¡å—å¼€å§‹ç¼–å†™ç”¨æˆ·æ¨¡å— å¯¼å…¥get_hashå‡½æ•° å¯¼å…¥æŠ½è±¡åŸºç±» åˆ›å»ºç”¨æˆ·å­—æ®µä½¿å…¶ç»§æ‰¿ä¸æŠ½è±¡åŸºç±» å…¶ä¸­db_tableçš„ä½œç”¨ä¸ºåˆ¶å®šåˆ›å»ºæ•°æ®åº“çš„åç§°  1 2 3 4 5 6 7 8 9 10 11 12  class Passport(BaseModel): username = models.CharField(max_length=20,verbose_name=\u0026#39;ç”¨æˆ·åç§°\u0026#39;,unique=True) password = models.CharField(max_length=40,verbose_name=\u0026#39;ç”¨æˆ·å¯†ç \u0026#39;) email = models.EmailField(verbose_name=\u0026#39;ç”¨æˆ·é‚®ç®±\u0026#39;) is_active = models.BooleanField(default=False, verbose_name=\u0026#39;æ¿€æ´»çŠ¶æ€\u0026#39;) # åˆ›å»ºç”¨æˆ·è¡¨çš„ç®¡ç†å™¨ object = PassportManager() class Meta(): # æŒ‡å®šæ•°æ®åº“åç§° db_table = \u0026#39;s_user_accoumt\u0026#39;    åˆ›å»ºæ·»åŠ ç”¨æˆ·è·ŸæŸ¥æ‰¾ç”¨æˆ·æ¨¡å—æ³¨æ„æ­¤å­—æ®µå¿…é¡»åœ¨ç”¨æˆ·æ¨¡å—çš„ä¸Šæ–¹å› ä¸ºæ­¤å­—æ®µç»§æ‰¿çš„model.Manageræ¨¡å—åœ¨ç”¨æˆ·æ¨¡å—ä¹‹ä¸Š  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  class PassportManager(models.Manager): def add_user(self,username, password, email): \u0026#39;\u0026#39;\u0026#39;æ·»åŠ ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯\u0026#39;\u0026#39;\u0026#39; # sä½¿ç”¨crateæ–¹æ³•æ·»åŠ ä¸€ä¸ªç”¨æˆ· passport = self.create(username=username, password=get_hash(password), email=email) # å¹¶ä¸”è¿”å›å½“å‰çš„æ•°æ® return passport def find_user(self,username, password): \u0026#39;\u0026#39;\u0026#39;æ ¹æ®ç”¨æˆ·çš„ä¿¡æ¯è¿›è¡ŒæŸ¥æ‰¾ç”¨æˆ·\u0026#39;\u0026#39;\u0026#39; try: passport = self.get(username=username, password=get_hash(password)) except self.model.DoesNotExist: # è´¦æˆ·ä¸å­˜åœ¨ print(\u0026#34;=======\u0026#34;) passport = None # è¿”å›å½“å‰çš„ä¿¡æ¯ return passport    åˆ›å»ºå®Œæˆä¹‹åpython3 manage.py makemigrationsè¿ç§»åŒæ­¥ ç¼–å†™ç”¨æˆ·æ³¨å†Œè§†å›¾å‡½æ•°  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  url(râ€™^/register/$â€™, register, name=â€™registerâ€™), def register(request): if request.method == \u0026#39;GET\u0026#39;: return render(request,\u0026#39;register.html\u0026#39;) else: username = request.POST.get(\u0026#39;user_name\u0026#39;) password = request.POST.get(\u0026#39;pwd\u0026#39;) password1 = request.POST.get(\u0026#39;cpwd\u0026#39;) email = request.POST.get(\u0026#39;email\u0026#39;) # allæ–¹æ³•è¿›è¡Œæ•°æ®æ ¡éªŒï¼Œå¦‚æœé‡Œé¢ä»»æ„å€¼ä¸ºç©ºï¼Œå°±ä¸é€šè¿‡æ ¡éªŒ if not all([username,password,password1,email]): return render(request, \u0026#39;register.html\u0026#39;, { \u0026#39;msg\u0026#39;:\u0026#39;ä¸èƒ½è¾“å…¥æœ‰ç©ºçš„å‚æ•°\u0026#39; }) # é‚®ç®±æ­£åˆ™éªŒè¯ if not re.match(r\u0026#39;[a-z0-9][\\w\\.\\-]*@[a-z0-9\\-]+(\\.[a-z]{2,5}){1,2}$\u0026#39;, email): return render(request, \u0026#39;register.html\u0026#39;, {\u0026#39;msg\u0026#39;:\u0026#39;è¾“å…¥çš„é‚®ç®±ä¸æ­£ç¡®\u0026#39;}) # é€šè¿‡å‘æ•°æ®åº“æ·»åŠ ç”¨æˆ·ä¿¡æ¯ # è°ƒç”¨æ·»åŠ ç”¨æˆ·çš„æ–¹æ³• passport = Passport.object.add_user(username=username, password=password, email=email) return redirect(reverse(\u0026#39;user:register\u0026#39;), {\u0026#39;cmsg\u0026#39;:\u0026#39;æ³¨å†ŒæˆåŠŸ\u0026#39;})   åˆ›å»ºç™»å½•æ¨¡å—  url(râ€™^login/$â€™, login, name=â€™loginâ€™), å› ä¸ºç™»å½•æ¨¡å—ç”¨åˆ°ajax æ‰€ä»¥æˆ‘ä»¬å…ˆå†™å‰ç«¯æ•°æ® é¦–å…ˆajaxä¼ è¾“ä¸ç”¨è¡¨å•æ•°æ®æˆ‘ä»¬å°±åˆ é™¤fromè¡¨å•  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52  \u0026lt;div class=\u0026#34;form_input\u0026#34;\u0026gt; {% csrf_token %} \u0026lt;input type=\u0026#34;text\u0026#34; id=\u0026#34;username\u0026#34; value=\u0026#34;{{ username }}\u0026#34; class=\u0026#34;name_input\u0026#34; placeholder=\u0026#34;è¯·è¾“å…¥ç”¨æˆ·å\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;user_error\u0026#34;\u0026gt;è¾“å…¥é”™è¯¯\u0026lt;/div\u0026gt; \u0026lt;input type=\u0026#34;password\u0026#34; id=\u0026#34;pwd\u0026#34; class=\u0026#34;pass_input\u0026#34; placeholder=\u0026#34;è¯·è¾“å…¥å¯†ç \u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;pwd_error\u0026#34;\u0026gt;è¾“å…¥é”™è¯¯\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;more_input clearfix\u0026#34;\u0026gt; \u0026lt;input type=\u0026#34;checkbox\u0026#34; id=\u0026#34;remember\u0026#34; checked={{ checked }}\u0026gt; \u0026lt;label\u0026gt;è®°ä½ç”¨æˆ·å\u0026lt;/label\u0026gt; \u0026lt;a href=\u0026#34;#\u0026#34;\u0026gt;å¿˜è®°å¯†ç \u0026lt;/a\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;input type=\u0026#34;button\u0026#34; id=\u0026#34;btnLogin\u0026#34; value=\u0026#34;ç™»å½•\u0026#34; class=\u0026#34;input_submit\u0026#34;\u0026gt; \u0026lt;/div\u0026gt; AJAX \u0026lt;script src=\u0026#34;{% static \u0026#39;js/jquery-1.12.4.min.js\u0026#39; %}\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; $(function () { $(\u0026#39;#btnLogin\u0026#39;).click(function () { //è·å–ç”¨æˆ·åå’Œå¯†ç   # ä½¿ç”¨jquayè·å–ç”¨æˆ·çš„ä¿¡æ¯ var username = $(\u0026#39;#username\u0026#39;).val(); var password = $(\u0026#39;#pwd\u0026#39;).val(); # è®¾ç½®csrf_tokenä¸ºæ ‡ç­¾è®¾ç½®å…¶å±æ€§name=csrfmiddlewaretokenå¹¶å°†è·å–åˆ°çš„cdrf_tokençš„å€¼èµ‹å€¼ç»™csrf var csrf = $(\u0026#39;input[name=\u0026#34;csrfmiddlewaretoken\u0026#34;]\u0026#39;).val(); # è¿”å›å½“å‰è®°ä½ç”¨æˆ·çš„çŠ¶æ€true/false var remember = $(\u0026#39;#remember\u0026#39;).prop(\u0026#39;checked\u0026#39;); //å‘èµ·ajaxè¯·æ±‚  params = {\u0026#39;username\u0026#39;:username, \u0026#39;password\u0026#39;:password, \u0026#39;csrfmiddlewaretoken\u0026#39;:csrf, \u0026#39;remember\u0026#39;:remember}; //ajaxå°†pythonå­—å…¸è½¬æ¢ä¸ºäº†jsonå­—ç¬¦ä¸²å‹å­—å…¸æ­¤æ—¶ç±»å‹ä¸ºjsonç±»å‹  $.post(\u0026#39;{% url \u0026#34;user:login\u0026#34; %}\u0026#39;, params, function(data){ //ç”¨æˆ·åå¯†ç é”™è¯¯{\u0026#39;res\u0026#39;:0}  //ç™»å½•æˆåŠŸ{\u0026#39;res\u0026#39;:1}  //çŠ¶æ€ç çŠ¶æ€ç ä¸º01ï¼Œ2  if (data.res == 0) { alert(\u0026#39;ç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯\u0026#39;) } else if(data.res == 1) { //è·³è½¬é¡µé¢ è·å–åç«¯next_url  location.href = data.next_url } else if(data.res == 2) { alert(\u0026#39;è¯·å¡«å†™å®Œæ•´çš„ç”¨æˆ·åæˆ–è€…å¯†ç \u0026#39;) } }) }) }) \u0026lt;/script\u0026gt;   åç«¯ä»£ç   ç”¨æˆ·ç™»å½•æ ¡éªŒ  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51  def login(request): if request.method == \u0026#39;GET\u0026#39;: # è®°ä½ç”¨æˆ·ååŠŸèƒ½ checkedè¡¨ç¤ºå•é€‰æ¡†çŠ¶æ€ if request.COOKIES.get(\u0026#34;username\u0026#34;): username = request.COOKIES.get(\u0026#34;username\u0026#34;) checked = True else: username = \u0026#39;\u0026#39; checked = \u0026#39;\u0026#39; context = { \u0026#39;username\u0026#39;: username, \u0026#39;checked\u0026#39; : checked, } return render(request, \u0026#39;login.html\u0026#39;, context) elif request.method == \u0026#39;POST\u0026#39;: # æ­¤æ—¶postå–çš„æ˜¯å‰æ®µajaxæ•°æ®å¹¶ä¸æ˜¯è¡¨å•æ•°æ®å› ä¸ºè¡¨å•å·²ç»åˆ é™¤ username = request.POST.get(\u0026#39;username\u0026#39;) password = request.POST.get(\u0026#39;password\u0026#39;) remember = request.POST.get(\u0026#39;remember\u0026#39;) # æ•°æ®æ ¡éªŒ ä½¿ç”¨all()æ–¹æ³•è¿›è¡Œæ ¡éªŒåªæœ‰ä¸¤ä¸ªéƒ½ä¸ä¸ºç©ºæ—¶æ‰ä¸ºtrue if not all([username, password]): # æ•°æ®ä¸ºç©º è¿”å›ajaxé‡Œé¢çš„çŠ¶æ€ç jsonæ•°æ® return JsonResponse({\u0026#39;res\u0026#39;: 2}) # è°ƒç”¨æŸ¥æ‰¾æ–¹æ³•åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å­˜åœ¨ passport = Passport.object.find_user(username=username,password=password) if passport: # ä¸¤ç§æ–¹æ³•éƒ½æ˜¯é‡å®šå‘åˆ°ä¸»é¡µ # next_url = request.session.get(\u0026#39;url_path\u0026#39;, reverse(\u0026#39;index\u0026#39;)) next_url = \u0026#39;/\u0026#39; print(\u0026#39;---------------\u0026#39;) # ç™»å½•æˆåŠŸ è¿”å›çŠ¶æ€ç å¹¶è®¾ç½®next_urlæ•°æ®ä¼ è¾“åˆ°å‰æ®µéƒ½æ˜¯å­—å…¸æ¨¡å¼ä¼šè‡ªåŠ¨è½¬æ¢æˆjsonå­—ç¬¦ä¸² jire = JsonResponse({\u0026#39;res\u0026#39;: 1, \u0026#39;next_url\u0026#39;: next_url}) # å¦‚æœå•é€‰æ¡†é€‰ä¸­ if remember == \u0026#39;true\u0026#39;: # è®°ä½ç”¨æˆ·åå¹¶è®¾ç½®cookieçš„ä¿å­˜æ—¶é—´ jire.set_cookie(\u0026#39;username\u0026#39;, username, max_age=1*24*3600) else: # ä¸è¦è®°ä½ç”¨æˆ·åå¹¶åˆ é™¤cookie jire.delete_cookie(\u0026#39;username\u0026#39;) # è®°ä½ç”¨æˆ·åçš„çŠ¶æ€ # è®¾ç½®æ˜¯å¦ç™»å½•çŠ¶æ€å‰æ®µè¦ç”¨ç”¨sessionä¿å­˜åˆ°æœåŠ¡å™¨ request.session[\u0026#39;islogin\u0026#39;] = True request.session[\u0026#39;username\u0026#39;] = username # å½“å‰ç”¨æˆ·çš„å”¯ä¸€æ ‡ç¤º request.session[\u0026#39;passport_id\u0026#39;] = passport.id return jire else: return JsonResponse({\u0026#39;res\u0026#39;: 0})   é€€å‡º 1 2 3 4 5 6 7  url(râ€™^logout/$â€™, logout, name=â€™logoutâ€™), def logout(request): \u0026#39;\u0026#39;\u0026#39;ç”¨æˆ·é€€å‡ºæ“ä½œ\u0026#39;\u0026#39;\u0026#39; # æ¸…ç©ºç”¨æˆ·sessionæ•°æ® request.session.flush() # ç„¶åè·³è½¬é¦–é¡µ return redirect(reverse(\u0026#39;index\u0026#39;))   ","date":"2018-06-01T10:15:16+08:00","permalink":"https://sunnnner.github.io/p/django%E7%94%A8%E6%88%B7%E6%A8%A1%E5%9D%97/","title":"Djangoç”¨æˆ·æ¨¡å—"},{"content":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  1) ç»‘å®šIPåœ°å€,çœ‹ä¸šåŠ¡å¼€æ”¾bind 0.0.0.02)Redisé»˜è®¤ä¸æ˜¯ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡Œï¼Œå¯ä»¥é€šè¿‡è¯¥é…ç½®é¡¹ä¿®æ”¹ï¼Œä½¿ç”¨yeså¯ç”¨å®ˆæŠ¤è¿›ç¨‹ï¼Œè®¾ç½®ä¸ºnodaemonize no3)ä¿æŠ¤æ¨¡å¼protected-mode no # æ£€æŸ¥å¯åŠ¨çŠ¶æ€å‘½ä»¤ps -ef|grep redis |grep 6379macä»¥é…ç½®æ–‡ä»¶å¯åŠ¨sudo redis-server /usr/local/etc/redis.confUbuntuä»¥é…ç½®æ–‡ä»¶å¯åŠ¨sudo redis-server /etc/redis/redis.conf  ","date":"2018-05-31T18:53:17+08:00","permalink":"https://sunnnner.github.io/p/redis%E9%85%8D%E7%BD%AE/","title":"Redisé…ç½®"},{"content":"Â·Â·Â· æˆ‘ç†è§£æ˜¯å‹ç¼©ä»£ç ç„¶åå‡å°‘è¯·æ±‚ï¼Œå¤šä½¿ç”¨ajax å›¾ç‰‡å­˜ç¬¬ä¸‰æ–¹èµ„æºåº“\nå…¨é™æ€ï¼Œè¯»å†™åˆ†ç¦»ï¼ŒåŠ å¸¦å®½ å†å¼€cdn\n","date":"2018-05-31T18:47:29+08:00","permalink":"https://sunnnner.github.io/p/%E6%80%8E%E4%B9%88%E5%8A%A0%E5%BF%AB%E9%A1%B5%E9%9D%A2%E7%9A%84%E8%AE%BF%E9%97%AE%E9%80%9F%E5%BA%A6/","title":"æ€ä¹ˆåŠ å¿«é¡µé¢çš„è®¿é—®é€Ÿåº¦"},{"content":" é¦–å…ˆæ–°å»ºappâ€”\u0026gt;bookså¹¶æ·»åŠ settingsé‡Œé¢ å› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨åå°adminä¸Šä¼ æ•°æ®æ‰€ä»¥æˆ‘ä»¬è¦åˆ›å»ºå¯Œæ–‡æœ¬ç®¡ç†å™¨å¹¶åœ¨settingè®¾ç½®ä»–çš„é€‰é¡¹ å¯Œæ–‡æœ¬ç®¡ç†å™¨æ˜¯ä¸€ä¸ªæ’ä»¶æˆ‘ä»¬è¿™æ¬¡ä½¿ç”¨çš„æ˜¯tinymceå¹¶ä¸”æˆ‘ä»¬éœ€è¦å°†å®ƒåŠ å…¥åˆ°appsé‡Œé¢å› ä¸ºä»–æ˜¯ä¸€ä¸ªåº”ç”¨ï¼Œä½†æ˜¯è¿™ä¸ªåº”ç”¨æ˜¯éœ€è¦ä¸‹è½½çš„  1 2 3 4 5  TINTMCE_DEFAULT_CONFIG = { \u0026#39;theme\u0026#39;: \u0026#34;modern\u0026#34;, \u0026#39;wight\u0026#39;: 600, \u0026#39;height\u0026#39;: 400, }     æˆ‘ä»¬éœ€è¦è®¾ç½®åˆ¶å®šä¸€ä¸ªåª’ä½“æ–‡ä»¶å¤¹æ¥å­˜æ”¾æˆ‘ä»¬çš„å›¾ç‰‡MEDIA_ROOT = os.path.join(BASE_DIR, 'static')\n  æ·»åŠ åº”ç”¨çš„urls``\n  1 2  url(r\u0026#39;^books/\u0026#39;, include(\u0026#39;books.urls\u0026#39;,namespace=\u0026#39;books\u0026#39;)), url(r\u0026#39;^tinymce/\u0026#39;, include(\u0026#39;tinymce.urls\u0026#39;,namespace=\u0026#39;tinymce\u0026#39;)),    æˆ‘ä»¬å¼€å§‹å†™booksé‡Œé¢çš„å­—æ®µé¦–å…ˆæŸ¥çœ‹é¡µé¢æˆ‘ä»¬éœ€è¦ä»€ä¹ˆå­—æ®µ é¦–å…ˆæˆ‘ä»¬åˆ›å»ºtinymacå¯Œæ–‡æœ¬éœ€è¦çš„å­—æ®µï¼Œè¿™é‡Œçš„å­—æ®µæ˜ å°„å…¨å±€ åœ¨booksç›®å½•ä¸‹åˆ›å»ºä»»æ„çš„.pyæ–‡ä»¶è¿™é‡Œæˆ‘çš„æ˜¯emums.py  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  # æ­¤å¤„1ï¼Œ2ï¼Œ3ï¼Œ4ä»£è¡¨ä¹¦æœ¬çš„id PYTHON = 1 JAVASCRIPT = 2 ALGORITHMS = 3 MACHINELEARNING = 4 OPERATINSGYSTEM = 5 DATABASE = 6 # BOOKS_TYPEä½œä¸ºä¸€ä¸ªå­—å…¸ä¼ è¾“åˆ°models BOOKS_TYPE = { PYTHON: \u0026#39;python\u0026#39;, JAVASCRIPT: \u0026#39;javascript\u0026#39;, ALGORITHMS: \u0026#39;æ•°æ®åº“ç»“æ„ä¸ç®—æ³•\u0026#39;, MACHINELEARNING: \u0026#39;æœºå™¨å­¦ä¹ \u0026#39;, OPERATINSGYSTEM: \u0026#39;æ“ä½œç³»ç»Ÿ\u0026#39;, DATABASE: \u0026#39;æ•°æ®åº“\u0026#39;, } # ä»£è¡¨å•†å“çš„ä¸Šçº¿æˆ–è€…ä¸‹çº¿çŠ¶æ€ OFFLINE = 0 ONLINE = 1 STATUS_CHOICE = { OFFLINE: \u0026#39;ä¸‹çº¿\u0026#39;, ONLINE: \u0026#39;ä¸Šçº¿\u0026#39;, }    æˆ‘ä»¬å¼€å§‹å†™models.py  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70  from django.db import models from db.base_model import BaseModel from tinymce.models import HTMLField from books.enums import BOOKS_TYPE, STATUS_CHOICE,PYTHON,ONLINE # Create your models here. class BookManager(models.Manager): \u0026#39;\u0026#39;\u0026#39;å•†å“æ¨¡å‹ç®¡ç†å™¨ç±»\u0026#39;\u0026#39;\u0026#39; # type_id è¡¨ç¤ºå‰æ®µä¼ è¾“å•†å“idè¿›è¡ŒæŸ¥æ‰¾å•†å“. limitè¡¨ç¤ºè¿”å›å‡ ä¸ªä¹‹å‰çš„å•†å“çš„æ•°æ®, sortä»£è¡¨æ’åºçŠ¶æ€ï¼Œåˆå§‹å€¼é»˜è®¤ def get_books_by_type(self, type_id, limit=None, sort=\u0026#39;default\u0026#39;): \u0026#39;\u0026#39;\u0026#39;æ ¹æ®å•†å“ç±»å‹idæŸ¥è¯¢å•†å“ä¿¡æ¯\u0026#39;\u0026#39;\u0026#39; # å¦‚æœæ˜¯æ–°å•†å“å°±æ ¹æ®ä»–çš„æ·»åŠ æ—¶é—´è¿›è¡Œæ’åº-ä»£è¡¨ä»å¤§åˆ°å°è¿›è¡Œæ’åº if sort == \u0026#39;new\u0026#39;: order_by = (\u0026#39;-create_time\u0026#39;,) # æ ¹æ®é”€é‡æœ€å¤šè¿›è¡Œæ’åº elif sort == \u0026#39;hot\u0026#39;: order_by = (\u0026#39;-sales\u0026#39;,) # æ ¹æ®ä»·æ ¼è¿›è¡Œæ’åº elif sort == \u0026#39;price\u0026#39;: order_by = (\u0026#39;price\u0026#39;,) else: # pkå›½å¤–ä»£è¡¨ä¸€ç§ä¸»é”®çš„ç®€å†™ï¼Œåˆ«çš„åå­—ä¹Ÿè¡Œè¿™æ˜¯æ•´ä¸ªè¡¨çš„ä¸»é”®ï¼Œè¿™é‡Œä»£è¡¨çš„æ„æ€å°±æ˜¯é»˜è®¤æŒ‰ç…§ä¸»é”®primary_keyä»å¤§åˆ°å°é»˜è®¤è¿›è¡Œæ’åº order_by = (\u0026#39;-pk\u0026#39;,) # æŸ¥è¯¢æ•°æ® filteræ˜¯è¿‡æ»¤æ•°æ®ï¼Œorder_byæ˜¯æ’åºï¼Œ(*order_by)æ˜¯å¯¹ä¸Šé¢çš„order_byè¿›è¡Œè§£åŒ…æˆåˆ—è¡¨ # å¯¹è§£åŒ…çš„æ•°æ®è¿›è¡Œè¿‡æ»¤æ’åºå¹¶è¿”å›ä¸€ä¸ªæ–°çš„åˆ—è¡¨books_li books_li = self.filter(type_id=type_id).order_by(*order_by) # æŸ¥è¯¢ç»“æœé›†çš„é™åˆ¶ if limit: books_li = books_li[:limit] return books_li def get_books_by_id(self, books_id): \u0026#39;\u0026#39;\u0026#39;æ ¹æ®å•†å“idè·å–å•†å“ä¿¡æ¯\u0026#39;\u0026#39;\u0026#39; try: books = self.get(id=books_id) except self.model.DoesNotExist: # å•†å“ä¸å­˜åœ¨ books = None return books class Books(BaseModel): \u0026#39;\u0026#39;\u0026#39;å•†å“æ¨¡å‹ç±»\u0026#39;\u0026#39;\u0026#39; # ä½¿ç”¨è¿­ä»£å™¨è¿›è¡Œæ•°æ®èµ‹å€¼ å› ä¸ºbooks_typeæ˜¯å­—å…¸æ‰€ä»¥è¦å–items books_type_choices = ((k, v) for k, v in BOOKS_TYPE.items()) status_choices = ((k, v) for k, v in STATUS_CHOICE.items()) # å®šä¹‰ä¹¦ç±çš„idä¸ä¹¦ç±çš„çŠ¶æ€ type_id = models.SmallIntegerField(default=PYTHON, choices=books_type_choices,verbose_name=\u0026#39;å•†å“ç§ç±»\u0026#39;) name = models.CharField(max_length=20, verbose_name=\u0026#39;å•†å“åç§°\u0026#39;) desc = models.CharField(max_length=128, verbose_name=\u0026#39;å•†å“ç®€ä»‹\u0026#39;) # decimal_placesä»£è¡¨å°æ•°åä¸¤ä½ price = models.DecimalField(max_digits=10, decimal_places=2, verbose_name=\u0026#39;å•†å“ä»·æ ¼\u0026#39;) unit = models.CharField(max_length=20, verbose_name=\u0026#39;å•†å“å•ä½\u0026#39;) stock = models.IntegerField(default=1, verbose_name=\u0026#39;å•†å“åº“å­˜\u0026#39;) sales = models.IntegerField(default=0, verbose_name=\u0026#39;å•†å“é”€é‡\u0026#39;) detail = HTMLField(verbose_name=\u0026#39;å•†å“è¯¦æƒ…\u0026#39;) # upload_toæ‰€ä»¥å¯ä»¥ç”¨uoload_toæ¥æŒ‡å®šæ–‡ä»¶å­˜æ”¾çš„å‰ç¼€è·¯å¾„ # å®é™…çš„è·¯å¾„å°±æ˜¯ MEDIA_ROOT/books/filename image = models.ImageField(upload_to=\u0026#39;books\u0026#39;, verbose_name=\u0026#39;å•†å“å›¾ç‰‡\u0026#39;) status = models.SmallIntegerField(default= ONLINE, choices=status_choices,verbose_name=\u0026#39;å•†å“çŠ¶æ€\u0026#39;) def __str__(self): return self.name # åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨ object = BookManager() class Meta(): #åˆ¶å®šæ•°æ®åº“åç§° db_table = \u0026#39;s_books\u0026#39;    å°†ç”¨æˆ·æ¨¡å—æ³¨å†Œåˆ°admin  1 2 3 4 5  from django.contrib import admin from books.models import Books # Register your models here. admin.site.register(Books)    åˆ›å»ºç”¨æˆ·ä¸»é¡µè§†å›¾viewsä¿¡æ¯  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39  from django.shortcuts import render,redirect from books.models import Books from books.enums import * from django.core.urlresolvers import reverse from django.core.paginator import Paginator # Create your views here. def index(request): \u0026#39;\u0026#39;\u0026#39;æ˜¾ç¤ºé¦–é¡µ\u0026#39;\u0026#39;\u0026#39; python_new = Books.object.get_books_by_type(PYTHON, 3, sort=\u0026#39;new\u0026#39;) python_hot = Books.object.get_books_by_type(PYTHON, 4, sort=\u0026#39;hot\u0026#39;) javascript_new = Books.object.get_books_by_type(JAVASCRIPT, 3, sort=\u0026#39;new\u0026#39;) javascript_hot = Books.object.get_books_by_type(JAVASCRIPT, 4, sort=\u0026#39;hot\u0026#39;) algorithms_new = Books.object.get_books_by_type(ALGORITHMS, 3, sort=\u0026#39;new\u0026#39;) algorithms_hot = Books.object.get_books_by_type(ALGORITHMS, 4, sort=\u0026#39;new\u0026#39;) machinelearning_new = Books.object.get_books_by_type(MACHINELEARNING, 3,sort=\u0026#39;new\u0026#39;) machinelearning_hot = Books.object.get_books_by_type(MACHINELEARNING, 4, sort=\u0026#39;hot\u0026#39;) operatingsystem_new = Books.object.get_books_by_type(OPERATINSGYSTEM, 3, sort=\u0026#39;new\u0026#39;) operatingsystem_hot = Books.object.get_books_by_type(OPERATINSGYSTEM, 4, sort=\u0026#39;hot\u0026#39;) database_new = Books.object.get_books_by_type(DATABASE, 3, sort=\u0026#39;new\u0026#39;) database_hot = Books.object.get_books_by_type(DATABASE, 4, sort=\u0026#39;hot\u0026#39;) # å®šä¹‰æ¨¡æ¿ä¸Šä¸‹æ–‡ content = { \u0026#39;python_new\u0026#39;: python_new, \u0026#39;python_hot\u0026#39;: python_hot, \u0026#39;javascript_new\u0026#39;: javascript_new, \u0026#39;javascript_hot\u0026#39;: javascript_hot, \u0026#39;algorithms_new\u0026#39;: algorithms_new, \u0026#39;algorithms_hot\u0026#39;: algorithms_hot, \u0026#39;machinelearning_new\u0026#39;: machinelearning_new, \u0026#39;machinelearning_hot\u0026#39;: machinelearning_hot, \u0026#39;operatingsystem_new\u0026#39;: operatingsystem_new, \u0026#39;operatingsystem_hot\u0026#39;: operatingsystem_hot, \u0026#39;database_new\u0026#39;: database_new, \u0026#39;database_hot\u0026#39;: database_hot, } return render(request, \u0026#39;index.html\u0026#39;, content)    åˆ›å»ºå•†å“è¯¦æƒ…é¡µ é¦–å…ˆåˆ›å»ºurlurl(r'^(?P\u0026lt;books_id\u0026gt;\\d+)/$',deatil,name='deatil') åˆ›å»ºè§†å›¾  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  def deatil(request, books_id): \u0026#39;\u0026#39;\u0026#39;æ˜¾ç¤ºå•†å“çš„è¯¦ç»†ä¿¡æ¯\u0026#39;\u0026#39;\u0026#39; books = Books.object.get_books_by_id(books_id=books_id) if books is None: return redirect(reverse(\u0026#39;index\u0026#39;)) # æ–°å“æ¨è books_li = Books.object.get_books_by_type(type_id=books.type_id, limit=2, sort=\u0026#39;new\u0026#39;) # å®šä¹‰è¿”å›æ•°æ® content = { \u0026#39;books\u0026#39;: books, \u0026#39;books_li\u0026#39;: books_li, } return render(request, \u0026#39;detail.html\u0026#39;, content)    è®¾ç½®å‰ç«¯æ˜¾ç¤ºæ¨¡æ¿è¯­è¨€  ","date":"2018-05-31T18:47:29+08:00","permalink":"https://sunnnner.github.io/p/%E9%A1%B5%E9%9D%A2%E5%BC%80%E5%8F%91/","title":"é¡µé¢å¼€å‘"}]