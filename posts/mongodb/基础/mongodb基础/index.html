<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="学无止境,hugo,python,go,java,linux,mysql,redis,nginx,git,github,linux,mysql,redis,nginx,git,github,微服务,个人博客"
  />
  
    
      <title> MongoDB 完全指南 | 学无止境</title>
    
  
  <link rel="stylesheet" href="/css/reset.css"/>
  <link rel="stylesheet" href="/css/font.css"/>
  <link rel="stylesheet" href="/css/smigle.css"/>
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
</head>

  <body>
    <div id="root">
      <header>
  <div id="brand">
    <a class="icon-link" href="https://sunnnner.github.io/">
      <img
        class="icon"
        src="/images/brandIcon.svg"
      />
    </a>
    <div class="text">
      <a href="https://sunnnner.github.io/"><h1>学无止境</h1></a>
      <h3>少年辛苦终身事,莫向光阴惰寸功。——唐·杜荀鹤《题弟侄书堂》</h3>
    </div>
  </div>
  <nav>
    
      
        
        <a href="/posts/"><b>主页</b></a>
      
         | 
        <a href="/categories/"><b>类别</b></a>
      
         | 
        <a href="/tags/"><b>标签</b></a>
      
    
  </nav>
  <hr />
</header>

      <div id="content">
        
  <main>
    <article>
      <h1 class="title"> MongoDB 完全指南</h1>
      
      <div class="post-meta">
  <strong>
    <span>Posted on</span>
    <time>12.07.2022</time>
    <span>in</span>
    
      <a href="/categories/mongodb">mongodb</a>
  </strong>
  <span> • 282 words</span>
  <span> • 2 minute read</span>
  
  
</div>

      <div class="content"><h2 id="1-nosql概述">1. NoSQL概述</h2>
<h3 id="11-什么是nosql">1.1 什么是NoSQL</h3>
<ul>
<li>NoSQL (Not Only SQL) 是非关系型数据库的统称</li>
<li>适用于处理大规模数据、高并发读写、灵活的数据模型等场景</li>
</ul>
<h3 id="12-nosql优势">1.2 NoSQL优势</h3>
<ul>
<li>高扩展性和分布式友好</li>
<li>成本效益高</li>
<li>架构灵活,无需预定义模式</li>
<li>简化的数据关系</li>
</ul>
<h3 id="13-nosql局限">1.3 NoSQL局限</h3>
<ul>
<li>缺乏统一标准</li>
<li>查询功能相对受限</li>
<li>最终一致性模型可能带来复杂性</li>
</ul>
<h3 id="14-nosql数据库分类">1.4 NoSQL数据库分类</h3>
<ol>
<li>键值存储数据库 (如Redis)</li>
<li>列族存储数据库 (如Cassandra)</li>
<li>文档型数据库 (如MongoDB)</li>
<li>图形数据库 (如Neo4j)</li>
</ol>
<h2 id="2-mongodb基础">2. MongoDB基础</h2>
<h3 id="21-mongodb简介">2.1 MongoDB简介</h3>
<p>MongoDB是一个开源的文档型数据库,具有以下特点:</p>
<ul>
<li>文档导向</li>
<li>高性能</li>
<li>高可用性</li>
<li>易扩展</li>
<li>丰富的查询语言</li>
</ul>
<h3 id="22-核心概念对比">2.2 核心概念对比</h3>
<table>
  <thead>
      <tr>
          <th>SQL概念</th>
          <th>MongoDB概念</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Database</td>
          <td>Database</td>
          <td>数据库</td>
      </tr>
      <tr>
          <td>Table</td>
          <td>Collection</td>
          <td>数据集合</td>
      </tr>
      <tr>
          <td>Row</td>
          <td>Document</td>
          <td>数据文档</td>
      </tr>
      <tr>
          <td>Column</td>
          <td>Field</td>
          <td>数据字段</td>
      </tr>
      <tr>
          <td>Index</td>
          <td>Index</td>
          <td>索引</td>
      </tr>
      <tr>
          <td>Join</td>
          <td>$lookup</td>
          <td>表关联</td>
      </tr>
  </tbody>
</table>
<h3 id="23-基本命令">2.3 基本命令</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 数据库操作</span>
</span></span><span style="display:flex;"><span>mongo                    <span style="color:#75715e"># 进入MongoDB Shell</span>
</span></span><span style="display:flex;"><span>show dbs                 <span style="color:#75715e"># 显示所有数据库</span>
</span></span><span style="display:flex;"><span>use &lt;database&gt;          <span style="color:#75715e"># 切换数据库</span>
</span></span><span style="display:flex;"><span>db                      <span style="color:#75715e"># 查看当前数据库</span>
</span></span><span style="display:flex;"><span>db.dropDatabase<span style="color:#f92672">()</span>       <span style="color:#75715e"># 删除当前数据库</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 集合操作</span>
</span></span><span style="display:flex;"><span>show collections        <span style="color:#75715e"># 显示所有集合</span>
</span></span><span style="display:flex;"><span>db.createCollection<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">)</span> <span style="color:#75715e"># 创建集合</span>
</span></span><span style="display:flex;"><span>db.&lt;collection&gt;.drop<span style="color:#f92672">()</span>  <span style="color:#75715e"># 删除集合</span>
</span></span></code></pre></div><h2 id="3-数据操作">3. 数据操作</h2>
<h3 id="31-数据类型">3.1 数据类型</h3>
<ul>
<li>ObjectId: 文档唯一标识符</li>
<li>String: 字符串</li>
<li>Number: 数字</li>
<li>Boolean: 布尔值</li>
<li>Array: 数组</li>
<li>Object: 嵌入式文档</li>
<li>Null: 空值</li>
<li>Date: 日期时间</li>
<li>Timestamp: 时间戳</li>
</ul>
<h3 id="32-crud操作">3.2 CRUD操作</h3>
<h4 id="创建create">创建(Create)</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// 插入单个文档
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">collection</span>.<span style="color:#a6e22e">insertOne</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;张三&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">25</span>
</span></span><span style="display:flex;"><span>})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 插入多个文档
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">collection</span>.<span style="color:#a6e22e">insertMany</span>([
</span></span><span style="display:flex;"><span>    { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;李四&#34;</span>, <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">30</span> },
</span></span><span style="display:flex;"><span>    { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;王五&#34;</span>, <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">35</span> }
</span></span><span style="display:flex;"><span>])
</span></span></code></pre></div><h4 id="读取read">读取(Read)</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// 查询所有文档
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">collection</span>.<span style="color:#a6e22e">find</span>({})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 条件查询
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">collection</span>.<span style="color:#a6e22e">find</span>({ <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">$gt</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">30</span> }})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 投影查询
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">collection</span>.<span style="color:#a6e22e">find</span>({}, { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">_id</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span> })
</span></span></code></pre></div><h4 id="更新update">更新(Update)</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// 更新单个文档
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">collection</span>.<span style="color:#a6e22e">updateOne</span>(
</span></span><span style="display:flex;"><span>    { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;张三&#34;</span> },
</span></span><span style="display:flex;"><span>    { <span style="color:#a6e22e">$set</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">26</span> }}
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 更新多个文档
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">collection</span>.<span style="color:#a6e22e">updateMany</span>(
</span></span><span style="display:flex;"><span>    { <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">$gt</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">30</span> }},
</span></span><span style="display:flex;"><span>    { <span style="color:#a6e22e">$set</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">status</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;senior&#34;</span> }}
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><h4 id="删除delete">删除(Delete)</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// 删除单个文档
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">collection</span>.<span style="color:#a6e22e">deleteOne</span>({ <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;张三&#34;</span> })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 删除多个文档
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">collection</span>.<span style="color:#a6e22e">deleteMany</span>({ <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">$lt</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">25</span> }})
</span></span></code></pre></div><h3 id="33-高级查询">3.3 高级查询</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// 比较运算符
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">$eq</span>  <span style="color:#75715e">// 等于
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">$ne</span>  <span style="color:#75715e">// 不等于
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">$gt</span>  <span style="color:#75715e">// 大于
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">$gte</span> <span style="color:#75715e">// 大于等于
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">$lt</span>  <span style="color:#75715e">// 小于
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">$lte</span> <span style="color:#75715e">// 小于等于
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">$in</span>  <span style="color:#75715e">// 在指定数组中
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">$nin</span> <span style="color:#75715e">// 不在指定数组中
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 逻辑运算符
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">$and</span> <span style="color:#75715e">// 与
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">$or</span>  <span style="color:#75715e">// 或
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">$not</span> <span style="color:#75715e">// 非
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">$nor</span> <span style="color:#75715e">// 都不
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 分页
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">collection</span>.<span style="color:#a6e22e">find</span>().<span style="color:#a6e22e">limit</span>(<span style="color:#ae81ff">10</span>)  <span style="color:#75715e">// 限制返回数量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">collection</span>.<span style="color:#a6e22e">find</span>().<span style="color:#a6e22e">skip</span>(<span style="color:#ae81ff">10</span>)   <span style="color:#75715e">// 跳过指定数量
</span></span></span></code></pre></div><h2 id="4-最佳实践">4. 最佳实践</h2>
<h3 id="41-索引使用">4.1 索引使用</h3>
<ul>
<li>为常用查询字段创建索引</li>
<li>避免过多索引</li>
<li>定期分析查询性能</li>
</ul>
<h3 id="42-数据模型设计">4.2 数据模型设计</h3>
<ul>
<li>优先考虑嵌入式关系</li>
<li>适度冗余以提高查询效率</li>
<li>控制文档大小</li>
</ul>
<h3 id="43-性能优化">4.3 性能优化</h3>
<ul>
<li>使用适当的数据类型</li>
<li>避免大规模的in查询</li>
<li>使用投影限制返回字段</li>
<li>批量操作代替单条操作</li>
</ul></div>
    </article>
  </main>

      </div>
      <footer>
  <hr />
  
  <p class="copyright">
    Copyright © 2025
    <a href="https://sunnnner.github.io/"><strong>Blog Author</strong></a>.
    This work is licensed under the
    <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> license.
  </p>
  <p class="builtWith">
    备案号:
    <a href="https://beian.miit.gov.cn/" target="_blank">京ICP备2022023134号-1</a>
  </p>
</footer>

    </div>
  </body>
</html>
